import{w as pc}from"./index.12ece268.js";import{V as mo}from"./index.fc46900e.js";const Wr="tutorial",Mn="part1",Dn="part2",Rn="part3",rf=[Wr,Mn,Dn,Rn],mc=[Wr],af={[Wr]:"Tutorial",[Mn]:"ACS",[Dn]:"DIA",[Rn]:"STU"},of={[Mn]:"ACS",[Dn]:"DIA",[Rn]:"STU"},Ib={[Mn]:0,[Dn]:0,[Rn]:0};let cf=rf.length;function Ab(e,t){let i=mc.concat(t);if(i.includes(e)){let n=i.indexOf(e);return n+1==cf?null:i[n+1]}}function Cb(e,t){return t[t.length-1]===e}function Eb(e){return af[e]}function Ob(e){return mc.includes(e)}const kb=!1,uf={"Content-Type":"application/json"},lf="GET";async function hf(e){return await fetch("./participant_data/"+e,{method:lf,headers:uf})}const q=Array.isArray;function Bt(e){return e!=null?q(e)?e:[e]:[]}function ff(e=0,t=1/0){return`${yo(e)} < row_number() && row_number() <= ${yo(t)}`}function yo(e){return e<0?`count() + ${e}`:e}class yc{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,i){return this.__derive(this,t,i)}filter(t){return this.__filter(this,t)}slice(t,i){return this.filter(ff(t,i)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,i){return this.__relocate(this,Bt(t),i)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,i){return this.__sample(this,t,i)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,i){return this.__impute(this,t,i)}fold(t,i){return this.__fold(this,t,i)}pivot(t,i,n){return this.__pivot(this,t,i,n)}spread(t,i){return this.__spread(this,t,i)}unroll(t,i){return this.__unroll(this,t,i)}lookup(t,i,...n){return this.__lookup(this,t,i,n.flat())}join(t,i,n,s){return this.__join(this,t,i,n,s)}join_left(t,i,n,s){const r={...s,left:!0,right:!1};return this.__join(this,t,i,n,r)}join_right(t,i,n,s){const r={...s,left:!1,right:!0};return this.__join(this,t,i,n,r)}join_full(t,i,n,s){const r={...s,left:!0,right:!0};return this.__join(this,t,i,n,r)}cross(t,i,n){return this.__cross(this,t,i,n)}semijoin(t,i){return this.__semijoin(this,t,i)}antijoin(t,i){return this.__antijoin(this,t,i)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function N(e){throw Error(e)}function St(e){return typeof e=="number"}function et(e){return typeof e=="function"}function sn(e,t){const i=Array(e);if(et(t))for(let n=0;n<e;++n)i[n]=t(n);else i.fill(t);return i}let df=class extends yc{constructor(t,i,n,s,r,a,o){super(o),this._names=Object.freeze(t),this._data=n,this._total=i,this._nrows=s?s.count():i,this._mask=i!==this._nrows&&s||null,this._group=r||null,this._order=a||null}create(t){N("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,i){return this.array(t,i)}array(t,i){N("Not implemented")}*values(t){const i=this.getter(t),n=this.numRows();for(let s=0;s<n;++s)yield i(s)}get(t,i=0){N("Not implemented")}getter(t){N("Not implemented")}objects(t){N("Not implemented")}object(t){N("Not implemented")}[Symbol.iterator](){N("Not implemented")}print(t={}){St(t)?t={limit:t}:t.limit==null&&(t.limit=10);const i=this.objects({...t,grouped:!1}),n=`${this[Symbol.toStringTag]}. Showing ${i.length} rows.`;return console.log(n),console.table(i),this}indices(t=!0){if(this._index)return this._index;const i=this.numRows(),n=new Uint32Array(i),s=this.isOrdered(),r=this.mask();let a=-1;if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))n[++a]=o;else for(let o=0;o<i;++o)n[++a]=o;if(t&&s){const o=this._order,c=this._data;n.sort((u,l)=>o(u,l,c))}return(t||!s)&&(this._index=n),n}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:i,size:n}=this._group,s=sn(n,()=>[]),r=this._index,a=this.mask(),o=this.numRows();if(r&&this.isOrdered())for(let c=0,u;c<o;++c)u=r[c],s[i[u]].push(u);else if(a)for(let c=a.next(0);c>=0;c=a.next(c+1))s[i[c]].push(c);else for(let c=0;c<o;++c)s[i[c]].push(c);if(t&&!r&&this.isOrdered()){const c=this._order,u=this._data;for(let l=0;l<n;++l)s[l].sort((p,d)=>c(p,d,u))}return(t||!this.isOrdered())&&(this._partitions=s),s}scan(t,i,n=1/0,s=0){const r=this._mask,a=this._nrows,o=this._data;let c=s||0;if(c>a)return;const u=Math.min(a,c+n),l=()=>c=this._total;if(i&&this.isOrdered()||r&&this._index){const p=this.indices(),d=this._data;for(;c<u;++c)t(p[c],d,l)}else if(r){let p=u-c+1;for(c=r.nth(c);--p&&c>-1;c=r.next(c+1))t(c,o,l)}else for(;c<u;++c)t(c,o,l)}slice(t=0,i=1/0){if(this.isGrouped())return super.slice(t,i);const n=[],s=this.numRows();return t=Math.max(0,t+(t<0?s:0)),i=Math.min(s,Math.max(0,i+(i<0?s:0))),this.scan(r=>n.push(r),!0,i-t,t),this.reify(n)}reduce(t){return this.__reduce(this,t)}},pf=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},mf=function(e){return e&&et(e.get)?e:new pf(e)};function je(e){return e instanceof Date}function xt(e){return e===Object(e)}function ls(e){return e instanceof RegExp}function bt(e){return typeof e=="string"}function yf(e,t){const i=n=>N(`Illegal argument type: ${n||typeof e}`);return e instanceof Map?go(e.entries(),t):je(e)?i("Date"):ls(e)?i("RegExp"):bt(e)?i():q(e)?gf(e,t):et(e[Symbol.iterator])?_f(e,t):xt(e)?go(Object.entries(e),t):i()}function go(e,t=["key","value"]){const i=[],n=[];for(const[r,a]of e)i.push(r),n.push(a);const s={};return t[0]&&(s[t[0]]=i),t[1]&&(s[t[1]]=n),s}function gf(e,t){const i=e.length,n={},s=r=>n[r]=Array(i);if(i){t=t||Object.keys(e[0]);const r=t.map(s),a=r.length;for(let o=0;o<i;++o){const c=e[o];for(let u=0;u<a;++u)r[u][o]=c[t[u]]}}else t&&t.forEach(s);return n}function _f(e,t){const i={},n=a=>i[a]=[];let s,r;for(const a of e){s||(t=t||Object.keys(a),s=t.map(n),r=s.length);for(let o=0;o<r;++o)s[o].push(a[t[o]])}return!s&&t&&t.forEach(n),i}const{hasOwnProperty:bf}=Object.prototype;function ae(e,t){return bf.call(e,t)}function $t(e){return e?new _o({...e.data()},e.columnNames()):new _o}class _o{constructor(t,i){this.data=t||{},this.names=i||[]}add(t,i){return this.has(t)||this.names.push(t+""),this.data[t]=i}has(t){return ae(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const W=void 0,vf=Object.getPrototypeOf(Int8Array);function Vn(e){return e instanceof vf}function _i(e){return q(e)||Vn(e)}function se(e){return e!=null&&e===e}const mn=e=>_i(e)||bt(e),wf={compact:e=>_i(e)?e.filter(t=>se(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,i)=>mn(e)?e.includes(t,i):!1,indexof:(e,t)=>mn(e)?e.indexOf(t):-1,join:(e,t)=>_i(e)?e.join(t):W,lastindexof:(e,t)=>mn(e)?e.lastIndexOf(t):-1,length:e=>mn(e)?e.length:0,pluck:(e,t)=>_i(e)?e.map(i=>se(i)?i[t]:W):W,reverse:e=>_i(e)?e.slice().reverse():bt(e)?e.split("").reverse().join(""):W,slice:(e,t,i)=>mn(e)?e.slice(t,i):W};function xf(e,t,i,n,s){return e==null?null:e<t?-1/0:e>i?1/0:(e=Math.max(t,Math.min(e,i)),t+n*Math.floor(1e-14+(e-t)/n+(s||0)))}function is(e,t,i="0"){const n=e+"",s=n.length;return s<t?Array(t-s+1).join(i)+n:n}const he=e=>(e<10?"0":"")+e,Sf=e=>e<0?"-"+is(-e,6):e>9999?"+"+is(e,6):is(e,4);function gc(e,t,i,n,s,r,a,o,c){const u=o?"Z":"";return Sf(e)+"-"+he(t+1)+"-"+he(i)+(!c||a?"T"+he(n)+":"+he(s)+":"+he(r)+"."+is(a,3)+u:r?"T"+he(n)+":"+he(s)+":"+he(r)+u:s||n||!o?"T"+he(n)+":"+he(s)+u:"")}function _c(e,t){return isNaN(e)?"Invalid Date":gc(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function Ms(e,t){return isNaN(e)?"Invalid Date":gc(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const If=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function bc(e){return e.match(If)}function Af(e,t=Date.parse){return bc(e)?t(e):e}const vc=6e4,wc=864e5,xc=6048e5,rt=new Date,at=new Date,ot=e=>(rt.setTime(typeof e=="string"?Af(e):e),rt);function Cf(e,t,i,n,s,r,a){return arguments.length?new Date(e,t||0,i??1,n||0,s||0,r||0,a||0):new Date(Date.now())}function Ef(e,t,i,n,s,r,a){return arguments.length?new Date(Date.UTC(e,t||0,i??1,n||0,s||0,r||0,a||0)):new Date(Date.now())}function Of(e){at.setTime(+e),at.setHours(0,0,0,0),rt.setTime(+at),rt.setMonth(0),rt.setDate(1);const t=(at.getTimezoneOffset()-rt.getTimezoneOffset())*vc;return Math.floor(1+(at-rt-t)/wc)}function kf(e){at.setTime(+e),at.setUTCHours(0,0,0,0);const t=Date.UTC(at.getUTCFullYear(),0,1);return Math.floor(1+(at-t)/wc)}function Tf(e,t){const i=t||0;at.setTime(+e),at.setDate(at.getDate()-(at.getDay()+7-i)%7),at.setHours(0,0,0,0),rt.setTime(+e),rt.setMonth(0),rt.setDate(1),rt.setDate(1-(rt.getDay()+7-i)%7),rt.setHours(0,0,0,0);const n=(at.getTimezoneOffset()-rt.getTimezoneOffset())*vc;return Math.floor((1+(at-rt)-n)/xc)}function Bf(e,t){const i=t||0;return at.setTime(+e),at.setUTCDate(at.getUTCDate()-(at.getUTCDay()+7-i)%7),at.setUTCHours(0,0,0,0),rt.setTime(+e),rt.setUTCMonth(0),rt.setUTCDate(1),rt.setUTCDate(1-(rt.getUTCDay()+7-i)%7),rt.setUTCHours(0,0,0,0),Math.floor((1+(at-rt))/xc)}const Nf={format_date:(e,t)=>_c(ot(e),!t),format_utcdate:(e,t)=>Ms(ot(e),!t),timestamp:e=>+ot(e),year:e=>ot(e).getFullYear(),quarter:e=>Math.floor(ot(e).getMonth()/3),month:e=>ot(e).getMonth(),date:e=>ot(e).getDate(),dayofweek:e=>ot(e).getDay(),hours:e=>ot(e).getHours(),minutes:e=>ot(e).getMinutes(),seconds:e=>ot(e).getSeconds(),milliseconds:e=>ot(e).getMilliseconds(),utcyear:e=>ot(e).getUTCFullYear(),utcquarter:e=>Math.floor(ot(e).getUTCMonth()/3),utcmonth:e=>ot(e).getUTCMonth(),utcdate:e=>ot(e).getUTCDate(),utcdayofweek:e=>ot(e).getUTCDay(),utchours:e=>ot(e).getUTCHours(),utcminutes:e=>ot(e).getUTCMinutes(),utcseconds:e=>ot(e).getUTCSeconds(),utcmilliseconds:e=>ot(e).getUTCMilliseconds(),datetime:Cf,dayofyear:Of,week:Tf,utcdatetime:Ef,utcdayofyear:kf,utcweek:Bf,now:Date.now};function qr(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:je(e)||je(t)?+e==+t:ls(e)&&ls(t)?e+""==t+"":xt(e)&&xt(t)?Ff(e,t):!1}function Ff(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return bo(e,t);const i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length||(i.sort(),n.sort(),!bo(i,n,(r,a)=>r===a)))return!1;const s=i.length;for(let r=0;r<s;++r){const a=i[r];if(!qr(e[a],t[a]))return!1}return!0}function bo(e,t,i=qr){const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;++s)if(!i(e[s],t[s]))return!1;return!0}const Lf={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let Mf=Math.random;function rn(){return Mf()}const Df={random:rn,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function Yr(e){return e instanceof Map}function Rf(e){return e instanceof Set}function ns(e){return Yr(e)||Rf(e)}function tr(e){return Array.from(e)}const Vf={has:(e,t)=>ns(e)?e.has(t):e!=null?ae(e,t):!1,keys:e=>Yr(e)?tr(e.keys()):e!=null?Object.keys(e):[],values:e=>ns(e)?tr(e.values()):e!=null?Object.values(e):[],entries:e=>ns(e)?tr(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):W};function Pf(e,t,i){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(ae(t,e))return t[e];return i!==void 0?i:e}function Uf(e,t,i){let n=arguments.length;e=+e,t=+t,i=n<2?(t=e,e=0,1):n<3?1:+i,n=Math.max(0,Math.ceil((t-e)/i))|0;const s=new Array(n);for(let r=0;r<n;++r)s[r]=e+r*i;return s}const jf={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,i)=>e==null?!1:String(e).endsWith(t,i),match:(e,t,i)=>{const n=e==null?e:String(e).match(t);return i==null||n==null?n:typeof i=="number"?n[i]:n.groups?n.groups[i]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,i)=>e==null?e:String(e).padEnd(t,i),padstart:(e,t,i)=>e==null?e:String(e).padStart(t,i),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,i)=>e==null?e:String(e).replace(t,String(i)),substring:(e,t,i)=>e==null?e:String(e).substring(t,i),split:(e,t,i)=>e==null?[]:String(e).split(t,i),startswith:(e,t,i)=>e==null?!1:String(e).startsWith(t,i),trim:e=>e==null?e:String(e).trim()},Ri={bin:xf,equal:qr,recode:Pf,sequence:Uf,...wf,...Nf,...Lf,...Df,...Vf,...jf};function An(e){return typeof e=="bigint"}function Ie(e){return e===void 0?e+"":An(e)?e+"n":JSON.stringify(e)}function T(e,t=[],i=[]){return new $f(e,Bt(t),Bt(i))}let $f=class{constructor(t,i,n){this.name=t,this.fields=i,this.params=n}toString(){const t=[...this.fields.map(i=>`d[${Ie(i)}]`),...this.params.map(Ie)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const Sc=e=>T("any",e),Ic=()=>T("count"),Ac=e=>T("array_agg",e),Cc=e=>T("array_agg_distinct",e),Ec=(e,t)=>T("map_agg",[e,t]),Oc=(e,t)=>T("object_agg",[e,t]),kc=(e,t)=>T("entries_agg",[e,t]),Fb={...Ri,row_object:(...e)=>T("row_object",null,e.flat()),count:Ic,any:Sc,array_agg:Ac,array_agg_distinct:Cc,object_agg:Oc,map_agg:Ec,entries_agg:kc,valid:e=>T("valid",e),invalid:e=>T("invalid",e),distinct:e=>T("distinct",e),mode:e=>T("mode",e),sum:e=>T("sum",e),product:e=>T("product",e),mean:e=>T("mean",e),average:e=>T("average",e),variance:e=>T("variance",e),variancep:e=>T("variancep",e),stdev:e=>T("stdev",e),stdevp:e=>T("stdevp",e),min:e=>T("min",e),max:e=>T("max",e),quantile:(e,t)=>T("quantile",e,t),median:e=>T("median",e),covariance:(e,t)=>T("covariance",[e,t]),covariancep:(e,t)=>T("covariancep",[e,t]),corr:(e,t)=>T("corr",[e,t]),bins:(e,t,i,n)=>T("bins",e,[t,i,n]),row_number:()=>T("row_number"),rank:()=>T("rank"),avg_rank:()=>T("avg_rank"),dense_rank:()=>T("dense_rank"),percent_rank:()=>T("percent_rank"),cume_dist:()=>T("cume_dist"),ntile:e=>T("ntile",null,e),lag:(e,t,i)=>T("lag",e,[t,i]),lead:(e,t,i)=>T("lead",e,[t,i]),first_value:e=>T("first_value",e),last_value:e=>T("last_value",e),nth_value:(e,t)=>T("nth_value",e,t),fill_down:(e,t)=>T("fill_down",e,t),fill_up:(e,t)=>T("fill_up",e,t)};function zf(e,t){e=ns(e)?e:new Set(e);let i=t,n=0;for(;e.has(i);)i=t+ ++n;return i}function Wf(e,t){if(!e||!t)return e;const{keys:i,rows:n,size:s}=e,r=new Int32Array(s);t.scan(l=>r[i[l]]=1);const a=r.reduce((l,p)=>l+p,0);if(a===s)return e;const o=Array(a);let c=0;for(let l=0;l<s;++l)r[l]&&(o[r[l]=c++]=n[l]);const u=new Uint32Array(i.length);return t.scan(l=>u[l]=r[i[l]]),{...e,keys:u,rows:o,size:c}}function qf(e,t,i,n){const{keys:s,rows:r,size:a}=e;let o=r,c=a,u=null;if(i){u=new Int32Array(a),t(y=>u[s[y]]=1);const m=u.reduce((y,g)=>y+g,0);if(m!==a){o=Array(m),c=0;for(let y=0;y<a;++y)u[y]&&(o[u[y]=c++]=r[y])}}let l=-1;const p=new Uint32Array(n);return t(c!==a?m=>p[++l]=u[s[m]]:m=>p[++l]=s[m]),{...e,keys:p,rows:o,size:c}}function Yf(e,t,i,n){const s=n==="map"||n===!0?Ec:n==="entries"?kc:n==="object"?Oc:N('groups option must be "map", "entries", or "object".'),{names:r}=e.groups(),a=zf(e.columnNames(),"_");let o=e.select().reify(t).create({data:{[a]:i}}).rollup({[a]:Ac(a)});for(let c=r.length;--c>=0;)o=o.groupby(r.slice(0,c)).rollup({[a]:s(r[c],a)});return o.get(a)}const Gf="ArrayPattern",Hf="ArrowFunctionExpression",Kf="FunctionExpression",ti="Identifier",an="Literal",Tc="MemberExpression",Jf="ObjectExpression",Bc="ObjectPattern",Nc="Property",Pn="Column",Qf="Constant",Zf="Dictionary",Xf="Function",td="Parameter",Fc="Op",tt=(e,t)=>{const i=ed[e.type];return i?i(e,t):N(`Unsupported expression construct: ${e.type}`)},er=(e,t)=>"("+tt(e.left,t)+" "+e.operator+" "+tt(e.right,t)+")",ir=(e,t)=>"("+de(e.params,t)+")=>"+tt(e.body,t),vo=(e,t)=>tt(e.callee,t)+"("+de(e.arguments,t)+")",de=(e,t,i=",")=>e.map(n=>tt(n,t)).join(i),Lc=e=>e.computed?`[${Ie(e.name)}]`:`.${e.name}`,wo=(e,t,i)=>{const n=e.table||"";return`data${n}${Lc(e)}.${i}(${t.index}${n})`},ed={Constant:e=>e.raw,Column:(e,t)=>wo(e,t,"get"),Dictionary:(e,t)=>wo(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${Lc(e)}`,Op:(e,t)=>`op(${Ie(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:i,expressions:n}=e,s=n.length;let r=i[0].value.raw;for(let a=0;a<s;)r+="${"+tt(n[a],t)+"}"+i[++a].value.raw;return"`"+r+"`"},MemberExpression:(e,t)=>{const i=!e.computed,n=tt(e.object,t),s=tt(e.property,t);return n+(i?"."+s:"["+s+"]")},CallExpression:vo,NewExpression:(e,t)=>"new "+vo(e,t),ArrayExpression:(e,t)=>"["+de(e.elements,t)+"]",AssignmentExpression:er,BinaryExpression:er,LogicalExpression:er,UnaryExpression:(e,t)=>"("+e.operator+tt(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+tt(e.test,t)+"?"+tt(e.consequent,t)+":"+tt(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+de(e.properties,t)+"})",Property:(e,t)=>{const i=tt(e.key,t);return(e.computed?`[${i}]`:i)+":"+tt(e.value,t)},ArrowFunctionExpression:ir,FunctionExpression:ir,FunctionDeclaration:ir,ArrayPattern:(e,t)=>"["+de(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+de(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+de(e.declarations,t,","),VariableDeclarator:(e,t)=>tt(e.id,t)+"="+tt(e.init,t),SpreadElement:(e,t)=>"..."+tt(e.argument,t),BlockStatement:(e,t)=>"{"+de(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>tt(e.expression,t),IfStatement:(e,t)=>"if ("+tt(e.test,t)+")"+tt(e.consequent,t)+(e.alternate?" else "+tt(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+tt(e.discriminant,t)+") {"+de(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+tt(e.test,t):"default")+": "+de(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+tt(e.argument,t),Program:(e,t)=>tt(e.body[0],t)};function hs(e,t={index:"row"}){return tt(e,t)}function id(e,t,i=15,n=!0,s=0,r){const o=Math.LN10;if(r==null){const c=Math.ceil(Math.log(i)/o),u=t-e||Math.abs(e)||1,l=[5,2];for(r=Math.max(s,Math.pow(10,Math.round(Math.log(u)/o)-c));Math.ceil(u/r)>i;)r*=10;const p=l.length;for(let d=0;d<p;++d){const m=r/l[d];m>=s&&u/m<=i&&(r=m)}}if(n){let c=Math.log(r);const u=c>=0?0:~~(-c/o)+1,l=Math.pow(10,-u-1);c=Math.floor(e/r+l)*r,e=e<c?c-r:c,t=Math.ceil(t/r)*r}return[e,t===e?e+r:t,r]}function qi(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:je(e)?+e:q(e)||Vn(e)?`[${e.map(qi)}]`:ls(e)?e+"":nd(e)}function nd(e){let t="{",i=-1;for(const n in e)++i>0&&(t+=","),t+=`"${n}":${qi(e[n])}`;return t+="}",t}function fs(e,t){const i=e.length;return i===1?(n,s)=>qi(e[0](n,s)):(n,s)=>{let r="";for(let a=0;a<i;++a){a>0&&(r+="|");const o=e[a](n,s);if(t&&(o==null||o!==o))return null;r+=qi(o)}return r}}function sd(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const i=qi(t),n=e.get(i);n?++n.n:e.set(i,{v:t,n:1})},decrement(t){const i=qi(t),n=e.get(i);n.n===1?e.delete(i):--n.n},forEach(t){e.forEach(({v:i,n})=>t(i,n))}}}function Le(){}function rd(e,t=0,i=e.length){let n=e[t++];for(let s=t;s<i;++s)n*=e[s];return n}function lt(e){return e.init=e.init||Le,e.add=e.add||Le,e.rem=e.rem||Le,e}function xo(e,t){return e.product_v=!1,e.product=t}const Mc={count:{create:()=>lt({value:e=>e.count}),param:[]},array_agg:{create:()=>lt({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>lt({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>lt({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>lt({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>lt({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:W}),param:[1]},valid:{create:()=>lt({value:e=>e.valid}),param:[1]},invalid:{create:()=>lt({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=sd(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>lt({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>lt({value:e=>{let t=W,i=0;return e.distinct.forEach((n,s)=>{s>i&&(i=s,t=n)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:W,add:(e,t)=>An(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>xo(e,1),value:e=>e.valid?e.product_v?xo(e,rd(e.list.values())):e.product:void 0,add:(e,t)=>An(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:W,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>lt({value:e=>e.valid?e.mean:W}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):W,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>lt({value:e=>e.valid>1?e.dev/e.valid:W}),param:[1],req:["variance"]},stdev:{create:()=>lt({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):W}),param:[1],req:["variance"]},stdevp:{create:()=>lt({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):W}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=W,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===W)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=W,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===W)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>lt({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>lt({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):W,add:(e,t,i)=>{const n=t-e.mean_x,s=i-e.mean_y;e.mean_x+=n/e.valid,e.mean_y+=s/e.valid;const r=i-e.mean_y;e.dev_x+=n*(t-e.mean_x),e.dev_y+=s*r,e.cov+=n*r},rem:(e,t,i)=>{const n=t-e.mean_x,s=i-e.mean_y;e.mean_x-=e.valid?n/e.valid:e.mean_x,e.mean_y-=e.valid?s/e.valid:e.mean_y;const r=i-e.mean_y;e.dev_x-=n*(t-e.mean_x),e.dev_y-=s*r,e.cov-=n*r}}),param:[2]},covariancep:{create:()=>lt({value:e=>e.valid>1?e.cov/e.valid:W}),param:[2],req:["covariance"]},corr:{create:()=>lt({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):W}),param:[2],req:["covariance"]},bins:{create:(e,t,i,n)=>lt({value:s=>id(s.min,s.max,e,t,i,n)}),param:[1,4],req:["min","max"]}},So={create(){let e;return{init:()=>e=1,value:t=>{const i=t.index;return i&&!t.peer(i)?e=i+1:e}}},param:[]},Io={create(){let e;return{init:()=>e=0,value:t=>{const{index:i,peer:n,size:s}=t;let r=i;if(e<r){for(;r+1<s&&n(r+1);)++r;e=r}return(1+e)/s}}},param:[]},Dc={row_number:{create(){return{init:Le,value:e=>e.index+1}},param:[]},rank:So,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:i=>{const n=i.index;if(n>=e){for(t=e=n+1;i.peer(e);t+=++e);t/=e-n}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const i=t.index;return i&&!t.peer(i)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=So.create();return{init:e,value:i=>(t(i)-1)/(i.size-1)}},param:[]},cume_dist:Io,ntile:{create(e){e=+e,e>0||N("ntile num must be greater than zero.");const{init:t,value:i}=Io.create();return{init:t,value:n=>Math.ceil(e*i(n))}},param:[0,1]},lag:{create(e,t=W){return e=+e||1,{init:Le,value:(i,n)=>{const s=i.index-e;return s>=0?i.value(s,n):t}}},param:[1,2]},lead:{create(e,t=W){return e=+e||1,{init:Le,value:(i,n)=>{const s=i.index+e;return s<i.size?i.value(s,n):t}}},param:[1,2]},first_value:{create(){return{init:Le,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Le,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||N("nth_value nth must be greater than zero."),{init:Le,value:(t,i)=>{const n=t.i0+(e-1);return n<t.i1?t.value(n,i):W}}},param:[1,1]},fill_down:{create(e=W){let t;return{init:()=>t=e,value:(i,n)=>{const s=i.value(i.index,n);return se(s)?t=s:t}}},param:[1,1]},fill_up:{create(e=W){let t,i;return{init:()=>(t=e,i=-1),value:(n,s)=>n.index<=i?t:(i=ad(n,s,n.index))>=0?t=n.value(i,s):(i=n.size,t=e)}},param:[1,1]}};function ad(e,t,i){for(const n=e.size;i<n;++i)if(se(e.value(i,t)))return i;return-1}function Gr(e){return ae(Mc,e)}function Hr(e){return ae(Dc,e)}function Rc(e){return ae(Ri,e)||e==="row_object"}function Vc(e){return Gr(e)&&Mc[e]}function Pc(e){return Hr(e)&&Dc[e]}function yn(e,t,i){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,i)}const Kr={escape:(e,t,i)=>yn(e,t,i),expr:(e,t)=>yn(`(row,data,op)=>${e}`,Ri,t),expr2:(e,t)=>yn(`(row0,data0,row,data)=>${e}`,Ri,t),join:(e,t)=>yn(`(row1,data1,row2,data2)=>${e}`,Ri,t),param:(e,t)=>yn(e,Ri,t)},od={"==":1,"!=":1,"===":1,"!==":1};function Uc(e,t,i=0,n,s){if(e.type=Pn,e.name=t,e.table=i,s&&n&&et(n.keyFor)){const r=od[s.operator]?s.left===e?s.right:s.left:s.callee&&s.callee.name==="equal"?s.arguments[s.arguments[0]===e?1:0]:null;r&&r.type===an&&cd(s,e,r,n.keyFor(r.value))}return e}function cd(e,t,i,n){return n<0?(e.type=an,e.value=!1,e.raw="false"):(t.type=Zf,i.value=n,i.raw=n+""),!0}function Ds(e){return q(e)?e:Yr(e)?e.entries():e?Object.entries(e):[]}const jc="row_object";function $c(e,t){e.type=Jf;const i=e.properties=[];for(const n of Ds(t)){const[s,r]=q(n)?n:[n,n];i.push({type:Nc,key:{type:an,raw:Ie(r)},value:Uc({computed:!0},s)})}return e}function zc(e){return hs($c({},e))}function Wc(e){return Kr.expr(zc(e))}function Me(e,t,i,n){function s(r){return r instanceof i?r:new i(function(a){a(r)})}return new(i||(i=Promise))(function(r,a){function o(l){try{u(n.next(l))}catch(p){a(p)}}function c(l){try{u(n.throw(l))}catch(p){a(p)}}function u(l){l.done?r(l.value):s(l.value).then(o,c)}u((n=n.apply(e,t||[])).next())})}function Ao(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(e){return this instanceof V?(this.v=e,this):new V(e)}function bi(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i.apply(e,t||[]),s,r=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(d){n[d]&&(s[d]=function(m){return new Promise(function(y,g){r.push([d,m,y,g])>1||o(d,m)})})}function o(d,m){try{c(n[d](m))}catch(y){p(r[0][3],y)}}function c(d){d.value instanceof V?Promise.resolve(d.value.v).then(u,l):p(r[0][2],d)}function u(d){o("next",d)}function l(d){o("throw",d)}function p(d,m){d(m),r.shift(),r.length&&o(r[0][0],r[0][1])}}function nr(e){var t,i;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,r){t[s]=e[s]?function(a){return(i=!i)?{value:V(e[s](a)),done:!1}:r?r(a):a}:r}}function xn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof Ao=="function"?Ao(e):e[Symbol.iterator](),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(r){i[r]=e[r]&&function(a){return new Promise(function(o,c){a=e[r](a),s(o,c,a.done,a.value)})}}function s(r,a,o,c){Promise.resolve(c).then(function(u){r({value:u,done:o})},a)}}const ud=new TextDecoder("utf-8"),wr=e=>ud.decode(e),ld=new TextEncoder,Jr=e=>ld.encode(e),[Lb,qc]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[Yc,Mb]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[Qr,Db]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),hd=e=>typeof e=="boolean",Et=e=>typeof e=="function",li=e=>e!=null&&Object(e)===e,Rs=e=>li(e)&&Et(e.then),Zr=e=>li(e)&&Et(e[Symbol.iterator]),Vs=e=>li(e)&&Et(e[Symbol.asyncIterator]),fd=e=>li(e)&&"done"in e&&"value"in e,Gc=e=>"_getDOMStream"in e&&"_getNodeStream"in e,dd=e=>li(e)&&Et(e.abort)&&Et(e.getWriter)&&!Gc(e),pd=e=>li(e)&&Et(e.end)&&Et(e.write)&&hd(e.writable)&&!Gc(e),md=e=>li(e)&&Et(e.clear)&&Et(e.bytes)&&Et(e.position)&&Et(e.setPosition)&&Et(e.capacity)&&Et(e.getBufferIdentifier)&&Et(e.createLong),Xr=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function yd(e){const t=e[0]?[e[0]]:[];let i,n,s,r;for(let a,o,c=0,u=0,l=e.length;++c<l;){if(a=t[u],o=e[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset){o&&(t[++u]=o);continue}if({byteOffset:i,byteLength:s}=a,{byteOffset:n,byteLength:r}=o,i+s<n||n+r<i){o&&(t[++u]=o);continue}t[u]=new Uint8Array(a.buffer,i,n-i+r)}return t}function ds(e,t,i=0,n=t.byteLength){const s=e.byteLength,r=new Uint8Array(e.buffer,e.byteOffset,s),a=new Uint8Array(t.buffer,t.byteOffset,Math.min(n,s));return r.set(a,i),e}function Ae(e,t){const i=yd(e),n=i.reduce((l,p)=>l+p.byteLength,0);let s,r,a,o=0,c=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,n);for(const l=i.length;++c<l;){if(s=i[c],r=s.subarray(0,Math.min(s.length,u-o)),u<=o+r.length){r.length<s.length?i[c]=s.subarray(r.length):r.length===s.length&&c++,a?ds(a,r,o):a=r;break}ds(a||(a=new Uint8Array(u)),r,o),o+=r.length}return[a||new Uint8Array(0),i.slice(c),n-(a?a.byteLength:0)]}function gt(e,t){let i=fd(t)?t.value:t;return i instanceof e?e===Uint8Array?new e(i.buffer,i.byteOffset,i.byteLength):i:i?(typeof i=="string"&&(i=Jr(i)),i instanceof ArrayBuffer?new e(i):i instanceof Xr?new e(i):md(i)?gt(e,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new e(0):new e(i.buffer,i.byteOffset,i.byteLength/e.BYTES_PER_ELEMENT):e.from(i)):new e(0)}const gn=e=>gt(Int32Array,e),J=e=>gt(Uint8Array,e),xr=e=>(e.next(),e);function*gd(e,t){const i=function*(s){yield s},n=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Xr?i(t):Zr(t)?t:i(t);return yield*xr(function*(s){let r=null;do r=s.next(yield gt(e,r));while(!r.done)}(n[Symbol.iterator]())),new e}const _d=e=>gd(Uint8Array,e);function Hc(e,t){return bi(this,arguments,function*(){if(Rs(t))return yield V(yield V(yield*nr(xn(Hc(e,yield V(t))))));const n=function(a){return bi(this,arguments,function*(){yield yield V(yield V(a))})},s=function(a){return bi(this,arguments,function*(){yield V(yield*nr(xn(xr(function*(o){let c=null;do c=o.next(yield c==null?void 0:c.value);while(!c.done)}(a[Symbol.iterator]())))))})},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Xr?n(t):Zr(t)?s(t):Vs(t)?t:n(t);return yield V(yield*nr(xn(xr(function(a){return bi(this,arguments,function*(){let o=null;do o=yield V(a.next(yield yield V(gt(e,o))));while(!o.done)})}(r[Symbol.asyncIterator]()))))),yield V(new e)})}const bd=e=>Hc(Uint8Array,e);function ta(e,t,i){if(e!==0){i=i.slice(0,t+1);for(let n=-1;++n<=t;)i[n]+=e}return i}function vd(e,t){let i=0;const n=e.length;if(n!==t.length)return!1;if(n>0)do if(e[i]!==t[i])return!1;while(++i<n);return!0}const Co={fromIterable(e){return Kn(wd(e))},fromAsyncIterable(e){return Kn(xd(e))},fromDOMStream(e){return Kn(Sd(e))},fromNodeStream(e){return Kn(Ad(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},Kn=e=>(e.next(),e);function*wd(e){let t,i=!1,n=[],s,r,a,o=0;function c(){return r==="peek"?Ae(n,a)[0]:([s,n,o]=Ae(n,a),s)}({cmd:r,size:a}=yield null);const u=_d(e)[Symbol.iterator]();try{do if({done:t,value:s}=Number.isNaN(a-o)?u.next():u.next(a-o),!t&&s.byteLength>0&&(n.push(s),o+=s.byteLength),t||a<=o)do({cmd:r,size:a}=yield c());while(a<o);while(!t)}catch(l){(i=!0)&&typeof u.throw=="function"&&u.throw(l)}finally{i===!1&&typeof u.return=="function"&&u.return(null)}return null}function xd(e){return bi(this,arguments,function*(){let i,n=!1,s=[],r,a,o,c=0;function u(){return a==="peek"?Ae(s,o)[0]:([r,s,c]=Ae(s,o),r)}({cmd:a,size:o}=yield yield V(null));const l=bd(e)[Symbol.asyncIterator]();try{do if({done:i,value:r}=Number.isNaN(o-c)?yield V(l.next()):yield V(l.next(o-c)),!i&&r.byteLength>0&&(s.push(r),c+=r.byteLength),i||o<=c)do({cmd:a,size:o}=yield yield V(u()));while(o<c);while(!i)}catch(p){(n=!0)&&typeof l.throw=="function"&&(yield V(l.throw(p)))}finally{n===!1&&typeof l.return=="function"&&(yield V(l.return(new Uint8Array(0))))}return yield V(null)})}function Sd(e){return bi(this,arguments,function*(){let i=!1,n=!1,s=[],r,a,o,c=0;function u(){return a==="peek"?Ae(s,o)[0]:([r,s,c]=Ae(s,o),r)}({cmd:a,size:o}=yield yield V(null));const l=new Id(e);try{do if({done:i,value:r}=Number.isNaN(o-c)?yield V(l.read()):yield V(l.read(o-c)),!i&&r.byteLength>0&&(s.push(J(r)),c+=r.byteLength),i||o<=c)do({cmd:a,size:o}=yield yield V(u()));while(o<c);while(!i)}catch(p){(n=!0)&&(yield V(l.cancel(p)))}finally{n===!1?yield V(l.cancel()):e.locked&&l.releaseLock()}return yield V(null)})}class Id{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Me(this,void 0,void 0,function*(){const{reader:i,source:n}=this;i&&(yield i.cancel(t).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(t){return Me(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const i=yield this.reader.read();return!i.done&&(i.value=J(i)),i})}}const sr=(e,t)=>{const i=s=>n([t,s]);let n;return[t,i,new Promise(s=>(n=s)&&e.once(t,i))]};function Ad(e){return bi(this,arguments,function*(){const i=[];let n="error",s=!1,r=null,a,o,c=0,u=[],l;function p(){return a==="peek"?Ae(u,o)[0]:([l,u,c]=Ae(u,o),l)}if({cmd:a,size:o}=yield yield V(null),e.isTTY)return yield yield V(new Uint8Array(0)),yield V(null);try{i[0]=sr(e,"end"),i[1]=sr(e,"error");do{if(i[2]=sr(e,"readable"),[n,r]=yield V(Promise.race(i.map(m=>m[2]))),n==="error")break;if((s=n==="end")||(Number.isFinite(o-c)?(l=J(e.read(o-c)),l.byteLength<o-c&&(l=J(e.read()))):l=J(e.read()),l.byteLength>0&&(u.push(l),c+=l.byteLength)),s||o<=c)do({cmd:a,size:o}=yield yield V(p()));while(o<c)}while(!s)}finally{yield V(d(i,n==="error"?r:null))}return yield V(null);function d(m,y){return l=u=null,new Promise((g,_)=>{for(const[v,j]of m)e.off(v,j);try{const v=e.destroy;v&&v.call(e,y),y=void 0}catch(v){y=v||y}finally{y!=null?_(y):g()}})}})}var Ut;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ut||(Ut={}));var Qt;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Qt||(Qt={}));var _t;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(_t||(_t={}));var Ce;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Ce||(Ce={}));var P;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(P||(P={}));var Ee;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Ee||(Ee={}));var pt;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(pt||(pt={}));var f;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(f||(f={}));var Ne;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Ne||(Ne={}));const Cd=void 0;function ei(e){if(e===null)return"null";if(e===Cd)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>ei(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,i)=>typeof i=="bigint"?`${i}`:i)}const Ed=Symbol.for("isArrowBigNum");function ce(e,...t){return t.length===0?Object.setPrototypeOf(gt(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}ce.prototype[Ed]=!0;ce.prototype.toJSON=function(){return`"${Ei(this)}"`};ce.prototype.valueOf=function(){return Kc(this)};ce.prototype.toString=function(){return Ei(this)};ce.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return Kc(this);case"string":return Ei(this);case"default":return Sr(this)}return Ei(this)};function Ui(...e){return ce.apply(this,e)}function ji(...e){return ce.apply(this,e)}function Cn(...e){return ce.apply(this,e)}Object.setPrototypeOf(Ui.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(ji.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Cn.prototype,Object.create(Uint32Array.prototype));Object.assign(Ui.prototype,ce.prototype,{constructor:Ui,signed:!0,TypedArray:Int32Array,BigIntArray:Yc});Object.assign(ji.prototype,ce.prototype,{constructor:ji,signed:!1,TypedArray:Uint32Array,BigIntArray:Qr});Object.assign(Cn.prototype,ce.prototype,{constructor:Cn,signed:!0,TypedArray:Uint32Array,BigIntArray:Qr});function Kc(e){const{buffer:t,byteOffset:i,length:n,signed:s}=e,r=new Qr(t,i,n),a=s&&r[r.length-1]&BigInt(1)<<BigInt(63);let o=BigInt(a?1:0),c=BigInt(0);if(a){for(const u of r)o+=~u*(BigInt(1)<<BigInt(32)*c++);o*=BigInt(-1)}else for(const u of r)o+=u*(BigInt(1)<<BigInt(32)*c++);return o}let Ei,Sr;qc?(Sr=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:rr(e),Ei=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:rr(e)):(Ei=rr,Sr=Ei);function rr(e){let t="";const i=new Uint32Array(2);let n=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const s=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let r=-1;const a=n.length-1;do{for(i[0]=n[r=0];r<a;)n[r++]=i[1]=i[0]/10,i[0]=(i[0]-i[1]*10<<16)+n[r];n[r]=i[1]=i[0]/10,i[0]=i[0]-i[1]*10,t=`${i[0]}${t}`}while(s[0]||s[1]||s[2]||s[3]);return t||"0"}class ea{static new(t,i){switch(i){case!0:return new Ui(t);case!1:return new ji(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Yc:return new Ui(t)}return t.byteLength===16?new Cn(t):new ji(t)}static signed(t){return new Ui(t)}static unsigned(t){return new ji(t)}static decimal(t){return new Cn(t)}constructor(t,i){return ea.new(t,i)}}var Jc,Qc,Zc,Xc,tu,eu,iu,nu,su,ru,au,ou,cu,uu,lu,hu,fu,du,pu;class M{static isNull(t){return(t==null?void 0:t.typeId)===f.Null}static isInt(t){return(t==null?void 0:t.typeId)===f.Int}static isFloat(t){return(t==null?void 0:t.typeId)===f.Float}static isBinary(t){return(t==null?void 0:t.typeId)===f.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===f.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===f.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===f.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===f.Date}static isTime(t){return(t==null?void 0:t.typeId)===f.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===f.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===f.Interval}static isList(t){return(t==null?void 0:t.typeId)===f.List}static isStruct(t){return(t==null?void 0:t.typeId)===f.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===f.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===f.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===f.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===f.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===f.Dictionary}static isDenseUnion(t){return M.isUnion(t)&&t.mode===Qt.Dense}static isSparseUnion(t){return M.isUnion(t)&&t.mode===Qt.Sparse}get typeId(){return f.NONE}}Jc=Symbol.toStringTag;M[Jc]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(M.prototype);let $e=class extends M{toString(){return"Null"}get typeId(){return f.Null}};Qc=Symbol.toStringTag;$e[Qc]=(e=>e[Symbol.toStringTag]="Null")($e.prototype);class It extends M{constructor(t,i){super(),this.isSigned=t,this.bitWidth=i}get typeId(){return f.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Zc=Symbol.toStringTag;It[Zc]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(It.prototype);class ia extends It{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class na extends It{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class ii extends It{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class sa extends It{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class ra extends It{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class aa extends It{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class oa extends It{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class ca extends It{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(ia.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(na.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(ii.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(sa.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(ra.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(aa.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(oa.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(ca.prototype,"ArrayType",{value:BigUint64Array});class ni extends M{constructor(t){super(),this.precision=t}get typeId(){return f.Float}get ArrayType(){switch(this.precision){case _t.HALF:return Uint16Array;case _t.SINGLE:return Float32Array;case _t.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Xc=Symbol.toStringTag;ni[Xc]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(ni.prototype);class mu extends ni{constructor(){super(_t.HALF)}}class ua extends ni{constructor(){super(_t.SINGLE)}}class la extends ni{constructor(){super(_t.DOUBLE)}}Object.defineProperty(mu.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(ua.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(la.prototype,"ArrayType",{value:Float64Array});let En=class extends M{constructor(){super()}get typeId(){return f.Binary}toString(){return"Binary"}};tu=Symbol.toStringTag;En[tu]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(En.prototype);let Yi=class extends M{constructor(){super()}get typeId(){return f.Utf8}toString(){return"Utf8"}};eu=Symbol.toStringTag;Yi[eu]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Yi.prototype);let On=class extends M{constructor(){super()}get typeId(){return f.Bool}toString(){return"Bool"}};iu=Symbol.toStringTag;On[iu]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(On.prototype);let ps=class extends M{constructor(t,i,n=128){super(),this.scale=t,this.precision=i,this.bitWidth=n}get typeId(){return f.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};nu=Symbol.toStringTag;ps[nu]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(ps.prototype);class Gi extends M{constructor(t){super(),this.unit=t}get typeId(){return f.Date}toString(){return`Date${(this.unit+1)*32}<${Ce[this.unit]}>`}}su=Symbol.toStringTag;Gi[su]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(Gi.prototype);class Od extends Gi{constructor(){super(Ce.DAY)}}class kd extends Gi{constructor(){super(Ce.MILLISECOND)}}class ze extends M{constructor(t,i){super(),this.unit=t,this.bitWidth=i}get typeId(){return f.Time}toString(){return`Time${this.bitWidth}<${P[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}ru=Symbol.toStringTag;ze[ru]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(ze.prototype);class Td extends ze{constructor(){super(P.SECOND,32)}}class Bd extends ze{constructor(){super(P.MILLISECOND,32)}}class Nd extends ze{constructor(){super(P.MICROSECOND,64)}}class Fd extends ze{constructor(){super(P.NANOSECOND,64)}}class ms extends M{constructor(t,i){super(),this.unit=t,this.timezone=i}get typeId(){return f.Timestamp}toString(){return`Timestamp<${P[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}au=Symbol.toStringTag;ms[au]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(ms.prototype);class Hi extends M{constructor(t){super(),this.unit=t}get typeId(){return f.Interval}toString(){return`Interval<${Ee[this.unit]}>`}}ou=Symbol.toStringTag;Hi[ou]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(Hi.prototype);class Ld extends Hi{constructor(){super(Ee.DAY_TIME)}}class Md extends Hi{constructor(){super(Ee.YEAR_MONTH)}}let Ki=class extends M{constructor(t){super(),this.children=[t]}get typeId(){return f.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};cu=Symbol.toStringTag;Ki[cu]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Ki.prototype);class wt extends M{constructor(t){super(),this.children=t}get typeId(){return f.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}uu=Symbol.toStringTag;wt[uu]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(wt.prototype);class kn extends M{constructor(t,i,n){super(),this.mode=t,this.children=n,this.typeIds=i=Int32Array.from(i),this.typeIdToChildIndex=i.reduce((s,r,a)=>(s[r]=a)&&s||s,Object.create(null))}get typeId(){return f.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}lu=Symbol.toStringTag;kn[lu]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(kn.prototype);let ys=class extends M{constructor(t){super(),this.byteWidth=t}get typeId(){return f.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};hu=Symbol.toStringTag;ys[hu]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(ys.prototype);let Ji=class extends M{constructor(t,i){super(),this.listSize=t,this.children=[i]}get typeId(){return f.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};fu=Symbol.toStringTag;Ji[fu]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Ji.prototype);class Tn extends M{constructor(t,i=!1){super(),this.children=[t],this.keysSorted=i}get typeId(){return f.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}du=Symbol.toStringTag;Tn[du]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(Tn.prototype);const Dd=(e=>()=>++e)(-1);class si extends M{constructor(t,i,n,s){super(),this.indices=i,this.dictionary=t,this.isOrdered=s||!1,this.id=n==null?Dd():typeof n=="number"?n:n.low}get typeId(){return f.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}pu=Symbol.toStringTag;si[pu]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(si.prototype);function ye(e){const t=e;switch(e.typeId){case f.Decimal:return e.bitWidth/32;case f.Timestamp:return 2;case f.Date:return 1+t.unit;case f.Interval:return 1+t.unit;case f.FixedSizeList:return t.listSize;case f.FixedSizeBinary:return t.byteWidth;default:return 1}}class U{visitMany(t,...i){return t.map((n,s)=>this.visit(n,...i.map(r=>r[s])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,i=!0){return Rd(this,t,i)}getVisitFnByTypeId(t,i=!0){return Fi(this,t,i)}visitNull(t,...i){return null}visitBool(t,...i){return null}visitInt(t,...i){return null}visitFloat(t,...i){return null}visitUtf8(t,...i){return null}visitBinary(t,...i){return null}visitFixedSizeBinary(t,...i){return null}visitDate(t,...i){return null}visitTimestamp(t,...i){return null}visitTime(t,...i){return null}visitDecimal(t,...i){return null}visitList(t,...i){return null}visitStruct(t,...i){return null}visitUnion(t,...i){return null}visitDictionary(t,...i){return null}visitInterval(t,...i){return null}visitFixedSizeList(t,...i){return null}visitMap(t,...i){return null}}function Rd(e,t,i=!0){return typeof t=="number"?Fi(e,t,i):typeof t=="string"&&t in f?Fi(e,f[t],i):t&&t instanceof M?Fi(e,Eo(t),i):t!=null&&t.type&&t.type instanceof M?Fi(e,Eo(t.type),i):Fi(e,f.NONE,i)}function Fi(e,t,i=!0){let n=null;switch(t){case f.Null:n=e.visitNull;break;case f.Bool:n=e.visitBool;break;case f.Int:n=e.visitInt;break;case f.Int8:n=e.visitInt8||e.visitInt;break;case f.Int16:n=e.visitInt16||e.visitInt;break;case f.Int32:n=e.visitInt32||e.visitInt;break;case f.Int64:n=e.visitInt64||e.visitInt;break;case f.Uint8:n=e.visitUint8||e.visitInt;break;case f.Uint16:n=e.visitUint16||e.visitInt;break;case f.Uint32:n=e.visitUint32||e.visitInt;break;case f.Uint64:n=e.visitUint64||e.visitInt;break;case f.Float:n=e.visitFloat;break;case f.Float16:n=e.visitFloat16||e.visitFloat;break;case f.Float32:n=e.visitFloat32||e.visitFloat;break;case f.Float64:n=e.visitFloat64||e.visitFloat;break;case f.Utf8:n=e.visitUtf8;break;case f.Binary:n=e.visitBinary;break;case f.FixedSizeBinary:n=e.visitFixedSizeBinary;break;case f.Date:n=e.visitDate;break;case f.DateDay:n=e.visitDateDay||e.visitDate;break;case f.DateMillisecond:n=e.visitDateMillisecond||e.visitDate;break;case f.Timestamp:n=e.visitTimestamp;break;case f.TimestampSecond:n=e.visitTimestampSecond||e.visitTimestamp;break;case f.TimestampMillisecond:n=e.visitTimestampMillisecond||e.visitTimestamp;break;case f.TimestampMicrosecond:n=e.visitTimestampMicrosecond||e.visitTimestamp;break;case f.TimestampNanosecond:n=e.visitTimestampNanosecond||e.visitTimestamp;break;case f.Time:n=e.visitTime;break;case f.TimeSecond:n=e.visitTimeSecond||e.visitTime;break;case f.TimeMillisecond:n=e.visitTimeMillisecond||e.visitTime;break;case f.TimeMicrosecond:n=e.visitTimeMicrosecond||e.visitTime;break;case f.TimeNanosecond:n=e.visitTimeNanosecond||e.visitTime;break;case f.Decimal:n=e.visitDecimal;break;case f.List:n=e.visitList;break;case f.Struct:n=e.visitStruct;break;case f.Union:n=e.visitUnion;break;case f.DenseUnion:n=e.visitDenseUnion||e.visitUnion;break;case f.SparseUnion:n=e.visitSparseUnion||e.visitUnion;break;case f.Dictionary:n=e.visitDictionary;break;case f.Interval:n=e.visitInterval;break;case f.IntervalDayTime:n=e.visitIntervalDayTime||e.visitInterval;break;case f.IntervalYearMonth:n=e.visitIntervalYearMonth||e.visitInterval;break;case f.FixedSizeList:n=e.visitFixedSizeList;break;case f.Map:n=e.visitMap;break}if(typeof n=="function")return n;if(!i)return()=>null;throw new Error(`Unrecognized type '${f[t]}'`)}function Eo(e){switch(e.typeId){case f.Null:return f.Null;case f.Int:{const{bitWidth:t,isSigned:i}=e;switch(t){case 8:return i?f.Int8:f.Uint8;case 16:return i?f.Int16:f.Uint16;case 32:return i?f.Int32:f.Uint32;case 64:return i?f.Int64:f.Uint64}return f.Int}case f.Float:switch(e.precision){case _t.HALF:return f.Float16;case _t.SINGLE:return f.Float32;case _t.DOUBLE:return f.Float64}return f.Float;case f.Binary:return f.Binary;case f.Utf8:return f.Utf8;case f.Bool:return f.Bool;case f.Decimal:return f.Decimal;case f.Time:switch(e.unit){case P.SECOND:return f.TimeSecond;case P.MILLISECOND:return f.TimeMillisecond;case P.MICROSECOND:return f.TimeMicrosecond;case P.NANOSECOND:return f.TimeNanosecond}return f.Time;case f.Timestamp:switch(e.unit){case P.SECOND:return f.TimestampSecond;case P.MILLISECOND:return f.TimestampMillisecond;case P.MICROSECOND:return f.TimestampMicrosecond;case P.NANOSECOND:return f.TimestampNanosecond}return f.Timestamp;case f.Date:switch(e.unit){case Ce.DAY:return f.DateDay;case Ce.MILLISECOND:return f.DateMillisecond}return f.Date;case f.Interval:switch(e.unit){case Ee.DAY_TIME:return f.IntervalDayTime;case Ee.YEAR_MONTH:return f.IntervalYearMonth}return f.Interval;case f.Map:return f.Map;case f.List:return f.List;case f.Struct:return f.Struct;case f.Union:switch(e.mode){case Qt.Dense:return f.DenseUnion;case Qt.Sparse:return f.SparseUnion}return f.Union;case f.FixedSizeBinary:return f.FixedSizeBinary;case f.FixedSizeList:return f.FixedSizeList;case f.Dictionary:return f.Dictionary}throw new Error(`Unrecognized type '${f[e.typeId]}'`)}U.prototype.visitInt8=null;U.prototype.visitInt16=null;U.prototype.visitInt32=null;U.prototype.visitInt64=null;U.prototype.visitUint8=null;U.prototype.visitUint16=null;U.prototype.visitUint32=null;U.prototype.visitUint64=null;U.prototype.visitFloat16=null;U.prototype.visitFloat32=null;U.prototype.visitFloat64=null;U.prototype.visitDateDay=null;U.prototype.visitDateMillisecond=null;U.prototype.visitTimestampSecond=null;U.prototype.visitTimestampMillisecond=null;U.prototype.visitTimestampMicrosecond=null;U.prototype.visitTimestampNanosecond=null;U.prototype.visitTimeSecond=null;U.prototype.visitTimeMillisecond=null;U.prototype.visitTimeMicrosecond=null;U.prototype.visitTimeNanosecond=null;U.prototype.visitDenseUnion=null;U.prototype.visitSparseUnion=null;U.prototype.visitIntervalDayTime=null;U.prototype.visitIntervalYearMonth=null;const yu=new Float64Array(1),Ni=new Uint32Array(yu.buffer);function gu(e){const t=(e&31744)>>10,i=(e&1023)/1024,n=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return n*(i?Number.NaN:1/0);case 0:return n*(i?6103515625e-14*i:0)}return n*Math.pow(2,t-15)*(1+i)}function _u(e){if(e!==e)return 32256;yu[0]=e;const t=(Ni[1]&2147483648)>>16&65535;let i=Ni[1]&2146435072,n=0;return i>=1089470464?Ni[0]>0?i=31744:(i=(i&2080374784)>>16,n=(Ni[1]&1048575)>>10):i<=1056964608?(n=1048576+(Ni[1]&1048575),n=1048576+(n<<(i>>20)-998)>>21,i=0):(i=i-1056964608>>10,n=(Ni[1]&1048575)+512>>10),t|i|n&65535}class E extends U{}function B(e){return(t,i,n)=>{if(t.setValid(i,n!=null))return e(t,i,n)}}const Vd=(e,t,i)=>{e[t]=Math.trunc(i/864e5)},ha=(e,t,i)=>{e[t]=Math.trunc(i%4294967296),e[t+1]=Math.trunc(i/4294967296)},Pd=(e,t,i)=>{e[t]=Math.trunc(i*1e3%4294967296),e[t+1]=Math.trunc(i*1e3/4294967296)},Ud=(e,t,i)=>{e[t]=Math.trunc(i*1e6%4294967296),e[t+1]=Math.trunc(i*1e6/4294967296)},bu=(e,t,i,n)=>{if(i+1<t.length){const{[i]:s,[i+1]:r}=t;e.set(n.subarray(0,r-s),s)}},jd=({offset:e,values:t},i,n)=>{const s=e+i;n?t[s>>3]|=1<<s%8:t[s>>3]&=~(1<<s%8)},Ye=({values:e},t,i)=>{e[t]=i},fa=({values:e},t,i)=>{e[t]=i},vu=({values:e},t,i)=>{e[t]=_u(i)},$d=(e,t,i)=>{switch(e.type.precision){case _t.HALF:return vu(e,t,i);case _t.SINGLE:case _t.DOUBLE:return fa(e,t,i)}},da=({values:e},t,i)=>{Vd(e,t,i.valueOf())},pa=({values:e},t,i)=>{ha(e,t*2,i.valueOf())},wu=({stride:e,values:t},i,n)=>{t.set(n.subarray(0,e),e*i)},zd=({values:e,valueOffsets:t},i,n)=>bu(e,t,i,n),Wd=({values:e,valueOffsets:t},i,n)=>{bu(e,t,i,Jr(n))},xu=(e,t,i)=>{e.type.unit===Ce.DAY?da(e,t,i):pa(e,t,i)},ma=({values:e},t,i)=>ha(e,t*2,i/1e3),ya=({values:e},t,i)=>ha(e,t*2,i),ga=({values:e},t,i)=>Pd(e,t*2,i),_a=({values:e},t,i)=>Ud(e,t*2,i),Su=(e,t,i)=>{switch(e.type.unit){case P.SECOND:return ma(e,t,i);case P.MILLISECOND:return ya(e,t,i);case P.MICROSECOND:return ga(e,t,i);case P.NANOSECOND:return _a(e,t,i)}},ba=({values:e},t,i)=>{e[t]=i},va=({values:e},t,i)=>{e[t]=i},wa=({values:e},t,i)=>{e[t]=i},xa=({values:e},t,i)=>{e[t]=i},Iu=(e,t,i)=>{switch(e.type.unit){case P.SECOND:return ba(e,t,i);case P.MILLISECOND:return va(e,t,i);case P.MICROSECOND:return wa(e,t,i);case P.NANOSECOND:return xa(e,t,i)}},Au=({values:e,stride:t},i,n)=>{e.set(n.subarray(0,t),t*i)},qd=(e,t,i)=>{const n=e.children[0],s=e.valueOffsets,r=Zt.getVisitFn(n);if(Array.isArray(i))for(let a=-1,o=s[t],c=s[t+1];o<c;)r(n,o++,i[++a]);else for(let a=-1,o=s[t],c=s[t+1];o<c;)r(n,o++,i.get(++a))},Yd=(e,t,i)=>{const n=e.children[0],{valueOffsets:s}=e,r=Zt.getVisitFn(n);let{[t]:a,[t+1]:o}=s;const c=i instanceof Map?i.entries():Object.entries(i);for(const u of c)if(r(n,a,u),++a>=o)break},Gd=(e,t)=>(i,n,s,r)=>n&&i(n,e,t[r]),Hd=(e,t)=>(i,n,s,r)=>n&&i(n,e,t.get(r)),Kd=(e,t)=>(i,n,s,r)=>n&&i(n,e,t.get(s.name)),Jd=(e,t)=>(i,n,s,r)=>n&&i(n,e,t[s.name]),Qd=(e,t,i)=>{const n=e.type.children.map(r=>Zt.getVisitFn(r.type)),s=i instanceof Map?Kd(t,i):i instanceof Y?Hd(t,i):Array.isArray(i)?Gd(t,i):Jd(t,i);e.type.children.forEach((r,a)=>s(n[a],e.children[a],r,a))},Zd=(e,t,i)=>{e.type.mode===Qt.Dense?Cu(e,t,i):Eu(e,t,i)},Cu=(e,t,i)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],s=e.children[n];Zt.visit(s,e.valueOffsets[t],i)},Eu=(e,t,i)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],s=e.children[n];Zt.visit(s,t,i)},Xd=(e,t,i)=>{var n;(n=e.dictionary)===null||n===void 0||n.set(e.values[t],i)},Ou=(e,t,i)=>{e.type.unit===Ee.DAY_TIME?Sa(e,t,i):Ia(e,t,i)},Sa=({values:e},t,i)=>{e.set(i.subarray(0,2),2*t)},Ia=({values:e},t,i)=>{e[t]=i[0]*12+i[1]%12},tp=(e,t,i)=>{const{stride:n}=e,s=e.children[0],r=Zt.getVisitFn(s);if(Array.isArray(i))for(let a=-1,o=t*n;++a<n;)r(s,o+a,i[a]);else for(let a=-1,o=t*n;++a<n;)r(s,o+a,i.get(a))};E.prototype.visitBool=B(jd);E.prototype.visitInt=B(Ye);E.prototype.visitInt8=B(Ye);E.prototype.visitInt16=B(Ye);E.prototype.visitInt32=B(Ye);E.prototype.visitInt64=B(Ye);E.prototype.visitUint8=B(Ye);E.prototype.visitUint16=B(Ye);E.prototype.visitUint32=B(Ye);E.prototype.visitUint64=B(Ye);E.prototype.visitFloat=B($d);E.prototype.visitFloat16=B(vu);E.prototype.visitFloat32=B(fa);E.prototype.visitFloat64=B(fa);E.prototype.visitUtf8=B(Wd);E.prototype.visitBinary=B(zd);E.prototype.visitFixedSizeBinary=B(wu);E.prototype.visitDate=B(xu);E.prototype.visitDateDay=B(da);E.prototype.visitDateMillisecond=B(pa);E.prototype.visitTimestamp=B(Su);E.prototype.visitTimestampSecond=B(ma);E.prototype.visitTimestampMillisecond=B(ya);E.prototype.visitTimestampMicrosecond=B(ga);E.prototype.visitTimestampNanosecond=B(_a);E.prototype.visitTime=B(Iu);E.prototype.visitTimeSecond=B(ba);E.prototype.visitTimeMillisecond=B(va);E.prototype.visitTimeMicrosecond=B(wa);E.prototype.visitTimeNanosecond=B(xa);E.prototype.visitDecimal=B(Au);E.prototype.visitList=B(qd);E.prototype.visitStruct=B(Qd);E.prototype.visitUnion=B(Zd);E.prototype.visitDenseUnion=B(Cu);E.prototype.visitSparseUnion=B(Eu);E.prototype.visitDictionary=B(Xd);E.prototype.visitInterval=B(Ou);E.prototype.visitIntervalDayTime=B(Sa);E.prototype.visitIntervalYearMonth=B(Ia);E.prototype.visitFixedSizeList=B(tp);E.prototype.visitMap=B(Yd);const Zt=new E,ie=Symbol.for("parent"),$i=Symbol.for("rowIndex");class Aa{constructor(t,i){return this[ie]=t,this[$i]=i,new Proxy(this,new ip)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[$i],i=this[ie],n=i.type.children,s={};for(let r=-1,a=n.length;++r<a;)s[n[r].name]=Nt.visit(i.children[r],t);return s}toString(){return`{${[...this].map(([t,i])=>`${ei(t)}: ${ei(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new ep(this[ie],this[$i])}}class ep{constructor(t,i){this.childIndex=0,this.children=t.children,this.rowIndex=i,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Nt.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Aa.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ie]:{writable:!0,enumerable:!1,configurable:!1,value:null},[$i]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class ip{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ie].type.children.map(i=>i.name)}has(t,i){return t[ie].type.children.findIndex(n=>n.name===i)!==-1}getOwnPropertyDescriptor(t,i){if(t[ie].type.children.findIndex(n=>n.name===i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,i){if(Reflect.has(t,i))return t[i];const n=t[ie].type.children.findIndex(s=>s.name===i);if(n!==-1){const s=Nt.visit(t[ie].children[n],t[$i]);return Reflect.set(t,i,s),s}}set(t,i,n){const s=t[ie].type.children.findIndex(r=>r.name===i);return s!==-1?(Zt.visit(t[ie].children[s],t[$i],n),Reflect.set(t,i,n)):Reflect.has(t,i)||typeof i=="symbol"?Reflect.set(t,i,n):!1}}class S extends U{}function O(e){return(t,i)=>t.getValid(i)?e(t,i):null}const np=(e,t)=>864e5*e[t],Ca=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),sp=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,rp=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,ku=e=>new Date(e),ap=(e,t)=>ku(np(e,t)),op=(e,t)=>ku(Ca(e,t)),cp=(e,t)=>null,Tu=(e,t,i)=>{if(i+1>=t.length)return null;const n=t[i],s=t[i+1];return e.subarray(n,s)},up=({offset:e,values:t},i)=>{const n=e+i;return(t[n>>3]&1<<n%8)!==0},Bu=({values:e},t)=>ap(e,t),Nu=({values:e},t)=>op(e,t*2),hi=({stride:e,values:t},i)=>t[e*i],lp=({stride:e,values:t},i)=>gu(t[e*i]),Fu=({values:e},t)=>e[t],hp=({stride:e,values:t},i)=>t.subarray(e*i,e*(i+1)),fp=({values:e,valueOffsets:t},i)=>Tu(e,t,i),dp=({values:e,valueOffsets:t},i)=>{const n=Tu(e,t,i);return n!==null?wr(n):null},pp=({values:e},t)=>e[t],mp=({type:e,values:t},i)=>e.precision!==_t.HALF?t[i]:gu(t[i]),yp=(e,t)=>e.type.unit===Ce.DAY?Bu(e,t):Nu(e,t),Lu=({values:e},t)=>1e3*Ca(e,t*2),Mu=({values:e},t)=>Ca(e,t*2),Du=({values:e},t)=>sp(e,t*2),Ru=({values:e},t)=>rp(e,t*2),gp=(e,t)=>{switch(e.type.unit){case P.SECOND:return Lu(e,t);case P.MILLISECOND:return Mu(e,t);case P.MICROSECOND:return Du(e,t);case P.NANOSECOND:return Ru(e,t)}},Vu=({values:e},t)=>e[t],Pu=({values:e},t)=>e[t],Uu=({values:e},t)=>e[t],ju=({values:e},t)=>e[t],_p=(e,t)=>{switch(e.type.unit){case P.SECOND:return Vu(e,t);case P.MILLISECOND:return Pu(e,t);case P.MICROSECOND:return Uu(e,t);case P.NANOSECOND:return ju(e,t)}},bp=({values:e,stride:t},i)=>ea.decimal(e.subarray(t*i,t*(i+1))),vp=(e,t)=>{const{valueOffsets:i,stride:n,children:s}=e,{[t*n]:r,[t*n+1]:a}=i,c=s[0].slice(r,a-r);return new Y([c])},wp=(e,t)=>{const{valueOffsets:i,children:n}=e,{[t]:s,[t+1]:r}=i,a=n[0];return new Ps(a.slice(s,r-s))},xp=(e,t)=>new Aa(e,t),Sp=(e,t)=>e.type.mode===Qt.Dense?$u(e,t):zu(e,t),$u=(e,t)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[i];return Nt.visit(n,e.valueOffsets[t])},zu=(e,t)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[i];return Nt.visit(n,t)},Ip=(e,t)=>{var i;return(i=e.dictionary)===null||i===void 0?void 0:i.get(e.values[t])},Ap=(e,t)=>e.type.unit===Ee.DAY_TIME?Wu(e,t):qu(e,t),Wu=({values:e},t)=>e.subarray(2*t,2*(t+1)),qu=({values:e},t)=>{const i=e[t],n=new Int32Array(2);return n[0]=Math.trunc(i/12),n[1]=Math.trunc(i%12),n},Cp=(e,t)=>{const{stride:i,children:n}=e,r=n[0].slice(t*i,i);return new Y([r])};S.prototype.visitNull=O(cp);S.prototype.visitBool=O(up);S.prototype.visitInt=O(pp);S.prototype.visitInt8=O(hi);S.prototype.visitInt16=O(hi);S.prototype.visitInt32=O(hi);S.prototype.visitInt64=O(Fu);S.prototype.visitUint8=O(hi);S.prototype.visitUint16=O(hi);S.prototype.visitUint32=O(hi);S.prototype.visitUint64=O(Fu);S.prototype.visitFloat=O(mp);S.prototype.visitFloat16=O(lp);S.prototype.visitFloat32=O(hi);S.prototype.visitFloat64=O(hi);S.prototype.visitUtf8=O(dp);S.prototype.visitBinary=O(fp);S.prototype.visitFixedSizeBinary=O(hp);S.prototype.visitDate=O(yp);S.prototype.visitDateDay=O(Bu);S.prototype.visitDateMillisecond=O(Nu);S.prototype.visitTimestamp=O(gp);S.prototype.visitTimestampSecond=O(Lu);S.prototype.visitTimestampMillisecond=O(Mu);S.prototype.visitTimestampMicrosecond=O(Du);S.prototype.visitTimestampNanosecond=O(Ru);S.prototype.visitTime=O(_p);S.prototype.visitTimeSecond=O(Vu);S.prototype.visitTimeMillisecond=O(Pu);S.prototype.visitTimeMicrosecond=O(Uu);S.prototype.visitTimeNanosecond=O(ju);S.prototype.visitDecimal=O(bp);S.prototype.visitList=O(vp);S.prototype.visitStruct=O(xp);S.prototype.visitUnion=O(Sp);S.prototype.visitDenseUnion=O($u);S.prototype.visitSparseUnion=O(zu);S.prototype.visitDictionary=O(Ip);S.prototype.visitInterval=O(Ap);S.prototype.visitIntervalDayTime=O(Wu);S.prototype.visitIntervalYearMonth=O(qu);S.prototype.visitFixedSizeList=O(Cp);S.prototype.visitMap=O(wp);const Nt=new S,ne=Symbol.for("keys"),zi=Symbol.for("vals");class Ps{constructor(t){return this[ne]=new Y([t.children[0]]).memoize(),this[zi]=t.children[1],new Proxy(this,new Op)}[Symbol.iterator](){return new Ep(this[ne],this[zi])}get size(){return this[ne].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ne],i=this[zi],n={};for(let s=-1,r=t.length;++s<r;)n[t.get(s)]=Nt.visit(i,s);return n}toString(){return`{${[...this].map(([t,i])=>`${ei(t)}: ${ei(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Ep{constructor(t,i){this.keys=t,this.vals=i,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Nt.visit(this.vals,t)]})}}class Op{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ne].toArray().map(String)}has(t,i){return t[ne].includes(i)}getOwnPropertyDescriptor(t,i){if(t[ne].indexOf(i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,i){if(Reflect.has(t,i))return t[i];const n=t[ne].indexOf(i);if(n!==-1){const s=Nt.visit(Reflect.get(t,zi),n);return Reflect.set(t,i,s),s}}set(t,i,n){const s=t[ne].indexOf(i);return s!==-1?(Zt.visit(Reflect.get(t,zi),s,n),Reflect.set(t,i,n)):Reflect.has(t,i)?Reflect.set(t,i,n):!1}}Object.defineProperties(Ps.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ne]:{writable:!0,enumerable:!1,configurable:!1,value:null},[zi]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Oo;function Yu(e,t,i,n){const{length:s=0}=e;let r=typeof t!="number"?0:t,a=typeof i!="number"?s:i;return r<0&&(r=(r%s+s)%s),a<0&&(a=(a%s+s)%s),a<r&&(Oo=r,r=a,a=Oo),a>s&&(a=s),n?n(e,r,a):[r,a]}const ko=e=>e!==e;function on(e){if(typeof e!=="object"||e===null)return ko(e)?ko:i=>i===e;if(e instanceof Date){const i=e.valueOf();return n=>n instanceof Date?n.valueOf()===i:!1}return ArrayBuffer.isView(e)?i=>i?vd(e,i):!1:e instanceof Map?Tp(e):Array.isArray(e)?kp(e):e instanceof Y?Bp(e):Np(e,!0)}function kp(e){const t=[];for(let i=-1,n=e.length;++i<n;)t[i]=on(e[i]);return Us(t)}function Tp(e){let t=-1;const i=[];for(const n of e.values())i[++t]=on(n);return Us(i)}function Bp(e){const t=[];for(let i=-1,n=e.length;++i<n;)t[i]=on(e.get(i));return Us(t)}function Np(e,t=!1){const i=Object.keys(e);if(!t&&i.length===0)return()=>!1;const n=[];for(let s=-1,r=i.length;++s<r;)n[s]=on(e[i[s]]);return Us(n,i)}function Us(e,t){return i=>{if(!i||typeof i!="object")return!1;switch(i.constructor){case Array:return Fp(e,i);case Map:return To(e,i,i.keys());case Ps:case Aa:case Object:case void 0:return To(e,i,t||Object.keys(i))}return i instanceof Y?Lp(e,i):!1}}function Fp(e,t){const i=e.length;if(t.length!==i)return!1;for(let n=-1;++n<i;)if(!e[n](t[n]))return!1;return!0}function Lp(e,t){const i=e.length;if(t.length!==i)return!1;for(let n=-1;++n<i;)if(!e[n](t.get(n)))return!1;return!0}function To(e,t,i){const n=i[Symbol.iterator](),s=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),r=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let a=0;const o=e.length;let c=r.next(),u=n.next(),l=s.next();for(;a<o&&!u.done&&!l.done&&!c.done&&!(u.value!==l.value||!e[a](c.value));++a,u=n.next(),l=s.next(),c=r.next());return a===o&&u.done&&l.done&&c.done?!0:(n.return&&n.return(),s.return&&s.return(),r.return&&r.return(),!1)}function Gu(e,t,i,n){return(i&1<<n)!==0}function Mp(e,t,i,n){return(i&1<<n)>>n}function Ea(e,t,i){const n=i.byteLength+7&-8;if(e>0||i.byteLength<n){const s=new Uint8Array(n);return s.set(e%8===0?i.subarray(e>>3):Hu(new Oa(i,e,t,null,Gu)).subarray(0,n)),s}return i}function Hu(e){const t=[];let i=0,n=0,s=0;for(const a of e)a&&(s|=1<<n),++n===8&&(t[i++]=s,s=n=0);(i===0||n>0)&&(t[i++]=s);const r=new Uint8Array(t.length+7&-8);return r.set(t),r}class Oa{constructor(t,i,n,s,r){this.bytes=t,this.length=n,this.context=s,this.get=r,this.bit=i%8,this.byteIndex=i>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Ir(e,t,i){if(i-t<=0)return 0;if(i-t<8){let r=0;for(const a of new Oa(e,t,i-t,e,Mp))r+=a;return r}const n=i>>3<<3,s=t+(t%8===0?0:8-t%8);return Ir(e,t,s)+Ir(e,n,i)+Dp(e,s>>3,n-s>>3)}function Dp(e,t,i){let n=0,s=Math.trunc(t);const r=new DataView(e.buffer,e.byteOffset,e.byteLength),a=i===void 0?e.byteLength:s+i;for(;a-s>=4;)n+=ar(r.getUint32(s)),s+=4;for(;a-s>=2;)n+=ar(r.getUint16(s)),s+=2;for(;a-s>=1;)n+=ar(r.getUint8(s)),s+=1;return n}function ar(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Rp=-1;class Z{constructor(t,i,n,s,r,a=[],o){this.type=t,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(i||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(s||0,-1));let c;r instanceof Z?(this.stride=r.stride,this.values=r.values,this.typeIds=r.typeIds,this.nullBitmap=r.nullBitmap,this.valueOffsets=r.valueOffsets):(this.stride=ye(t),r&&((c=r[0])&&(this.valueOffsets=c),(c=r[1])&&(this.values=c),(c=r[2])&&(this.nullBitmap=c),(c=r[3])&&(this.typeIds=c))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:i,values:n,nullBitmap:s,typeIds:r}=this;return i&&(t+=i.byteLength),n&&(t+=n.byteLength),s&&(t+=s.byteLength),r&&(t+=r.byteLength),this.children.reduce((a,o)=>a+o.byteLength,t)}get nullCount(){let t=this._nullCount,i;return t<=Rp&&(i=this.nullBitmap)&&(this._nullCount=t=this.length-Ir(i,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const i=this.offset+t;return(this.nullBitmap[i>>3]&1<<i%8)!==0}return!0}setValid(t,i){if(!this.nullable)return i;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:c}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:c,_nullCount:0})}const{nullBitmap:n,offset:s}=this,r=s+t>>3,a=(s+t)%8,o=n[r]>>a&1;return i?o===0&&(n[r]|=1<<a,this._nullCount=this.nullCount+1):o===1&&(n[r]&=~(1<<a),this._nullCount=this.nullCount-1),i}clone(t=this.type,i=this.offset,n=this.length,s=this._nullCount,r=this,a=this.children){return new Z(t,i,n,s,r,a,this.dictionary)}slice(t,i){const{stride:n,typeId:s,children:r}=this,a=+(this._nullCount===0)-1,o=s===16?n:1,c=this._sliceBuffers(t,i,n,s);return this.clone(this.type,this.offset+t,i,a,c,r.length===0||this.valueOffsets?r:this._sliceChildren(r,o*t,o*i))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===f.Null)return this.clone(this.type,0,t,0);const{length:i,nullCount:n}=this,s=new Uint8Array((t+63&-64)>>3).fill(255,0,i>>3);s[i>>3]=(1<<i-(i&-8))-1,n>0&&s.set(Ea(this.offset,i,this.nullBitmap),0);const r=this.buffers;return r[Ne.VALIDITY]=s,this.clone(this.type,0,t,n+(t-i),r)}_sliceBuffers(t,i,n,s){let r;const{buffers:a}=this;return(r=a[Ne.TYPE])&&(a[Ne.TYPE]=r.subarray(t,t+i)),(r=a[Ne.OFFSET])&&(a[Ne.OFFSET]=r.subarray(t,t+i+1))||(r=a[Ne.DATA])&&(a[Ne.DATA]=s===6?r:r.subarray(n*t,n*(t+i))),a}_sliceChildren(t,i,n){return t.map(s=>s.slice(i,n))}}Z.prototype.children=Object.freeze([]);class Sn extends U{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:i,["offset"]:n=0,["length"]:s=0}=t;return new Z(i,n,s,0)}visitBool(t){const{["type"]:i,["offset"]:n=0}=t,s=J(t.nullBitmap),r=gt(i.ArrayType,t.data),{["length"]:a=r.length>>3,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Z(i,n,a,o,[void 0,r,s])}visitInt(t){const{["type"]:i,["offset"]:n=0}=t,s=J(t.nullBitmap),r=gt(i.ArrayType,t.data),{["length"]:a=r.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Z(i,n,a,o,[void 0,r,s])}visitFloat(t){const{["type"]:i,["offset"]:n=0}=t,s=J(t.nullBitmap),r=gt(i.ArrayType,t.data),{["length"]:a=r.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Z(i,n,a,o,[void 0,r,s])}visitUtf8(t){const{["type"]:i,["offset"]:n=0}=t,s=J(t.data),r=J(t.nullBitmap),a=gn(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Z(i,n,o,c,[a,s,r])}visitBinary(t){const{["type"]:i,["offset"]:n=0}=t,s=J(t.data),r=J(t.nullBitmap),a=gn(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Z(i,n,o,c,[a,s,r])}visitFixedSizeBinary(t){const{["type"]:i,["offset"]:n=0}=t,s=J(t.nullBitmap),r=gt(i.ArrayType,t.data),{["length"]:a=r.length/ye(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Z(i,n,a,o,[void 0,r,s])}visitDate(t){const{["type"]:i,["offset"]:n=0}=t,s=J(t.nullBitmap),r=gt(i.ArrayType,t.data),{["length"]:a=r.length/ye(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Z(i,n,a,o,[void 0,r,s])}visitTimestamp(t){const{["type"]:i,["offset"]:n=0}=t,s=J(t.nullBitmap),r=gt(i.ArrayType,t.data),{["length"]:a=r.length/ye(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Z(i,n,a,o,[void 0,r,s])}visitTime(t){const{["type"]:i,["offset"]:n=0}=t,s=J(t.nullBitmap),r=gt(i.ArrayType,t.data),{["length"]:a=r.length/ye(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Z(i,n,a,o,[void 0,r,s])}visitDecimal(t){const{["type"]:i,["offset"]:n=0}=t,s=J(t.nullBitmap),r=gt(i.ArrayType,t.data),{["length"]:a=r.length/ye(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Z(i,n,a,o,[void 0,r,s])}visitList(t){const{["type"]:i,["offset"]:n=0,["child"]:s}=t,r=J(t.nullBitmap),a=gn(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Z(i,n,o,c,[a,void 0,r],[s])}visitStruct(t){const{["type"]:i,["offset"]:n=0,["children"]:s=[]}=t,r=J(t.nullBitmap),{length:a=s.reduce((c,{length:u})=>Math.max(c,u),0),nullCount:o=t.nullBitmap?-1:0}=t;return new Z(i,n,a,o,[void 0,void 0,r],s)}visitUnion(t){const{["type"]:i,["offset"]:n=0,["children"]:s=[]}=t,r=J(t.nullBitmap),a=gt(i.ArrayType,t.typeIds),{["length"]:o=a.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;if(M.isSparseUnion(i))return new Z(i,n,o,c,[void 0,void 0,r,a],s);const u=gn(t.valueOffsets);return new Z(i,n,o,c,[u,void 0,r,a],s)}visitDictionary(t){const{["type"]:i,["offset"]:n=0}=t,s=J(t.nullBitmap),r=gt(i.indices.ArrayType,t.data),{["dictionary"]:a=new Y([new Sn().visit({type:i.dictionary})])}=t,{["length"]:o=r.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Z(i,n,o,c,[void 0,r,s],[],a)}visitInterval(t){const{["type"]:i,["offset"]:n=0}=t,s=J(t.nullBitmap),r=gt(i.ArrayType,t.data),{["length"]:a=r.length/ye(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Z(i,n,a,o,[void 0,r,s])}visitFixedSizeList(t){const{["type"]:i,["offset"]:n=0,["child"]:s=new Sn().visit({type:i.valueType})}=t,r=J(t.nullBitmap),{["length"]:a=s.length/ye(i),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Z(i,n,a,o,[void 0,void 0,r],[s])}visitMap(t){const{["type"]:i,["offset"]:n=0,["child"]:s=new Sn().visit({type:i.childType})}=t,r=J(t.nullBitmap),a=gn(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Z(i,n,o,c,[a,void 0,r],[s])}}function vt(e){return new Sn().visit(e)}class Bo{constructor(t=0,i){this.numChunks=t,this.getChunkIterator=i,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Ku(e){return e.reduce((t,i)=>t+i.nullCount,0)}function Ju(e){return e.reduce((t,i,n)=>(t[n+1]=t[n]+i.length,t),new Uint32Array(e.length+1))}function Qu(e,t,i,n){const s=[];for(let r=-1,a=e.length;++r<a;){const o=e[r],c=t[r],{length:u}=o;if(c>=n)break;if(i>=c+u)continue;if(c>=i&&c+u<=n){s.push(o);continue}const l=Math.max(0,i-c),p=Math.min(n-c,u);s.push(o.slice(l,p-l))}return s.length===0&&s.push(e[0].slice(0,0)),s}function ka(e,t,i,n){let s=0,r=0,a=t.length-1;do{if(s>=a-1)return i<t[a]?n(e,s,i-t[s]):null;r=s+Math.trunc((a-s)*.5),i<t[r]?a=r:s=r}while(s<a)}function Ta(e,t){return e.getValid(t)}function Wi(e){function t(i,n,s){return e(i[n],s)}return function(i){const n=this.data;return ka(n,this._offsets,i,t)}}function Zu(e){let t;function i(n,s,r){return e(n[s],r,t)}return function(n,s){const r=this.data;t=s;const a=ka(r,this._offsets,n,i);return t=void 0,a}}function Xu(e){let t;function i(n,s,r){let a=r,o=0,c=0;for(let u=s-1,l=n.length;++u<l;){const p=n[u];if(~(o=e(p,t,a)))return c+o;a=0,c+=p.length}return-1}return function(n,s){t=n;const r=this.data,a=typeof s!="number"?i(r,0,0):ka(r,this._offsets,s,i);return t=void 0,a}}class I extends U{}function Vp(e,t){return t===null&&e.length>0?0:-1}function Pp(e,t){const{nullBitmap:i}=e;if(!i||e.nullCount<=0)return-1;let n=0;for(const s of new Oa(i,e.offset+(t||0),e.length,i,Gu)){if(!s)return n;++n}return-1}function F(e,t,i){if(t===void 0)return-1;if(t===null)return Pp(e,i);const n=Nt.getVisitFn(e),s=on(t);for(let r=(i||0)-1,a=e.length;++r<a;)if(s(n(e,r)))return r;return-1}function tl(e,t,i){const n=Nt.getVisitFn(e),s=on(t);for(let r=(i||0)-1,a=e.length;++r<a;)if(s(n(e,r)))return r;return-1}I.prototype.visitNull=Vp;I.prototype.visitBool=F;I.prototype.visitInt=F;I.prototype.visitInt8=F;I.prototype.visitInt16=F;I.prototype.visitInt32=F;I.prototype.visitInt64=F;I.prototype.visitUint8=F;I.prototype.visitUint16=F;I.prototype.visitUint32=F;I.prototype.visitUint64=F;I.prototype.visitFloat=F;I.prototype.visitFloat16=F;I.prototype.visitFloat32=F;I.prototype.visitFloat64=F;I.prototype.visitUtf8=F;I.prototype.visitBinary=F;I.prototype.visitFixedSizeBinary=F;I.prototype.visitDate=F;I.prototype.visitDateDay=F;I.prototype.visitDateMillisecond=F;I.prototype.visitTimestamp=F;I.prototype.visitTimestampSecond=F;I.prototype.visitTimestampMillisecond=F;I.prototype.visitTimestampMicrosecond=F;I.prototype.visitTimestampNanosecond=F;I.prototype.visitTime=F;I.prototype.visitTimeSecond=F;I.prototype.visitTimeMillisecond=F;I.prototype.visitTimeMicrosecond=F;I.prototype.visitTimeNanosecond=F;I.prototype.visitDecimal=F;I.prototype.visitList=F;I.prototype.visitStruct=F;I.prototype.visitUnion=F;I.prototype.visitDenseUnion=tl;I.prototype.visitSparseUnion=tl;I.prototype.visitDictionary=F;I.prototype.visitInterval=F;I.prototype.visitIntervalDayTime=F;I.prototype.visitIntervalYearMonth=F;I.prototype.visitFixedSizeList=F;I.prototype.visitMap=F;const gs=new I;class A extends U{}function k(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===f.Timestamp||t instanceof It&&t.bitWidth!==64||t instanceof ze&&t.bitWidth!==64||t instanceof ni&&t.precision!==_t.HALF))return new Bo(e.data.length,n=>{const s=e.data[n];return s.values.subarray(0,s.length)[Symbol.iterator]()});let i=0;return new Bo(e.data.length,n=>{const r=e.data[n].length,a=e.slice(i,i+r);return i+=r,new Up(a)})}class Up{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}A.prototype.visitNull=k;A.prototype.visitBool=k;A.prototype.visitInt=k;A.prototype.visitInt8=k;A.prototype.visitInt16=k;A.prototype.visitInt32=k;A.prototype.visitInt64=k;A.prototype.visitUint8=k;A.prototype.visitUint16=k;A.prototype.visitUint32=k;A.prototype.visitUint64=k;A.prototype.visitFloat=k;A.prototype.visitFloat16=k;A.prototype.visitFloat32=k;A.prototype.visitFloat64=k;A.prototype.visitUtf8=k;A.prototype.visitBinary=k;A.prototype.visitFixedSizeBinary=k;A.prototype.visitDate=k;A.prototype.visitDateDay=k;A.prototype.visitDateMillisecond=k;A.prototype.visitTimestamp=k;A.prototype.visitTimestampSecond=k;A.prototype.visitTimestampMillisecond=k;A.prototype.visitTimestampMicrosecond=k;A.prototype.visitTimestampNanosecond=k;A.prototype.visitTime=k;A.prototype.visitTimeSecond=k;A.prototype.visitTimeMillisecond=k;A.prototype.visitTimeMicrosecond=k;A.prototype.visitTimeNanosecond=k;A.prototype.visitDecimal=k;A.prototype.visitList=k;A.prototype.visitStruct=k;A.prototype.visitUnion=k;A.prototype.visitDenseUnion=k;A.prototype.visitSparseUnion=k;A.prototype.visitDictionary=k;A.prototype.visitInterval=k;A.prototype.visitIntervalDayTime=k;A.prototype.visitIntervalYearMonth=k;A.prototype.visitFixedSizeList=k;A.prototype.visitMap=k;const Ba=new A,jp=(e,t)=>e+t;class fi extends U{visitNull(t,i){return 0}visitInt(t,i){return t.type.bitWidth/8}visitFloat(t,i){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,i){return 1/8}visitDecimal(t,i){return t.type.bitWidth/8}visitDate(t,i){return(t.type.unit+1)*4}visitTime(t,i){return t.type.bitWidth/8}visitTimestamp(t,i){return t.type.unit===P.SECOND?4:8}visitInterval(t,i){return(t.type.unit+1)*4}visitStruct(t,i){return t.children.reduce((n,s)=>n+Oe.visit(s,i),0)}visitFixedSizeBinary(t,i){return t.type.byteWidth}visitMap(t,i){return 8+t.children.reduce((n,s)=>n+Oe.visit(s,i),0)}visitDictionary(t,i){var n;return t.type.indices.bitWidth/8+(((n=t.dictionary)===null||n===void 0?void 0:n.getByteLength(t.values[i]))||0)}}const $p=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),zp=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Wp=({valueOffsets:e,stride:t,children:i},n)=>{const s=i[0],{[n*t]:r}=e,{[n*t+1]:a}=e,o=Oe.getVisitFn(s.type),c=s.slice(r,a-r);let u=8;for(let l=-1,p=a-r;++l<p;)u+=o(c,l);return u},qp=({stride:e,children:t},i)=>{const n=t[0],s=n.slice(i*e,e),r=Oe.getVisitFn(n.type);let a=0;for(let o=-1,c=s.length;++o<c;)a+=r(s,o);return a},Yp=(e,t)=>e.type.mode===Qt.Dense?el(e,t):il(e,t),el=({type:e,children:t,typeIds:i,valueOffsets:n},s)=>{const r=e.typeIdToChildIndex[i[s]];return 8+Oe.visit(t[r],n[s])},il=({children:e},t)=>4+Oe.visitMany(e,e.map(()=>t)).reduce(jp,0);fi.prototype.visitUtf8=$p;fi.prototype.visitBinary=zp;fi.prototype.visitList=Wp;fi.prototype.visitFixedSizeList=qp;fi.prototype.visitUnion=Yp;fi.prototype.visitDenseUnion=el;fi.prototype.visitSparseUnion=il;const Oe=new fi;var nl;const sl={},rl={};class Y{constructor(t){var i,n,s;const r=t[0]instanceof Y?t.flatMap(o=>o.data):t;if(r.length===0||r.some(o=>!(o instanceof Z)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(i=r[0])===null||i===void 0?void 0:i.type;switch(r.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:c,indexOf:u,byteLength:l}=sl[a.typeId],p=r[0];this.isValid=d=>Ta(p,d),this.get=d=>o(p,d),this.set=(d,m)=>c(p,d,m),this.indexOf=d=>u(p,d),this.getByteLength=d=>l(p,d),this._offsets=[0,p.length];break}default:Object.setPrototypeOf(this,rl[a.typeId]),this._offsets=Ju(r);break}this.data=r,this.type=a,this.stride=ye(a),this.numChildren=(s=(n=a.children)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,i)=>t+i.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=Ku(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${f[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,i){}indexOf(t,i){return-1}includes(t,i){return this.indexOf(t,i)>0}getByteLength(t){return 0}[Symbol.iterator](){return Ba.visit(this)}concat(...t){return new Y(this.data.concat(t.flatMap(i=>i.data).flat(Number.POSITIVE_INFINITY)))}slice(t,i){return new Y(Yu(this,t,i,({data:n,_offsets:s},r,a)=>Qu(n,s,r,a)))}toJSON(){return[...this]}toArray(){const{type:t,data:i,length:n,stride:s,ArrayType:r}=this;switch(t.typeId){case f.Int:case f.Float:case f.Decimal:case f.Time:case f.Timestamp:switch(i.length){case 0:return new r;case 1:return i[0].values.subarray(0,n*s);default:return i.reduce((a,{values:o})=>(a.array.set(o,a.offset),a.offset+=o.length,a),{array:new r(n*s),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var i;return this.getChildAt((i=this.type.children)===null||i===void 0?void 0:i.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new Y(this.data.map(({children:i})=>i[t])):null}get isMemoized(){return M.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(M.isDictionary(this.type)){const t=new _s(this.data[0].dictionary),i=this.data.map(n=>{const s=n.clone();return s.dictionary=t,s});return new Y(i)}return new _s(this)}unmemoize(){if(M.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),i=this.data.map(n=>{const s=n.clone();return s.dictionary=t,s});return new Y(i)}return this}}nl=Symbol.toStringTag;Y[nl]=(e=>{e.type=M.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(f).map(i=>f[i]).filter(i=>typeof i=="number"&&i!==f.NONE);for(const i of t){const n=Nt.getVisitFnByTypeId(i),s=Zt.getVisitFnByTypeId(i),r=gs.getVisitFnByTypeId(i),a=Oe.getVisitFnByTypeId(i);sl[i]={get:n,set:s,indexOf:r,byteLength:a},rl[i]=Object.create(e,{isValid:{value:Wi(Ta)},get:{value:Wi(Nt.getVisitFnByTypeId(i))},set:{value:Zu(Zt.getVisitFnByTypeId(i))},indexOf:{value:Xu(gs.getVisitFnByTypeId(i))},getByteLength:{value:Wi(Oe.getVisitFnByTypeId(i))}})}return"Vector"})(Y.prototype);class _s extends Y{constructor(t){super(t.data);const i=this.get,n=this.set,s=this.slice,r=new Array(this.length);Object.defineProperty(this,"get",{value(a){const o=r[a];if(o!==void 0)return o;const c=i.call(this,a);return r[a]=c,c}}),Object.defineProperty(this,"set",{value(a,o){n.call(this,a,o),r[a]=o}}),Object.defineProperty(this,"slice",{value:(a,o)=>new _s(s.call(this,a,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Y(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function Gp(e){if(!e||e.length<=0)return function(s){return!0};let t="";const i=e.filter(n=>n===n);return i.length>0&&(t=`
    switch (x) {${i.map(n=>`
        case ${Hp(n)}:`).join("")}
            return false;
    }`),e.length!==i.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function Hp(e){return typeof e!="bigint"?ei(e):qc?`${ei(e)}n`:`"${ei(e)}"`}const or=(e,t)=>(e*t+63&-64||64)/t,Kp=(e,t=0)=>e.length>=t?e.subarray(0,t):ds(new e.constructor(t),e,0);class js{constructor(t,i=1){this.buffer=t,this.stride=i,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.trunc(t.length/i))}get byteLength(){return Math.trunc(this.length*this.stride*this.BYTES_PER_ELEMENT)}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,i){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const i=this.stride,n=this.length*i,s=this.buffer.length;n>=s&&this._resize(s===0?or(n*1,this.BYTES_PER_ELEMENT):or(n*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=or(t*this.stride,this.BYTES_PER_ELEMENT);const i=Kp(this.buffer,t);return this.clear(),i}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=ds(new this.ArrayType(t),this.buffer)}}js.prototype.offset=0;class Un extends js{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,i){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=i,this}}class al extends Un{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,i){const{buffer:n}=this.reserve(t-this.length+1),s=t>>3,r=t%8,a=n[s]>>r&1;return i?a===0&&(n[s]|=1<<r,++this.numValid):a===1&&(n[s]&=~(1<<r),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class ol extends Un{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,i){const n=this.length-1,s=this.reserve(t-n+1).buffer;return n<t++&&s.fill(s[n],n,t),s[t]=s[t-1]+i,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Lt=class{constructor({type:t,nullValues:i}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=i,this.stride=ye(t),this._nulls=new al,i&&i.length>0&&(this._isValid=Gp(i))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new Y([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:i,_values:n,_nulls:s,_typeIds:r,children:a}=this;return i&&(t+=i.byteLength),n&&(t+=n.byteLength),s&&(t+=s.byteLength),r&&(t+=r.byteLength),a.reduce((o,c)=>o+c.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((i,n)=>i+n.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,i){return this.setValid(t,this.isValid(i))&&this.setValue(t,i),this}setValue(t,i){this._setValue(this,t,i)}setValid(t,i){return this.length=this._nulls.set(t,+i).length,i}addChild(t,i=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,i,n,s;const{type:r,length:a,nullCount:o,_typeIds:c,_offsets:u,_values:l,_nulls:p}=this;(i=c==null?void 0:c.flush(a))?s=u==null?void 0:u.flush(a):(s=u==null?void 0:u.flush(a))?t=l==null?void 0:l.flush(u.last()):t=l==null?void 0:l.flush(a),o>0&&(n=p==null?void 0:p.flush(a));const d=this.children.map(m=>m.flush());return this.clear(),vt({type:r,length:a,nullCount:o,children:d,child:d[0],data:t,typeIds:i,nullBitmap:n,valueOffsets:s})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,i,n,s;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(i=this._values)===null||i===void 0||i.clear(),(n=this._offsets)===null||n===void 0||n.clear(),(s=this._typeIds)===null||s===void 0||s.clear();for(const r of this.children)r.clear();return this}};Lt.prototype.length=1;Lt.prototype.stride=1;Lt.prototype.children=null;Lt.prototype.finished=!1;Lt.prototype.nullValues=null;Lt.prototype._isValid=()=>!0;class di extends Lt{constructor(t){super(t),this._values=new Un(new this.ArrayType(0),this.stride)}setValue(t,i){const n=this._values;return n.reserve(t-n.length+1),super.setValue(t,i)}}class $s extends Lt{constructor(t){super(t),this._pendingLength=0,this._offsets=new ol}setValue(t,i){const n=this._pending||(this._pending=new Map),s=n.get(t);s&&(this._pendingLength-=s.length),this._pendingLength+=i instanceof Ps?i[ne].length:i.length,n.set(t,i)}setValid(t,i){return super.setValid(t,i)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,i=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,i),this}}class Ar{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,i,n,s){return t.prep(8,24),t.writeInt64(s),t.pad(4),t.writeInt32(n),t.writeInt64(i),t.offset()}}const cr=2,ge=4,De=4,X=4,Ze=new Int32Array(2),No=new Float32Array(Ze.buffer),Fo=new Float64Array(Ze.buffer),Jn=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let Pe=class Cr{constructor(t,i){this.low=t|0,this.high=i|0}static create(t,i){return t==0&&i==0?Cr.ZERO:new Cr(t,i)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};Pe.ZERO=new Pe(0,0);var Er;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Er||(Er={}));let bs=class cl{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new cl(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new Pe(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new Pe(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Ze[0]=this.readInt32(t),No[0]}readFloat64(t){return Ze[Jn?0:1]=this.readInt32(t),Ze[Jn?1:0]=this.readInt32(t+4),Fo[0]}writeInt8(t,i){this.bytes_[t]=i}writeUint8(t,i){this.bytes_[t]=i}writeInt16(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8}writeUint16(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8}writeInt32(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8,this.bytes_[t+2]=i>>16,this.bytes_[t+3]=i>>24}writeUint32(t,i){this.bytes_[t]=i,this.bytes_[t+1]=i>>8,this.bytes_[t+2]=i>>16,this.bytes_[t+3]=i>>24}writeInt64(t,i){this.writeInt32(t,i.low),this.writeInt32(t+4,i.high)}writeUint64(t,i){this.writeUint32(t,i.low),this.writeUint32(t+4,i.high)}writeFloat32(t,i){No[0]=i,this.writeInt32(t,Ze[0])}writeFloat64(t,i){Fo[0]=i,this.writeInt32(t,Ze[Jn?0:1]),this.writeInt32(t+4,Ze[Jn?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ge+De)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let i=0;i<De;i++)t+=String.fromCharCode(this.readInt8(this.position_+ge+i));return t}__offset(t,i){const n=t-this.readInt32(t);return i<this.readInt16(n)?this.readInt16(n+i):0}__union(t,i){return t.bb_pos=i+this.readInt32(i),t.bb=this,t}__string(t,i){t+=this.readInt32(t);const n=this.readInt32(t);let s="",r=0;if(t+=ge,i===Er.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;r<n;){let a;const o=this.readUint8(t+r++);if(o<192)a=o;else{const c=this.readUint8(t+r++);if(o<224)a=(o&31)<<6|c&63;else{const u=this.readUint8(t+r++);if(o<240)a=(o&15)<<12|(c&63)<<6|u&63;else{const l=this.readUint8(t+r++);a=(o&7)<<18|(c&63)<<12|(u&63)<<6|l&63}}}a<65536?s+=String.fromCharCode(a):(a-=65536,s+=String.fromCharCode((a>>10)+55296,(a&(1<<10)-1)+56320))}return s}__union_with_string(t,i){return typeof t=="string"?this.__string(i):this.__union(t,i)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+ge}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=De)throw new Error("FlatBuffers: file identifier must be length "+De);for(let i=0;i<De;i++)if(t.charCodeAt(i)!=this.readInt8(this.position()+ge+i))return!1;return!0}createLong(t,i){return Pe.create(t,i)}createScalarList(t,i){const n=[];for(let s=0;s<i;++s)t(s)!==null&&n.push(t(s));return n}createObjList(t,i){const n=[];for(let s=0;s<i;++s){const r=t(s);r!==null&&n.push(r.unpack())}return n}},ul=class ll{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let i;t?i=t:i=1024,this.bb=bs.allocate(i),this.space=i}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,i){t>this.minalign&&(this.minalign=t);const n=~(this.bb.capacity()-this.space+i)+1&t-1;for(;this.space<n+t+i;){const s=this.bb.capacity();this.bb=ll.growByteBuffer(this.bb),this.space+=this.bb.capacity()-s}this.pad(n)}pad(t){for(let i=0;i<t;i++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,i,n){(this.force_defaults||i!=n)&&(this.addInt8(i),this.slot(t))}addFieldInt16(t,i,n){(this.force_defaults||i!=n)&&(this.addInt16(i),this.slot(t))}addFieldInt32(t,i,n){(this.force_defaults||i!=n)&&(this.addInt32(i),this.slot(t))}addFieldInt64(t,i,n){(this.force_defaults||!i.equals(n))&&(this.addInt64(i),this.slot(t))}addFieldFloat32(t,i,n){(this.force_defaults||i!=n)&&(this.addFloat32(i),this.slot(t))}addFieldFloat64(t,i,n){(this.force_defaults||i!=n)&&(this.addFloat64(i),this.slot(t))}addFieldOffset(t,i,n){(this.force_defaults||i!=n)&&(this.addOffset(i),this.slot(t))}addFieldStruct(t,i,n){i!=n&&(this.nested(i),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const i=t.capacity();if(i&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=i<<1,s=bs.allocate(n);return s.setPosition(n-i),s.bytes().set(t.bytes(),n-i),s}addOffset(t){this.prep(ge,0),this.writeInt32(this.offset()-t+ge)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let i=0;i<t;i++)this.vtable[i]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let i=this.vtable_in_use-1;for(;i>=0&&this.vtable[i]==0;i--);const n=i+1;for(;i>=0;i--)this.addInt16(this.vtable[i]!=0?t-this.vtable[i]:0);const s=2;this.addInt16(t-this.object_start);const r=(n+s)*cr;this.addInt16(r);let a=0;const o=this.space;t:for(i=0;i<this.vtables.length;i++){const c=this.bb.capacity()-this.vtables[i];if(r==this.bb.readInt16(c)){for(let u=cr;u<r;u+=cr)if(this.bb.readInt16(o+u)!=this.bb.readInt16(c+u))continue t;a=this.vtables[i];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,i,n){const s=n?X:0;if(i){const r=i;if(this.prep(this.minalign,ge+De+s),r.length!=De)throw new Error("FlatBuffers: file identifier must be length "+De);for(let a=De-1;a>=0;a--)this.writeInt8(r.charCodeAt(a))}this.prep(this.minalign,ge+s),this.addOffset(t),s&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,i){this.finish(t,i,!0)}requiredField(t,i){const n=this.bb.capacity()-t,s=n-this.bb.readInt32(n);if(!(this.bb.readInt16(s+i)!=0))throw new Error("FlatBuffers: field "+i+" must be set")}startVector(t,i,n){this.notNested(),this.vector_num_elems=i,this.prep(ge,t*i),this.prep(n,t*i)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const i=this.createString(t);return this.string_maps.set(t,i),i}createString(t){if(!t)return 0;let i;if(t instanceof Uint8Array)i=t;else{i=[];let n=0;for(;n<t.length;){let s;const r=t.charCodeAt(n++);if(r<55296||r>=56320)s=r;else{const a=t.charCodeAt(n++);s=(r<<10)+a+(65536-(55296<<10)-56320)}s<128?i.push(s):(s<2048?i.push(s>>6&31|192):(s<65536?i.push(s>>12&15|224):i.push(s>>18&7|240,s>>12&63|128),i.push(s>>6&63|128)),i.push(s&63|128))}}this.addInt8(0),this.startVector(1,i.length,1),this.bb.setPosition(this.space-=i.length);for(let n=0,s=this.space,r=this.bb.bytes();n<i.length;n++)r[s++]=i[n];return this.endVector()}createLong(t,i){return Pe.create(t,i)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const i=[];for(let n=0;n<t.length;++n){const s=t[n];if(s!==null)i.push(this.createObjectOffset(s));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return i}createStructOffsetList(t,i){return i(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class ht{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsKeyValue(t,i){return(i||new ht).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,i){return t.setPosition(t.position()+X),(i||new ht).__init(t.readInt32(t.position())+t.position(),t)}key(t){const i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,t):null}value(t){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,i){t.addFieldOffset(0,i,0)}static addValue(t,i){t.addFieldOffset(1,i,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,i,n){return ht.startKeyValue(t),ht.addKey(t,i),ht.addValue(t,n),ht.endKeyValue(t)}}var Qi;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Qi||(Qi={}));var Zi;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Zi||(Zi={}));var vs;(function(e){e[e.DenseArray=0]="DenseArray"})(vs||(vs={}));class Vt{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsInt(t,i){return(i||new Vt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,i){return t.setPosition(t.position()+X),(i||new Vt).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,i){t.addFieldInt32(0,i,0)}static addIsSigned(t,i){t.addFieldInt8(1,+i,0)}static endInt(t){return t.endObject()}static createInt(t,i,n){return Vt.startInt(t),Vt.addBitWidth(t,i),Vt.addIsSigned(t,n),Vt.endInt(t)}}class Re{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDictionaryEncoding(t,i){return(i||new Re).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,i){return t.setPosition(t.position()+X),(i||new Re).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new Vt).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):vs.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,i){t.addFieldInt64(0,i,t.createLong(0,0))}static addIndexType(t,i){t.addFieldOffset(1,i,0)}static addIsOrdered(t,i){t.addFieldInt8(2,+i,0)}static addDictionaryKind(t,i){t.addFieldInt16(3,i,vs.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class vi{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsBinary(t,i){return(i||new vi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,i){return t.setPosition(t.position()+X),(i||new vi).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return vi.startBinary(t),vi.endBinary(t)}}class wi{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsBool(t,i){return(i||new wi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,i){return t.setPosition(t.position()+X),(i||new wi).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return wi.startBool(t),wi.endBool(t)}}var ws;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(ws||(ws={}));let ss=class Li{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDate(t,i){return(i||new Li).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,i){return t.setPosition(t.position()+X),(i||new Li).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ws.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,i){t.addFieldInt16(0,i,ws.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,i){return Li.startDate(t),Li.addUnit(t,i),Li.endDate(t)}};class Ot{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDecimal(t,i){return(i||new Ot).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,i){return t.setPosition(t.position()+X),(i||new Ot).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,i){t.addFieldInt32(0,i,0)}static addScale(t,i){t.addFieldInt32(1,i,0)}static addBitWidth(t,i){t.addFieldInt32(2,i,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,i,n,s){return Ot.startDecimal(t),Ot.addPrecision(t,i),Ot.addScale(t,n),Ot.addBitWidth(t,s),Ot.endDecimal(t)}}var Xi;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Xi||(Xi={}));class _e{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFixedSizeBinary(t,i){return(i||new _e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,i){return t.setPosition(t.position()+X),(i||new _e).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,i){t.addFieldInt32(0,i,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,i){return _e.startFixedSizeBinary(t),_e.addByteWidth(t,i),_e.endFixedSizeBinary(t)}}class be{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFixedSizeList(t,i){return(i||new be).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,i){return t.setPosition(t.position()+X),(i||new be).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,i){t.addFieldInt32(0,i,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,i){return be.startFixedSizeList(t),be.addListSize(t,i),be.endFixedSizeList(t)}}var xs;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(xs||(xs={}));class ve{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFloatingPoint(t,i){return(i||new ve).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,i){return t.setPosition(t.position()+X),(i||new ve).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):xs.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,i){t.addFieldInt16(0,i,xs.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,i){return ve.startFloatingPoint(t),ve.addPrecision(t,i),ve.endFloatingPoint(t)}}var Ss;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Ss||(Ss={}));class we{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsInterval(t,i){return(i||new we).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,i){return t.setPosition(t.position()+X),(i||new we).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ss.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,i){t.addFieldInt16(0,i,Ss.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,i){return we.startInterval(t),we.addUnit(t,i),we.endInterval(t)}}class xi{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsList(t,i){return(i||new xi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,i){return t.setPosition(t.position()+X),(i||new xi).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return xi.startList(t),xi.endList(t)}}let rs=class Mi{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsMap(t,i){return(i||new Mi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,i){return t.setPosition(t.position()+X),(i||new Mi).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,i){t.addFieldInt8(0,+i,0)}static endMap(t){return t.endObject()}static createMap(t,i){return Mi.startMap(t),Mi.addKeysSorted(t,i),Mi.endMap(t)}};class Si{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsNull(t,i){return(i||new Si).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,i){return t.setPosition(t.position()+X),(i||new Si).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Si.startNull(t),Si.endNull(t)}}class Ii{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsStruct_(t,i){return(i||new Ii).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,i){return t.setPosition(t.position()+X),(i||new Ii).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Ii.startStruct_(t),Ii.endStruct_(t)}}class Ht{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsTime(t,i){return(i||new Ht).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,i){return t.setPosition(t.position()+X),(i||new Ht).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xi.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,i){t.addFieldInt16(0,i,Xi.MILLISECOND)}static addBitWidth(t,i){t.addFieldInt32(1,i,32)}static endTime(t){return t.endObject()}static createTime(t,i,n){return Ht.startTime(t),Ht.addUnit(t,i),Ht.addBitWidth(t,n),Ht.endTime(t)}}class Kt{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsTimestamp(t,i){return(i||new Kt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,i){return t.setPosition(t.position()+X),(i||new Kt).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xi.SECOND}timezone(t){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,i){t.addFieldInt16(0,i,Xi.SECOND)}static addTimezone(t,i){t.addFieldOffset(1,i,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,i,n){return Kt.startTimestamp(t),Kt.addUnit(t,i),Kt.addTimezone(t,n),Kt.endTimestamp(t)}}var Is;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Is||(Is={}));class kt{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsUnion(t,i){return(i||new kt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,i){return t.setPosition(t.position()+X),(i||new kt).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Is.Sparse}typeIds(t){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt32(this.bb.__vector(this.bb_pos+i)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,i){t.addFieldInt16(0,i,Is.Sparse)}static addTypeIds(t,i){t.addFieldOffset(1,i,0)}static createTypeIdsVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addInt32(i[n]);return t.endVector()}static startTypeIdsVector(t,i){t.startVector(4,i,4)}static endUnion(t){return t.endObject()}static createUnion(t,i,n){return kt.startUnion(t),kt.addMode(t,i),kt.addTypeIds(t,n),kt.endUnion(t)}}class Ai{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsUtf8(t,i){return(i||new Ai).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,i){return t.setPosition(t.position()+X),(i||new Ai).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Ai.startUtf8(t),Ai.endUtf8(t)}}var st;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(st||(st={}));let Yt=class as{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsField(t,i){return(i||new as).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,i){return t.setPosition(t.position()+X),(i||new as).__init(t.readInt32(t.position())+t.position(),t)}name(t){const i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):st.NONE}type(t){const i=this.bb.__offset(this.bb_pos,10);return i?this.bb.__union(t,this.bb_pos+i):null}dictionary(t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new Re).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}children(t,i){const n=this.bb.__offset(this.bb_pos,14);return n?(i||new as).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,i){const n=this.bb.__offset(this.bb_pos,16);return n?(i||new ht).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,i){t.addFieldOffset(0,i,0)}static addNullable(t,i){t.addFieldInt8(1,+i,0)}static addTypeType(t,i){t.addFieldInt8(2,i,st.NONE)}static addType(t,i){t.addFieldOffset(3,i,0)}static addDictionary(t,i){t.addFieldOffset(4,i,0)}static addChildren(t,i){t.addFieldOffset(5,i,0)}static createChildrenVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startChildrenVector(t,i){t.startVector(4,i,4)}static addCustomMetadata(t,i){t.addFieldOffset(6,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static endField(t){return t.endObject()}},pe=class Be{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsSchema(t,i){return(i||new Be).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,i){return t.setPosition(t.position()+X),(i||new Be).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Zi.Little}fields(t,i){const n=this.bb.__offset(this.bb_pos,6);return n?(i||new Yt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new ht).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readInt64(this.bb.__vector(this.bb_pos+i)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,i){t.addFieldInt16(0,i,Zi.Little)}static addFields(t,i){t.addFieldOffset(1,i,0)}static createFieldsVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startFieldsVector(t,i){t.startVector(4,i,4)}static addCustomMetadata(t,i){t.addFieldOffset(2,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static addFeatures(t,i){t.addFieldOffset(3,i,0)}static createFeaturesVector(t,i){t.startVector(8,i.length,8);for(let n=i.length-1;n>=0;n--)t.addInt64(i[n]);return t.endVector()}static startFeaturesVector(t,i){t.startVector(8,i,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,i){t.finish(i)}static finishSizePrefixedSchemaBuffer(t,i){t.finish(i,void 0,!0)}static createSchema(t,i,n,s,r){return Be.startSchema(t),Be.addEndianness(t,i),Be.addFields(t,n),Be.addCustomMetadata(t,s),Be.addFeatures(t,r),Be.endSchema(t)}};class Rt{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsFooter(t,i){return(i||new Rt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,i){return t.setPosition(t.position()+X),(i||new Rt).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Qi.V1}schema(t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new pe).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}dictionaries(t,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new Ar).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,i){const n=this.bb.__offset(this.bb_pos,10);return n?(i||new Ar).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,i){const n=this.bb.__offset(this.bb_pos,12);return n?(i||new ht).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,i){t.addFieldInt16(0,i,Qi.V1)}static addSchema(t,i){t.addFieldOffset(1,i,0)}static addDictionaries(t,i){t.addFieldOffset(2,i,0)}static startDictionariesVector(t,i){t.startVector(24,i,8)}static addRecordBatches(t,i){t.addFieldOffset(3,i,0)}static startRecordBatchesVector(t,i){t.startVector(24,i,8)}static addCustomMetadata(t,i){t.addFieldOffset(4,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,i){t.finish(i)}static finishSizePrefixedFooterBuffer(t,i){t.finish(i,void 0,!0)}}class K{constructor(t=[],i,n){this.fields=t||[],this.metadata=i||new Map,n||(n=Or(t)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,i)=>`${i}: ${t}`).join(", ")} }>`}select(t){const i=new Set(t),n=this.fields.filter(s=>i.has(s.name));return new K(n,this.metadata)}selectAt(t){const i=t.map(n=>this.fields[n]).filter(Boolean);return new K(i,this.metadata)}assign(...t){const i=t[0]instanceof K?t[0]:Array.isArray(t[0])?new K(t[0]):new K(t),n=[...this.fields],s=Qn(Qn(new Map,this.metadata),i.metadata),r=i.fields.filter(o=>{const c=n.findIndex(u=>u.name===o.name);return~c?(n[c]=o.clone({metadata:Qn(Qn(new Map,n[c].metadata),o.metadata)}))&&!1:!0}),a=Or(r,new Map);return new K([...n,...r],s,new Map([...this.dictionaries,...a]))}}K.prototype.fields=null;K.prototype.metadata=null;K.prototype.dictionaries=null;class H{constructor(t,i,n=!1,s){this.name=t,this.type=i,this.nullable=n,this.metadata=s||new Map}static new(...t){let[i,n,s,r]=t;return t[0]&&typeof t[0]=="object"&&({name:i}=t[0],n===void 0&&(n=t[0].type),s===void 0&&(s=t[0].nullable),r===void 0&&(r=t[0].metadata)),new H(`${i}`,n,s,r)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[i,n,s,r]=t;return!t[0]||typeof t[0]!="object"?[i=this.name,n=this.type,s=this.nullable,r=this.metadata]=t:{name:i=this.name,type:n=this.type,nullable:s=this.nullable,metadata:r=this.metadata}=t[0],H.new(i,n,s,r)}}H.prototype.type=null;H.prototype.name=null;H.prototype.nullable=null;H.prototype.metadata=null;function Qn(e,t){return new Map([...e||new Map,...t||new Map])}function Or(e,t=new Map){for(let i=-1,n=e.length;++i<n;){const r=e[i].type;if(M.isDictionary(r)){if(!t.has(r.id))t.set(r.id,r.dictionary);else if(t.get(r.id)!==r.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}r.children&&r.children.length>0&&Or(r.children,t)}return t}var Lo=Pe,Jp=ul,Qp=bs;class kr{constructor(t,i=Ut.V4,n,s){this.schema=t,this.version=i,n&&(this._recordBatches=n),s&&(this._dictionaryBatches=s)}static decode(t){t=new Qp(J(t));const i=Rt.getRootAsFooter(t),n=K.decode(i.schema());return new Zp(n,i)}static encode(t){const i=new Jp,n=K.encode(i,t.schema);Rt.startRecordBatchesVector(i,t.numRecordBatches);for(const a of[...t.recordBatches()].slice().reverse())ri.encode(i,a);const s=i.endVector();Rt.startDictionariesVector(i,t.numDictionaries);for(const a of[...t.dictionaryBatches()].slice().reverse())ri.encode(i,a);const r=i.endVector();return Rt.startFooter(i),Rt.addSchema(i,n),Rt.addVersion(i,Ut.V4),Rt.addRecordBatches(i,s),Rt.addDictionaries(i,r),Rt.finishFooterBuffer(i,Rt.endFooter(i)),i.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,i=-1,n=this.numRecordBatches;++i<n;)(t=this.getRecordBatch(i))&&(yield t)}*dictionaryBatches(){for(let t,i=-1,n=this.numDictionaries;++i<n;)(t=this.getDictionaryBatch(i))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Zp extends kr{constructor(t,i){super(t,i.version()),this._footer=i}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const i=this._footer.recordBatches(t);if(i)return ri.decode(i)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const i=this._footer.dictionaries(t);if(i)return ri.decode(i)}return null}}class ri{constructor(t,i,n){this.metaDataLength=t,this.offset=typeof n=="number"?n:n.low,this.bodyLength=typeof i=="number"?i:i.low}static decode(t){return new ri(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,i){const{metaDataLength:n}=i,s=new Lo(i.offset,0),r=new Lo(i.bodyLength,0);return Ar.createBlock(t,s,n,r)}}const Zn=Object.freeze({done:!0,value:void 0});class hl{tee(){return this._getDOMStream().tee()}pipe(t,i){return this._getNodeStream().pipe(t,i)}pipeTo(t,i){return this._getDOMStream().pipeTo(t,i)}pipeThrough(t,i){return this._getDOMStream().pipeThrough(t,i)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Xp extends hl{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Me(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Zn);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Co.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Co.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Me(this,void 0,void 0,function*(){return yield this.abort(t),Zn})}return(t){return Me(this,void 0,void 0,function*(){return yield this.close(),Zn})}read(t){return Me(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Me(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((i,n)=>{this.resolvers.push({resolve:i,reject:n})}):Promise.resolve(Zn)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class ur extends Xp{write(t){if((t=J(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?wr(this.toUint8Array(!0)):this.toUint8Array(!1).then(wr)}toUint8Array(t=!1){return t?Ae(this._values)[0]:(()=>Me(this,void 0,void 0,function*(){var i,n;const s=[];let r=0;try{for(var a=xn(this),o;o=yield a.next(),!o.done;){const c=o.value;s.push(c),r+=c.byteLength}}catch(c){i={error:c}}finally{try{o&&!o.done&&(n=a.return)&&(yield n.call(a))}finally{if(i)throw i.error}}return Ae(s,r)[0]}))()}}class fl extends $s{constructor(t){super(t),this._values=new js(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,i){return super.setValue(t,J(i))}_flushPending(t,i){const n=this._offsets,s=this._values.reserve(i).buffer;let r=0;for(const[a,o]of t)if(o===void 0)n.set(a,0);else{const c=o.length;s.set(o,r),n.set(a,c),r+=c}}}class tm extends Lt{constructor(t){super(t),this._values=new al}setValue(t,i){this._values.set(t,+i)}}class zs extends di{}zs.prototype._setValue=xu;class dl extends zs{}dl.prototype._setValue=da;class pl extends zs{}pl.prototype._setValue=pa;class ml extends di{}ml.prototype._setValue=Au;class em extends Lt{constructor({type:t,nullValues:i,dictionaryHashFunction:n}){super({type:new si(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=As({type:this.type.indices,nullValues:i}),this.dictionary=As({type:this.type.dictionary,nullValues:null}),typeof n=="function"&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,i){const n=this.indices;return i=n.setValid(t,i),this.length=n.length,i}setValue(t,i){const n=this._keysToIndices,s=this.valueToKey(i);let r=n[s];return r===void 0&&(n[s]=r=this._dictionaryOffset+this.dictionary.append(i).length-1),this.indices.setValue(t,r)}flush(){const t=this.type,i=this._dictionary,n=this.dictionary.toVector(),s=this.indices.flush().clone(t);return s.dictionary=i?i.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=s.dictionary,this.clear(),s}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class yl extends di{}yl.prototype._setValue=wu;class im extends Lt{setValue(t,i){const[n]=this.children,s=t*this.stride;for(let r=-1,a=i.length;++r<a;)n.set(s+r,i[r])}addChild(t,i="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const n=this.children.push(t);return this.type=new Ji(this.type.listSize,new H(i,t.type,!0)),n}}class Ws extends di{setValue(t,i){this._values.set(t,i)}}class nm extends Ws{setValue(t,i){super.setValue(t,_u(i))}}class sm extends Ws{}class rm extends Ws{}class qs extends di{}qs.prototype._setValue=Ou;class gl extends qs{}gl.prototype._setValue=Sa;class _l extends qs{}_l.prototype._setValue=Ia;class Ge extends di{setValue(t,i){this._values.set(t,i)}}class am extends Ge{}class om extends Ge{}class cm extends Ge{}class um extends Ge{}class lm extends Ge{}class hm extends Ge{}class fm extends Ge{}class dm extends Ge{}class pm extends $s{constructor(t){super(t),this._offsets=new ol}addChild(t,i="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Ki(new H(i,t.type,!0)),this.numChildren-1}_flushPending(t){const i=this._offsets,[n]=this.children;for(const[s,r]of t)if(r===void 0)i.set(s,0);else{const a=r.length,o=i.set(s,a).buffer[s];for(let c=-1;++c<a;)n.set(o+c,r[c])}}}class mm extends $s{set(t,i){return super.set(t,i)}setValue(t,i){const n=i instanceof Map?i:new Map(Object.entries(i)),s=this._pending||(this._pending=new Map),r=s.get(t);r&&(this._pendingLength-=r.size),this._pendingLength+=n.size,s.set(t,n)}addChild(t,i=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Tn(new H(i,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const i=this._offsets,[n]=this.children;for(const[s,r]of t)if(r===void 0)i.set(s,0);else{let{[s]:a,[s+1]:o}=i.set(s,r.size).buffer;for(const c of r.entries())if(n.set(a,c),++a>=o)break}}}class ym extends Lt{setValue(t,i){}setValid(t,i){return this.length=Math.max(t+1,this.length),i}}class gm extends Lt{setValue(t,i){const{children:n,type:s}=this;switch(Array.isArray(i)||i.constructor){case!0:return s.children.forEach((r,a)=>n[a].set(t,i[a]));case Map:return s.children.forEach((r,a)=>n[a].set(t,i.get(r.name)));default:return s.children.forEach((r,a)=>n[a].set(t,i[r.name]))}}setValid(t,i){return super.setValid(t,i)||this.children.forEach(n=>n.setValid(t,i)),i}addChild(t,i=`${this.numChildren}`){const n=this.children.push(t);return this.type=new wt([...this.type.children,new H(i,t.type,!0)]),n}}class cn extends di{}cn.prototype._setValue=Su;class bl extends cn{}bl.prototype._setValue=ma;class vl extends cn{}vl.prototype._setValue=ya;class wl extends cn{}wl.prototype._setValue=ga;class xl extends cn{}xl.prototype._setValue=_a;class un extends di{}un.prototype._setValue=Iu;class Sl extends un{}Sl.prototype._setValue=ba;class Il extends un{}Il.prototype._setValue=va;class Al extends un{}Al.prototype._setValue=wa;class Cl extends un{}Cl.prototype._setValue=xa;class Na extends Lt{constructor(t){super(t),this._typeIds=new Un(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,i){return this.set(this.length,t,i)}set(t,i,n){return n===void 0&&(n=this._valueToChildTypeId(this,i,t)),this.setValid(t,this.isValid(i))&&this.setValue(t,i,n),this}setValue(t,i,n){this._typeIds.set(t,n);const s=this.type.typeIdToChildIndex[n],r=this.children[s];r==null||r.set(t,i)}addChild(t,i=`${this.children.length}`){const n=this.children.push(t),{type:{children:s,mode:r,typeIds:a}}=this,o=[...s,new H(i,t.type)];return this.type=new kn(r,[...a,n],o),n}_valueToChildTypeId(t,i,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class _m extends Na{}class bm extends Na{constructor(t){super(t),this._offsets=new Un(new Int32Array(0))}setValue(t,i,n){const s=this._typeIds.set(t,n).buffer[t],r=this.getChildAt(this.type.typeIdToChildIndex[s]),a=this._offsets.set(t,r.length).buffer[t];r==null||r.set(a,i)}}class El extends $s{constructor(t){super(t),this._values=new js(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,i){return super.setValue(t,Jr(i))}_flushPending(t,i){}}El.prototype._flushPending=fl.prototype._flushPending;class vm extends U{visitNull(){return ym}visitBool(){return tm}visitInt(){return Ge}visitInt8(){return am}visitInt16(){return om}visitInt32(){return cm}visitInt64(){return um}visitUint8(){return lm}visitUint16(){return hm}visitUint32(){return fm}visitUint64(){return dm}visitFloat(){return Ws}visitFloat16(){return nm}visitFloat32(){return sm}visitFloat64(){return rm}visitUtf8(){return El}visitBinary(){return fl}visitFixedSizeBinary(){return yl}visitDate(){return zs}visitDateDay(){return dl}visitDateMillisecond(){return pl}visitTimestamp(){return cn}visitTimestampSecond(){return bl}visitTimestampMillisecond(){return vl}visitTimestampMicrosecond(){return wl}visitTimestampNanosecond(){return xl}visitTime(){return un}visitTimeSecond(){return Sl}visitTimeMillisecond(){return Il}visitTimeMicrosecond(){return Al}visitTimeNanosecond(){return Cl}visitDecimal(){return ml}visitList(){return pm}visitStruct(){return gm}visitUnion(){return Na}visitDenseUnion(){return bm}visitSparseUnion(){return _m}visitDictionary(){return em}visitInterval(){return qs}visitIntervalDayTime(){return gl}visitIntervalYearMonth(){return _l}visitFixedSizeList(){return im}visitMap(){return mm}}const wm=new vm;class C extends U{compareSchemas(t,i){return t===i||i instanceof t.constructor&&this.compareManyFields(t.fields,i.fields)}compareManyFields(t,i){return t===i||Array.isArray(t)&&Array.isArray(i)&&t.length===i.length&&t.every((n,s)=>this.compareFields(n,i[s]))}compareFields(t,i){return t===i||i instanceof t.constructor&&t.name===i.name&&t.nullable===i.nullable&&this.visit(t.type,i.type)}}function Mt(e,t){return t instanceof e.constructor}function jn(e,t){return e===t||Mt(e,t)}function He(e,t){return e===t||Mt(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Ys(e,t){return e===t||Mt(e,t)&&e.precision===t.precision}function xm(e,t){return e===t||Mt(e,t)&&e.byteWidth===t.byteWidth}function Fa(e,t){return e===t||Mt(e,t)&&e.unit===t.unit}function $n(e,t){return e===t||Mt(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function zn(e,t){return e===t||Mt(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Sm(e,t){return e===t||Mt(e,t)&&e.children.length===t.children.length&&ai.compareManyFields(e.children,t.children)}function Im(e,t){return e===t||Mt(e,t)&&e.children.length===t.children.length&&ai.compareManyFields(e.children,t.children)}function La(e,t){return e===t||Mt(e,t)&&e.mode===t.mode&&e.typeIds.every((i,n)=>i===t.typeIds[n])&&ai.compareManyFields(e.children,t.children)}function Am(e,t){return e===t||Mt(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&ai.visit(e.indices,t.indices)&&ai.visit(e.dictionary,t.dictionary)}function Ma(e,t){return e===t||Mt(e,t)&&e.unit===t.unit}function Cm(e,t){return e===t||Mt(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&ai.compareManyFields(e.children,t.children)}function Em(e,t){return e===t||Mt(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&ai.compareManyFields(e.children,t.children)}C.prototype.visitNull=jn;C.prototype.visitBool=jn;C.prototype.visitInt=He;C.prototype.visitInt8=He;C.prototype.visitInt16=He;C.prototype.visitInt32=He;C.prototype.visitInt64=He;C.prototype.visitUint8=He;C.prototype.visitUint16=He;C.prototype.visitUint32=He;C.prototype.visitUint64=He;C.prototype.visitFloat=Ys;C.prototype.visitFloat16=Ys;C.prototype.visitFloat32=Ys;C.prototype.visitFloat64=Ys;C.prototype.visitUtf8=jn;C.prototype.visitBinary=jn;C.prototype.visitFixedSizeBinary=xm;C.prototype.visitDate=Fa;C.prototype.visitDateDay=Fa;C.prototype.visitDateMillisecond=Fa;C.prototype.visitTimestamp=$n;C.prototype.visitTimestampSecond=$n;C.prototype.visitTimestampMillisecond=$n;C.prototype.visitTimestampMicrosecond=$n;C.prototype.visitTimestampNanosecond=$n;C.prototype.visitTime=zn;C.prototype.visitTimeSecond=zn;C.prototype.visitTimeMillisecond=zn;C.prototype.visitTimeMicrosecond=zn;C.prototype.visitTimeNanosecond=zn;C.prototype.visitDecimal=jn;C.prototype.visitList=Sm;C.prototype.visitStruct=Im;C.prototype.visitUnion=La;C.prototype.visitDenseUnion=La;C.prototype.visitSparseUnion=La;C.prototype.visitDictionary=Am;C.prototype.visitInterval=Ma;C.prototype.visitIntervalDayTime=Ma;C.prototype.visitIntervalYearMonth=Ma;C.prototype.visitFixedSizeList=Cm;C.prototype.visitMap=Em;const ai=new C;function Tr(e,t){return ai.compareSchemas(e,t)}function As(e){const t=e.type,i=new(wm.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const n=e.children||[],s={nullValues:e.nullValues},r=Array.isArray(n)?(a,o)=>n[o]||s:({name:a})=>n[a]||s;for(const[a,o]of t.children.entries()){const{type:c}=o,u=r(o,a);i.children.push(As(Object.assign(Object.assign({},u),{type:c})))}}return i}function lr(e,t){return Om(e,t.map(i=>i.data.concat()))}function Om(e,t){const i=[...e.fields],n=[],s={numBatches:t.reduce((p,d)=>Math.max(p,d.length),0)};let r=0,a=0,o=-1;const c=t.length;let u,l=[];for(;s.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<c;)l[o]=u=t[o].shift(),a=Math.min(a,u?u.length:a);Number.isFinite(a)&&(l=km(i,a,l,t,s),a>0&&(n[r++]=vt({type:new wt(i),length:a,nullCount:0,children:l.slice()})))}return[e=e.assign(i),n.map(p=>new Pt(e,p))]}function km(e,t,i,n,s){var r;const a=(t+63&-64)>>3;for(let o=-1,c=n.length;++o<c;){const u=i[o],l=u==null?void 0:u.length;if(l>=t)l===t?i[o]=u:(i[o]=u.slice(0,t),s.numBatches=Math.max(s.numBatches,n[o].unshift(u.slice(t,l-t))));else{const p=e[o];e[o]=p.clone({nullable:!0}),i[o]=(r=u==null?void 0:u._changeLengthAndBackfillNullBitmap(t))!==null&&r!==void 0?r:vt({type:p.type,length:t,nullCount:t,nullBitmap:new Uint8Array(a)})}}return i}var Ol;class Tt{constructor(...t){var i,n;if(t.length===0)return this.batches=[],this.schema=new K([]),this._offsets=[0],this;let s,r;t[0]instanceof K&&(s=t.shift()),t[t.length-1]instanceof Uint32Array&&(r=t.pop());const a=c=>{if(c){if(c instanceof Pt)return[c];if(c instanceof Tt)return c.batches;if(c instanceof Z){if(c.type instanceof wt)return[new Pt(new K(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(u=>a(u));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(u=>a(u));if(typeof c=="object"){const u=Object.keys(c),l=u.map(m=>new Y([c[m]])),p=new K(u.map((m,y)=>new H(String(m),l[y].type))),[,d]=lr(p,l);return d.length===0?[new Pt(c)]:d}}}return[]},o=t.flatMap(c=>a(c));if(s=(n=s??((i=o[0])===null||i===void 0?void 0:i.schema))!==null&&n!==void 0?n:new K([]),!(s instanceof K))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of o){if(!(c instanceof Pt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Tr(s,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=s,this.batches=o,this._offsets=r??Ju(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,i)=>t+i.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=Ku(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,i){}indexOf(t,i){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Ba.visit(new Y(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const i=this.schema,n=this.data.concat(t.flatMap(({data:s})=>s));return new Tt(i,n.map(s=>new Pt(i,s)))}slice(t,i){const n=this.schema;[t,i]=Yu({length:this.numRows},t,i);const s=Qu(this.data,this._offsets,t,i);return new Tt(n,s.map(r=>new Pt(n,r)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(i=>i.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const i=this.data.map(n=>n.children[t]);if(i.length===0){const{type:n}=this.schema.fields[t],s=vt({type:n,length:0,nullCount:0});i.push(s._changeLengthAndBackfillNullBitmap(this.numRows))}return new Y(i)}return null}setChild(t,i){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(s=>s.name===t),i)}setChildAt(t,i){let n=this.schema,s=[...this.batches];if(t>-1&&t<this.numCols){i||(i=new Y([vt({type:new $e,length:this.numRows})]));const r=n.fields.slice(),a=r[t].clone({type:i.type}),o=this.schema.fields.map((c,u)=>this.getChildAt(u));[r[t],o[t]]=[a,i],[n,s]=lr(n,o)}return new Tt(n,s)}select(t){const i=this.schema.fields.reduce((n,s,r)=>n.set(s.name,r),new Map);return this.selectAt(t.map(n=>i.get(n)).filter(n=>n>-1))}selectAt(t){const i=this.schema.selectAt(t),n=this.batches.map(s=>s.selectAt(t));return new Tt(i,n)}assign(t){const i=this.schema.fields,[n,s]=t.schema.fields.reduce((o,c,u)=>{const[l,p]=o,d=i.findIndex(m=>m.name===c.name);return~d?p[d]=u:l.push(u),o},[[],[]]),r=this.schema.assign(t.schema),a=[...i.map((o,c)=>[c,s[c]]).map(([o,c])=>c===void 0?this.getChildAt(o):t.getChildAt(c)),...n.map(o=>t.getChildAt(o))].filter(Boolean);return new Tt(...lr(r,a))}}Ol=Symbol.toStringTag;Tt[Ol]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Wi(Ta),e.get=Wi(Nt.getVisitFn(f.Struct)),e.set=Zu(Zt.getVisitFn(f.Struct)),e.indexOf=Xu(gs.getVisitFn(f.Struct)),e.getByteLength=Wi(Oe.getVisitFn(f.Struct)),"Table"))(Tt.prototype);var kl;let Pt=class vn{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof K))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=vt({nullCount:0,type:new wt(this.schema.fields),children:this.schema.fields.map(i=>vt({type:i.type,nullCount:0}))})]=t,!(this.data instanceof Z))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Mo(this.schema,this.data.children);break}case 1:{const[i]=t,{fields:n,children:s,length:r}=Object.keys(i).reduce((c,u,l)=>(c.children[l]=i[u],c.length=Math.max(c.length,i[u].length),c.fields[l]=H.new({name:u,type:i[u].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),a=new K(n),o=vt({type:new wt(n),length:r,children:s,nullCount:0});[this.schema,this.data]=Mo(a,o.children,r);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Tl(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Nt.visit(this.data,t)}set(t,i){return Zt.visit(this.data,t,i)}indexOf(t,i){return gs.visit(this.data,t,i)}getByteLength(t){return Oe.visit(this.data,t)}[Symbol.iterator](){return Ba.visit(new Y([this.data]))}toArray(){return[...this]}concat(...t){return new Tt(this.schema,[this,...t])}slice(t,i){const[n]=new Y([this.data]).slice(t,i).data;return new vn(this.schema,n)}getChild(t){var i;return this.getChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Y([this.data.children[t]]):null}setChild(t,i){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(s=>s.name===t),i)}setChildAt(t,i){let n=this.schema,s=this.data;if(t>-1&&t<this.numCols){i||(i=new Y([vt({type:new $e,length:this.numRows})]));const r=n.fields.slice(),a=s.children.slice(),o=r[t].clone({type:i.type});[r[t],a[t]]=[o,i.data[0]],n=new K(r,new Map(this.schema.metadata)),s=vt({type:new wt(r),children:a})}return new vn(n,s)}select(t){const i=this.schema.select(t),n=new wt(i.fields),s=[];for(const r of t){const a=this.schema.fields.findIndex(o=>o.name===r);~a&&(s[a]=this.data.children[a])}return new vn(i,vt({type:n,length:this.numRows,children:s}))}selectAt(t){const i=this.schema.selectAt(t),n=t.map(r=>this.data.children[r]).filter(Boolean),s=vt({type:new wt(i.fields),length:this.numRows,children:n});return new vn(i,s)}};kl=Symbol.toStringTag;Pt[kl]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Pt.prototype);function Mo(e,t,i=t.reduce((n,s)=>Math.max(n,s.length),0)){var n;const s=[...e.fields],r=[...t],a=(i+63&-64)>>3;for(const[o,c]of e.fields.entries()){const u=t[o];(!u||u.length!==i)&&(s[o]=c.clone({nullable:!0}),r[o]=(n=u==null?void 0:u._changeLengthAndBackfillNullBitmap(i))!==null&&n!==void 0?n:vt({type:c.type,length:i,nullCount:i,nullBitmap:new Uint8Array(a)}))}return[e.assign(s),vt({type:new wt(s),length:i,children:r})]}function Tl(e,t,i=new Map){for(let n=-1,s=e.length;++n<s;){const a=e[n].type,o=t[n];if(M.isDictionary(a)){if(!i.has(a.id))o.dictionary&&i.set(a.id,o.dictionary);else if(i.get(a.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&Tl(a.children,o.children,i)}return i}class Tm extends Pt{constructor(t){const i=t.fields.map(s=>vt({type:s.type})),n=vt({type:new wt(t.fields),nullCount:0,children:i});super(t,n)}}var Cs;(function(e){e[e.BUFFER=0]="BUFFER"})(Cs||(Cs={}));var Es;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Es||(Es={}));class Xe{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsBodyCompression(t,i){return(i||new Xe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,i){return t.setPosition(t.position()+X),(i||new Xe).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Es.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Cs.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,i){t.addFieldInt8(0,i,Es.LZ4_FRAME)}static addMethod(t,i){t.addFieldInt8(1,i,Cs.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,i,n){return Xe.startBodyCompression(t),Xe.addCodec(t,i),Xe.addMethod(t,n),Xe.endBodyCompression(t)}}class Bl{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,i,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(i),t.offset()}}let Nl=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,i,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(i),t.offset()}},Fe=class Br{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsRecordBatch(t,i){return(i||new Br).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,i){return t.setPosition(t.position()+X),(i||new Br).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,i){const n=this.bb.__offset(this.bb_pos,6);return n?(i||new Nl).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new Bl).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const i=this.bb.__offset(this.bb_pos,10);return i?(t||new Xe).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,i){t.addFieldInt64(0,i,t.createLong(0,0))}static addNodes(t,i){t.addFieldOffset(1,i,0)}static startNodesVector(t,i){t.startVector(16,i,8)}static addBuffers(t,i){t.addFieldOffset(2,i,0)}static startBuffersVector(t,i){t.startVector(16,i,8)}static addCompression(t,i){t.addFieldOffset(3,i,0)}static endRecordBatch(t){return t.endObject()}},Di=class Nr{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsDictionaryBatch(t,i){return(i||new Nr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,i){return t.setPosition(t.position()+X),(i||new Nr).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new Fe).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,i){t.addFieldInt64(0,i,t.createLong(0,0))}static addData(t,i){t.addFieldOffset(1,i,0)}static addIsDelta(t,i){t.addFieldInt8(2,+i,0)}static endDictionaryBatch(t){return t.endObject()}};var Os;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Os||(Os={}));let Je=class fe{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}static getRootAsMessage(t,i){return(i||new fe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,i){return t.setPosition(t.position()+X),(i||new fe).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Qi.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Os.NONE}header(t){const i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__union(t,this.bb_pos+i):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,i){const n=this.bb.__offset(this.bb_pos,12);return n?(i||new ht).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,i){t.addFieldInt16(0,i,Qi.V1)}static addHeaderType(t,i){t.addFieldInt8(1,i,Os.NONE)}static addHeader(t,i){t.addFieldOffset(2,i,0)}static addBodyLength(t,i){t.addFieldInt64(3,i,t.createLong(0,0))}static addCustomMetadata(t,i){t.addFieldOffset(4,i,0)}static createCustomMetadataVector(t,i){t.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)t.addOffset(i[n]);return t.endVector()}static startCustomMetadataVector(t,i){t.startVector(4,i,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,i){t.finish(i)}static finishSizePrefixedMessageBuffer(t,i){t.finish(i,void 0,!0)}static createMessage(t,i,n,s,r,a){return fe.startMessage(t),fe.addVersion(t,i),fe.addHeaderType(t,n),fe.addHeader(t,s),fe.addBodyLength(t,r),fe.addCustomMetadata(t,a),fe.endMessage(t)}};var Bm=Pe;class Nm extends U{visit(t,i){return t==null||i==null?void 0:super.visit(t,i)}visitNull(t,i){return Si.startNull(i),Si.endNull(i)}visitInt(t,i){return Vt.startInt(i),Vt.addBitWidth(i,t.bitWidth),Vt.addIsSigned(i,t.isSigned),Vt.endInt(i)}visitFloat(t,i){return ve.startFloatingPoint(i),ve.addPrecision(i,t.precision),ve.endFloatingPoint(i)}visitBinary(t,i){return vi.startBinary(i),vi.endBinary(i)}visitBool(t,i){return wi.startBool(i),wi.endBool(i)}visitUtf8(t,i){return Ai.startUtf8(i),Ai.endUtf8(i)}visitDecimal(t,i){return Ot.startDecimal(i),Ot.addScale(i,t.scale),Ot.addPrecision(i,t.precision),Ot.addBitWidth(i,t.bitWidth),Ot.endDecimal(i)}visitDate(t,i){return ss.startDate(i),ss.addUnit(i,t.unit),ss.endDate(i)}visitTime(t,i){return Ht.startTime(i),Ht.addUnit(i,t.unit),Ht.addBitWidth(i,t.bitWidth),Ht.endTime(i)}visitTimestamp(t,i){const n=t.timezone&&i.createString(t.timezone)||void 0;return Kt.startTimestamp(i),Kt.addUnit(i,t.unit),n!==void 0&&Kt.addTimezone(i,n),Kt.endTimestamp(i)}visitInterval(t,i){return we.startInterval(i),we.addUnit(i,t.unit),we.endInterval(i)}visitList(t,i){return xi.startList(i),xi.endList(i)}visitStruct(t,i){return Ii.startStruct_(i),Ii.endStruct_(i)}visitUnion(t,i){kt.startTypeIdsVector(i,t.typeIds.length);const n=kt.createTypeIdsVector(i,t.typeIds);return kt.startUnion(i),kt.addMode(i,t.mode),kt.addTypeIds(i,n),kt.endUnion(i)}visitDictionary(t,i){const n=this.visit(t.indices,i);return Re.startDictionaryEncoding(i),Re.addId(i,new Bm(t.id,0)),Re.addIsOrdered(i,t.isOrdered),n!==void 0&&Re.addIndexType(i,n),Re.endDictionaryEncoding(i)}visitFixedSizeBinary(t,i){return _e.startFixedSizeBinary(i),_e.addByteWidth(i,t.byteWidth),_e.endFixedSizeBinary(i)}visitFixedSizeList(t,i){return be.startFixedSizeList(i),be.addListSize(i,t.listSize),be.endFixedSizeList(i)}visitMap(t,i){return rs.startMap(i),rs.addKeysSorted(i,t.keysSorted),rs.endMap(i)}}const hr=new Nm;function Fm(e,t=new Map){return new K(Mm(e,t),os(e.customMetadata),t)}function Fl(e){return new jt(e.count,Ll(e.columns),Ml(e.columns))}function Lm(e){return new ke(Fl(e.data),e.id,e.isDelta)}function Mm(e,t){return(e.fields||[]).filter(Boolean).map(i=>H.fromJSON(i,t))}function Do(e,t){return(e.children||[]).filter(Boolean).map(i=>H.fromJSON(i,t))}function Ll(e){return(e||[]).reduce((t,i)=>[...t,new Ti(i.count,Dm(i.VALIDITY)),...Ll(i.children)],[])}function Ml(e,t=[]){for(let i=-1,n=(e||[]).length;++i<n;){const s=e[i];s.VALIDITY&&t.push(new Se(t.length,s.VALIDITY.length)),s.TYPE&&t.push(new Se(t.length,s.TYPE.length)),s.OFFSET&&t.push(new Se(t.length,s.OFFSET.length)),s.DATA&&t.push(new Se(t.length,s.DATA.length)),t=Ml(s.children,t)}return t}function Dm(e){return(e||[]).reduce((t,i)=>t+ +(i===0),0)}function Rm(e,t){let i,n,s,r,a,o;return!t||!(r=e.dictionary)?(a=Vo(e,Do(e,t)),s=new H(e.name,a,e.nullable,os(e.customMetadata))):t.has(i=r.id)?(n=(n=r.indexType)?Ro(n):new ii,o=new si(t.get(i),n,i,r.isOrdered),s=new H(e.name,o,e.nullable,os(e.customMetadata))):(n=(n=r.indexType)?Ro(n):new ii,t.set(i,a=Vo(e,Do(e,t))),o=new si(a,n,i,r.isOrdered),s=new H(e.name,o,e.nullable,os(e.customMetadata))),s||null}function os(e){return new Map(Object.entries(e||{}))}function Ro(e){return new It(e.isSigned,e.bitWidth)}function Vo(e,t){const i=e.type.name;switch(i){case"NONE":return new $e;case"null":return new $e;case"binary":return new En;case"utf8":return new Yi;case"bool":return new On;case"list":return new Ki((t||[])[0]);case"struct":return new wt(t||[]);case"struct_":return new wt(t||[])}switch(i){case"int":{const n=e.type;return new It(n.isSigned,n.bitWidth)}case"floatingpoint":{const n=e.type;return new ni(_t[n.precision])}case"decimal":{const n=e.type;return new ps(n.scale,n.precision,n.bitWidth)}case"date":{const n=e.type;return new Gi(Ce[n.unit])}case"time":{const n=e.type;return new ze(P[n.unit],n.bitWidth)}case"timestamp":{const n=e.type;return new ms(P[n.unit],n.timezone)}case"interval":{const n=e.type;return new Hi(Ee[n.unit])}case"union":{const n=e.type;return new kn(Qt[n.mode],n.typeIds||[],t||[])}case"fixedsizebinary":{const n=e.type;return new ys(n.byteWidth)}case"fixedsizelist":{const n=e.type;return new Ji(n.listSize,(t||[])[0])}case"map":{const n=e.type;return new Tn((t||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${i}"`)}var Oi=Pe,Vm=ul,Pm=bs;class xe{constructor(t,i,n,s){this._version=i,this._headerType=n,this.body=new Uint8Array(0),s&&(this._createHeader=()=>s),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,i){const n=new xe(0,Ut.V4,i);return n._createHeader=Um(t,i),n}static decode(t){t=new Pm(J(t));const i=Je.getRootAsMessage(t),n=i.bodyLength(),s=i.version(),r=i.headerType(),a=new xe(n,s,r);return a._createHeader=jm(i,r),a}static encode(t){const i=new Vm;let n=-1;return t.isSchema()?n=K.encode(i,t.header()):t.isRecordBatch()?n=jt.encode(i,t.header()):t.isDictionaryBatch()&&(n=ke.encode(i,t.header())),Je.startMessage(i),Je.addVersion(i,Ut.V4),Je.addHeader(i,n),Je.addHeaderType(i,t.headerType),Je.addBodyLength(i,new Oi(t.bodyLength,0)),Je.finishMessageBuffer(i,Je.endMessage(i)),i.asUint8Array()}static from(t,i=0){if(t instanceof K)return new xe(0,Ut.V4,pt.Schema,t);if(t instanceof jt)return new xe(i,Ut.V4,pt.RecordBatch,t);if(t instanceof ke)return new xe(i,Ut.V4,pt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===pt.Schema}isRecordBatch(){return this.headerType===pt.RecordBatch}isDictionaryBatch(){return this.headerType===pt.DictionaryBatch}}class jt{constructor(t,i,n){this._nodes=i,this._buffers=n,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class ke{constructor(t,i,n=!1){this._data=t,this._isDelta=n,this._id=typeof i=="number"?i:i.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class Se{constructor(t,i){this.offset=typeof t=="number"?t:t.low,this.length=typeof i=="number"?i:i.low}}class Ti{constructor(t,i){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof i=="number"?i:i.low}}function Um(e,t){return()=>{switch(t){case pt.Schema:return K.fromJSON(e);case pt.RecordBatch:return jt.fromJSON(e);case pt.DictionaryBatch:return ke.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${pt[t]}, type: ${t} }`)}}function jm(e,t){return()=>{switch(t){case pt.Schema:return K.decode(e.header(new pe));case pt.RecordBatch:return jt.decode(e.header(new Fe),e.version());case pt.DictionaryBatch:return ke.decode(e.header(new Di),e.version())}throw new Error(`Unrecognized Message type: { name: ${pt[t]}, type: ${t} }`)}}H.encode=Zm;H.decode=Jm;H.fromJSON=Rm;K.encode=Qm;K.decode=$m;K.fromJSON=Fm;jt.encode=Xm;jt.decode=zm;jt.fromJSON=Fl;ke.encode=ty;ke.decode=Wm;ke.fromJSON=Lm;Ti.encode=ey;Ti.decode=Ym;Se.encode=iy;Se.decode=qm;function $m(e,t=new Map){const i=Km(e,t);return new K(i,cs(e),t)}function zm(e,t=Ut.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new jt(e.length(),Gm(e),Hm(e,t))}function Wm(e,t=Ut.V4){return new ke(jt.decode(e.data(),t),e.id(),e.isDelta())}function qm(e){return new Se(e.offset(),e.length())}function Ym(e){return new Ti(e.length(),e.nullCount())}function Gm(e){const t=[];for(let i,n=-1,s=-1,r=e.nodesLength();++n<r;)(i=e.nodes(n))&&(t[++s]=Ti.decode(i));return t}function Hm(e,t){const i=[];for(let n,s=-1,r=-1,a=e.buffersLength();++s<a;)(n=e.buffers(s))&&(t<Ut.V4&&(n.bb_pos+=8*(s+1)),i[++r]=Se.decode(n));return i}function Km(e,t){const i=[];for(let n,s=-1,r=-1,a=e.fieldsLength();++s<a;)(n=e.fields(s))&&(i[++r]=H.decode(n,t));return i}function Po(e,t){const i=[];for(let n,s=-1,r=-1,a=e.childrenLength();++s<a;)(n=e.children(s))&&(i[++r]=H.decode(n,t));return i}function Jm(e,t){let i,n,s,r,a,o;return!t||!(o=e.dictionary())?(s=jo(e,Po(e,t)),n=new H(e.name(),s,e.nullable(),cs(e))):t.has(i=o.id().low)?(r=(r=o.indexType())?Uo(r):new ii,a=new si(t.get(i),r,i,o.isOrdered()),n=new H(e.name(),a,e.nullable(),cs(e))):(r=(r=o.indexType())?Uo(r):new ii,t.set(i,s=jo(e,Po(e,t))),a=new si(s,r,i,o.isOrdered()),n=new H(e.name(),a,e.nullable(),cs(e))),n||null}function cs(e){const t=new Map;if(e)for(let i,n,s=-1,r=Math.trunc(e.customMetadataLength());++s<r;)(i=e.customMetadata(s))&&(n=i.key())!=null&&t.set(n,i.value());return t}function Uo(e){return new It(e.isSigned(),e.bitWidth())}function jo(e,t){const i=e.typeType();switch(i){case st.NONE:return new $e;case st.Null:return new $e;case st.Binary:return new En;case st.Utf8:return new Yi;case st.Bool:return new On;case st.List:return new Ki((t||[])[0]);case st.Struct_:return new wt(t||[])}switch(i){case st.Int:{const n=e.type(new Vt);return new It(n.isSigned(),n.bitWidth())}case st.FloatingPoint:{const n=e.type(new ve);return new ni(n.precision())}case st.Decimal:{const n=e.type(new Ot);return new ps(n.scale(),n.precision(),n.bitWidth())}case st.Date:{const n=e.type(new ss);return new Gi(n.unit())}case st.Time:{const n=e.type(new Ht);return new ze(n.unit(),n.bitWidth())}case st.Timestamp:{const n=e.type(new Kt);return new ms(n.unit(),n.timezone())}case st.Interval:{const n=e.type(new we);return new Hi(n.unit())}case st.Union:{const n=e.type(new kt);return new kn(n.mode(),n.typeIdsArray()||[],t||[])}case st.FixedSizeBinary:{const n=e.type(new _e);return new ys(n.byteWidth())}case st.FixedSizeList:{const n=e.type(new be);return new Ji(n.listSize(),(t||[])[0])}case st.Map:{const n=e.type(new rs);return new Tn((t||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${st[i]}" (${i})`)}function Qm(e,t){const i=t.fields.map(r=>H.encode(e,r));pe.startFieldsVector(e,i.length);const n=pe.createFieldsVector(e,i),s=t.metadata&&t.metadata.size>0?pe.createCustomMetadataVector(e,[...t.metadata].map(([r,a])=>{const o=e.createString(`${r}`),c=e.createString(`${a}`);return ht.startKeyValue(e),ht.addKey(e,o),ht.addValue(e,c),ht.endKeyValue(e)})):-1;return pe.startSchema(e),pe.addFields(e,n),pe.addEndianness(e,ny?Zi.Little:Zi.Big),s!==-1&&pe.addCustomMetadata(e,s),pe.endSchema(e)}function Zm(e,t){let i=-1,n=-1,s=-1;const r=t.type;let a=t.typeId;M.isDictionary(r)?(a=r.dictionary.typeId,s=hr.visit(r,e),n=hr.visit(r.dictionary,e)):n=hr.visit(r,e);const o=(r.children||[]).map(l=>H.encode(e,l)),c=Yt.createChildrenVector(e,o),u=t.metadata&&t.metadata.size>0?Yt.createCustomMetadataVector(e,[...t.metadata].map(([l,p])=>{const d=e.createString(`${l}`),m=e.createString(`${p}`);return ht.startKeyValue(e),ht.addKey(e,d),ht.addValue(e,m),ht.endKeyValue(e)})):-1;return t.name&&(i=e.createString(t.name)),Yt.startField(e),Yt.addType(e,n),Yt.addTypeType(e,a),Yt.addChildren(e,c),Yt.addNullable(e,!!t.nullable),i!==-1&&Yt.addName(e,i),s!==-1&&Yt.addDictionary(e,s),u!==-1&&Yt.addCustomMetadata(e,u),Yt.endField(e)}function Xm(e,t){const i=t.nodes||[],n=t.buffers||[];Fe.startNodesVector(e,i.length);for(const a of i.slice().reverse())Ti.encode(e,a);const s=e.endVector();Fe.startBuffersVector(e,n.length);for(const a of n.slice().reverse())Se.encode(e,a);const r=e.endVector();return Fe.startRecordBatch(e),Fe.addLength(e,new Oi(t.length,0)),Fe.addNodes(e,s),Fe.addBuffers(e,r),Fe.endRecordBatch(e)}function ty(e,t){const i=jt.encode(e,t.data);return Di.startDictionaryBatch(e),Di.addId(e,new Oi(t.id,0)),Di.addIsDelta(e,t.isDelta),Di.addData(e,i),Di.endDictionaryBatch(e)}function ey(e,t){return Nl.createFieldNode(e,new Oi(t.length,0),new Oi(t.nullCount,0))}function iy(e,t){return Bl.createBuffer(e,new Oi(t.offset,0),new Oi(t.length,0))}const ny=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Fr="ARROW1",Da=new Uint8Array(Fr.length);for(let e=0;e<Fr.length;e+=1)Da[e]=Fr.codePointAt(e);Da.length;class ct extends U{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const i=s=>s.flatMap(r=>Array.isArray(r)?i(r):r instanceof Pt?r.data.children:r.data),n=new ct;return n.visitMany(i(t)),n}visit(t){if(t instanceof Y)return this.visitMany(t.data),this;const{type:i}=t;if(!M.isDictionary(i)){const{length:n,nullCount:s}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");M.isNull(i)||re.call(this,s<=0?new Uint8Array(0):Ea(t.offset,n,t.nullBitmap)),this.nodes.push(new Ti(n,s))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function re(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Se(this._byteLength,t)),this._byteLength+=t,this}function sy(e){const{type:t,length:i,typeIds:n,valueOffsets:s}=e;if(re.call(this,n),t.mode===Qt.Sparse)return Lr.call(this,e);if(t.mode===Qt.Dense){if(e.offset<=0)return re.call(this,s),Lr.call(this,e);{const r=n.reduce((l,p)=>Math.max(l,p),n[0]),a=new Int32Array(r+1),o=new Int32Array(r+1).fill(-1),c=new Int32Array(i),u=ta(-s[0],i,s);for(let l,p,d=-1;++d<i;)(p=o[l=n[d]])===-1&&(p=o[l]=u[l]),c[d]=u[d]-p,++a[l];re.call(this,c);for(let l,p=-1,d=t.children.length;++p<d;)if(l=e.children[p]){const m=t.typeIds[p],y=Math.min(i,a[m]);this.visit(l.slice(o[m],y))}}}return this}function ry(e){let t;return e.nullCount>=e.length?re.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?re.call(this,Ea(e.offset,e.length,t)):re.call(this,Hu(e.values))}function pi(e){return re.call(this,e.values.subarray(0,e.length*e.stride))}function Dl(e){const{length:t,values:i,valueOffsets:n}=e,s=n[0],r=n[t],a=Math.min(r-s,i.byteLength-s);return re.call(this,ta(-n[0],t,n)),re.call(this,i.subarray(s,s+a)),this}function Ra(e){const{length:t,valueOffsets:i}=e;return i&&re.call(this,ta(i[0],t,i)),this.visit(e.children[0])}function Lr(e){return this.visitMany(e.type.children.map((t,i)=>e.children[i]).filter(Boolean))[0]}ct.prototype.visitBool=ry;ct.prototype.visitInt=pi;ct.prototype.visitFloat=pi;ct.prototype.visitUtf8=Dl;ct.prototype.visitBinary=Dl;ct.prototype.visitFixedSizeBinary=pi;ct.prototype.visitDate=pi;ct.prototype.visitTimestamp=pi;ct.prototype.visitTime=pi;ct.prototype.visitDecimal=pi;ct.prototype.visitList=Ra;ct.prototype.visitStruct=Lr;ct.prototype.visitUnion=sy;ct.prototype.visitInterval=pi;ct.prototype.visitFixedSizeList=Ra;ct.prototype.visitMap=Ra;class Rl extends hl{constructor(t){super(),this._position=0,this._started=!1,this._sink=new ur,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,li(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,i){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Rs(t)?t.then(i=>this.writeAll(i)):Vs(t)?ja(this,t):Ua(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,i=null){return t===this._sink||t instanceof ur?this._sink=t:(this._sink=new ur,t&&dd(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&pd(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!i||!Tr(i,this._schema))&&(i==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=i,this._writeSchema(i))),this}write(t){let i=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Tt&&!(i=t.schema))return this.finish()&&void 0;if(t instanceof Pt&&!(i=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(i&&!Tr(i,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,i)}t instanceof Pt?t instanceof Tm||this._writeRecordBatch(t):t instanceof Tt?this.writeAll(t.batches):Zr(t)&&this.writeAll(t)}_writeMessage(t,i=8){const n=i-1,s=xe.encode(t),r=s.byteLength,a=this._writeLegacyIpcFormat?4:8,o=r+a+n&~n,c=o-r-a;return t.headerType===pt.RecordBatch?this._recordBatchBlocks.push(new ri(o,t.bodyLength,this._position)):t.headerType===pt.DictionaryBatch&&this._dictionaryBlocks.push(new ri(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-a)),r>0&&this._write(s),this._writePadding(c)}_write(t){if(this._started){const i=J(t);i&&i.byteLength>0&&(this._sink.write(i),this._position+=i.byteLength)}return this}_writeSchema(t){return this._writeMessage(xe.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Da)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:i,nodes:n,bufferRegions:s,buffers:r}=ct.assemble(t),a=new jt(t.numRows,n,s),o=xe.from(a,i);return this._writeDictionaries(t)._writeMessage(o)._writeBodyBuffers(r)}_writeDictionaryBatch(t,i,n=!1){this._dictionaryDeltaOffsets.set(i,t.length+(this._dictionaryDeltaOffsets.get(i)||0));const{byteLength:s,nodes:r,bufferRegions:a,buffers:o}=ct.assemble(new Y([t])),c=new jt(t.length,r,a),u=new ke(c,i,n),l=xe.from(u,s);return this._writeMessage(l)._writeBodyBuffers(o)}_writeBodyBuffers(t){let i,n,s;for(let r=-1,a=t.length;++r<a;)(i=t[r])&&(n=i.byteLength)>0&&(this._write(i),(s=(n+7&-8)-n)>0&&this._writePadding(s));return this}_writeDictionaries(t){for(let[i,n]of t.dictionaries){let s=this._dictionaryDeltaOffsets.get(i)||0;if(s===0||(n=n==null?void 0:n.slice(s)).length>0)for(const r of n.data)this._writeDictionaryBatch(r,i,s>0),s+=r.length}return this}}class Va extends Rl{static writeAll(t,i){const n=new Va(i);return Rs(t)?t.then(s=>n.writeAll(s)):Vs(t)?ja(n,t):Ua(n,t)}}class Pa extends Rl{static writeAll(t){const i=new Pa;return Rs(t)?t.then(n=>i.writeAll(n)):Vs(t)?ja(i,t):Ua(i,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const i=kr.encode(new kr(t,Ut.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(i)._write(Int32Array.of(i.byteLength))._writeMagic()}}function Ua(e,t){let i=t;t instanceof Tt&&(i=t.batches,e.reset(void 0,t.schema));for(const n of i)e.write(n);return e.finish()}function ja(e,t){var i,n,s,r;return Me(this,void 0,void 0,function*(){try{for(i=xn(t);n=yield i.next(),!n.done;){const a=n.value;e.write(a)}}catch(a){s={error:a}}finally{try{n&&!n.done&&(r=i.return)&&(yield r.call(i))}finally{if(s)throw s.error}}return e.finish()})}function ay(e,t="stream"){return(t==="stream"?Va:Pa).writeAll(e).toUint8Array(!0)}function $a(e,t=1){return(e*t+63&-64||64)/t}function oi(e,t,i=e.BYTES_PER_ELEMENT){return new e($a(t,i))}function za(e){return e instanceof Z?e:new Z(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function oy(e){return new Y([za(e)])}const Wa=new TextEncoder;function cy(e,t,i){const n=Wa.encode(i);return e.set(n,t),n.length}function uy(e,t,i){return Wa.encodeInto(i,e.subarray(t)).written}const ly=Wa.encodeInto?uy:cy;function $o(e,t){const i=oi(e.ArrayType,t);return{set(n,s){i[s]=n},data:()=>({type:e,length:t,buffers:[null,i]})}}function hy(e,t){const i=oi(e.ArrayType,t/8);return{set(n,s){n&&(i[s>>3]|=1<<s%8)},data:()=>({type:e,length:t,buffers:[null,i]})}}function fy(e,t){const i=oi(e.ArrayType,t);return{set(n,s){i[s]=n/864e5|0},data:()=>({type:e,length:t,buffers:[null,i]})}}function dy(e,t){const i=oi(e.ArrayType,t<<1);return{set(n,s){const r=s<<1;i[r]=n%4294967296|0,i[r+1]=n/4294967296|0},data:()=>({type:e,length:t,buffers:[null,i]})}}function py(e){const t=As({type:e,nullValues:[null,void 0]});return{set(i,n){t.set(n,i)},data:()=>t.finish().flush()}}function my(e,t,i){const n=oi(Int32Array,t+1),s=oi(Uint8Array,3*i);let r=0;return{set(a,o){r+=ly(s,r,a),n[o+1]=r},data:()=>{const a=$a(r),o=s.length>a?s.subarray(0,a):s;return{type:e,length:t,buffers:[n,o]}}}}function yy(e,t){const i=[],n=oi(e.indices.ArrayType,t),s=Object.create(null);let r=-1,a=0;return{set(o,c){const u=String(o);let l=s[u];l===void 0&&(a+=u.length,s[u]=l=++r,i.push(u)),n[c]=l},data:()=>({type:e,length:t,buffers:[null,n],dict:gy(e.dictionary,i,a)})}}function gy(e,t,i){const n=my(e,t.length,i);return t.forEach(n.set),oy(n.data())}function _y(e,t){const i=oi(Uint8Array,t/8);let n=0;return{set(s,r){s==null?++n:(e.set(s,r),i[r>>3]|=1<<r%8)},data:()=>{const s=e.data();return n&&(s.nulls=n,s.buffers[2]=i),s}}}function by(e,t,i=!0){let n;switch(e.typeId){case f.Int:n=e.bitWidth<64?$o:null;break;case f.Float:n=e.precision>0?$o:null;break;case f.Dictionary:n=e.dictionary.typeId===f.Utf8&&e.indices.typeId===f.Int&&e.indices.bitWidth<64?yy:null;break;case f.Bool:n=hy;break;case f.Date:n=e.unit?dy:fy;break}return n==null?py(e):i?_y(n(e,t),t):n(e,t)}function vy(e,t){const i=e.length,n=$a(i,e.BYTES_PER_ELEMENT);let s=e;return i!==n&&(s=new e.constructor(n),s.set(e)),za({type:t,length:i,buffers:[null,s]})}function Vl(e,t,i,n,s=!0){const r=by(n,e,s);return t(i,r.set),za(r.data())}function qa(e){if(e instanceof M||e==null)return e;switch(e){case f.Binary:return new En;case f.Bool:return new On;case f.DateDay:return new Od;case f.DateMillisecond:case f.Date:return new kd;case f.Dictionary:return new si(new Yi,new ii);case f.Float16:return new mu;case f.Float32:return new ua;case f.Float64:case f.Float:return new la;case f.Int8:return new ia;case f.Int16:return new na;case f.Int32:case f.Int:return new ii;case f.Int64:return new sa;case f.IntervalDayTime:return new Ld;case f.Interval:case f.IntervalYearMonth:return new Md;case f.Null:return new $e;case f.TimeMicrosecond:return new Nd;case f.TimeMillisecond:case f.Time:return new Bd;case f.TimeNanosecond:return new Fd;case f.TimeSecond:return new Td;case f.Uint8:return new ra;case f.Uint16:return new aa;case f.Uint32:return new oa;case f.Uint64:return new ca;case f.Utf8:return new Yi;default:N(`Unsupported type code: ${Ie(e)}. Use a data type constructor instead?`)}}function wy(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function Pl(e,t){const i=Mr();return e(t,i.add),i}function Mr(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const i=typeof t;if(i==="string")++e.strings;else if(i==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(i==="boolean")++e.bools;else if(i==="object")if(je(t))++e.dates,wy(t)&&++e.utcdays;else if(_i(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const n=e.array_prof||(e.array_prof=Mr());t.forEach(n.add)}else{++e.structs;const n=e.struct_prof||(e.struct_prof={});for(const s in t)(n[s]||(n[s]=Mr())).add(t[s])}else i==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return qa(xy(e))}};return e}function xy(e){const t=e.count-e.nulls;if(t===0)return f.Null;if(e.ints===t){const i=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?i>=2**31?f.Float64:i<1<<7?f.Int8:i<1<<15?f.Int16:f.Int32:i>=2**32?f.Float64:i<1<<8?f.Uint8:i<1<<16?f.Uint16:f.Uint32}else{if(e.nums===t)return f.Float64;if(e.bigints===t){const i=-e.min>e.max?-e.min-1n:e.max;return e.min<0?i<2**63?f.Int64:N(`BigInt exceeds 64 bits: ${i}`):e.max<2**64?f.Uint64:N(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return f.Bool;if(e.utcdays===t)return f.DateDay;if(e.dates===t)return f.DateMillisecond;if(e.arrays===t){const i=H.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new Ji(e.minlen,i):new Ki(i)}else if(e.structs===t){const i=e.struct_prof;return new wt(Object.keys(i).map(n=>H.new(n,i[n].type(),!0)))}else{if(e.strings>0)return f.Dictionary;N("Type inference failure")}}}}function Sy(e,t,i,n,s,r=!0){if(s=qa(s),!s){const a=Pl(n,t);r=a.nulls>0,s=a.type()}return Vl(i,n,t,s,r)}function Iy(e,t,i,n,s,r=!0){s=qa(s);const a=e.column(t),o=!(e.isFiltered()||e.isOrdered()),c=Ay(a);if(c&&o&&zo(c.type,s))return c;const u=a.data;if(Vn(u)){const l=Cy(u);if(o&&l&&zo(l,s))return vy(u,l);s=s||l,r=!1}if(!s){const l=Pl(n,a);r=l.nulls>0,s=l.type()}return Vl(i,n,a,s,r)}function Ay(e){return e instanceof Y?e:e.vector instanceof Y?e.vector:null}function Cy(e){const i={Float32Array:ua,Float64Array:la,Int8Array:ia,Int16Array:na,Int32Array:ii,Uint8Array:ra,Uint16Array:aa,Uint32Array:oa,BigInt64Array:sa,BigUint64Array:ca}[e.constructor.name];return i?new i:null}function zo(e,t){return!e||!t?!0:e.compareTo(t)}function Ey(e,t,i){const n=Math.min(e.length,i+t);return(s,r)=>{for(let a=i;a<n;++a)r(e[a][s],a)}}function Oy(e,t,i){const n=i===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(s,r)=>{let a=-1;n&&_i(s.data)?s.data.forEach(r):e.scan(o=>r(s.get(o),++a),!0,t,i)}}const ky=()=>N("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function Ty(){try{return Tt}catch{ky()}}function Ul(e,t={}){const{types:i={}}=t,{dataFrom:n,names:s,nrows:r,scan:a}=By(e,t),o={};s.forEach(u=>{const l=n(e,u,r,a,i[u]);l.length!==r&&N("Column length mismatch"),o[u]=l});const c=Ty();return new c(o)}function By(e,t){const{columns:i,limit:n=1/0,offset:s=0}=t,r=et(i)?i(e):q(i)?i:null;if(q(e))return{dataFrom:Sy,names:r||Object.keys(e[0]),nrows:Math.min(n,e.length-s),scan:Ey(e,n,s)};if(Ny(e))return{dataFrom:Iy,names:r||e.columnNames(),nrows:Math.min(n,e.numRows()-s),scan:Oy(e,n,s)};N("Unsupported input data type")}function Ny(e){return e&&et(e.reify)}function Fy(e,t){return ay(Ul(e,t))}function Ly(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function My(e,t={}){let i=0,n=0,s=0,r=0,a=0,o=0;return e(c=>{if(++i,c==null){++n;return}const u=typeof c;if(u==="object"&&je(c))++s,Ly(c)&&++r;else if(u==="number"&&(++a,c===c&&(c|0)!==c)){const l=c+"",p=l.indexOf(".");if(p>=0){const d=l.indexOf("e"),m=d>0?d:l.length;o=Math.max(o,m-p-1)}}}),{align:(n+a+s)/i>.5?"r":"l",format:{utc:s===r,digits:Math.min(o,t.maxdigits||6)}}}function Gs(e,t){return et(t)?t(e):t||e.columnNames()}function jl(e,t,i){const n=i.format||{},s=i.align||{},r={},a={};return t.forEach(o=>{const c=My(Dy(e,o),i);a[o]=s[o]||c.align,r[o]=n[o]||c.format}),{align:a,format:r}}function Dy(e,t){const i=e.column(t);return n=>e.scan(s=>n(i.get(s)))}function Ya(e,t,i=100,n,s){const r=e.data(),a=t.length;e.scan(o=>{s.row(o);for(let c=0;c<a;++c){const u=t[c];s.cell(r[t[c]].get(o),u,c)}},!0,i,n)}function Ry(e,t={}){const i=Gs(e,t.columns),n=t.format||{},s=t.delimiter||",",r=new RegExp(`["${s}
\r]`),a=u=>u==null?"":je(u)?Ms(u,!0):r.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u,o=i.map(a);let c="";return Ya(e,i,t.limit||1/0,t.offset,{row(){c+=o.join(s)+`
`},cell(u,l,p){o[p]=a(n[l]?n[l](u):u)}}),c+o.join(s)}function $l(e,t={}){if(et(t))return t(e)+"";const i=typeof e;if(i==="object"){if(je(e))return t.utc?Ms(e):_c(e);{const n=JSON.stringify(e,(r,a)=>Vn(a)?Array.from(a):a),s=t.maxlen||30;return n.length>s?n.slice(0,28)+""+(n[0]==="["?"]":"}"):n}}else if(i==="number"){const n=t.digits||0;let s;return e!==0&&((s=Math.abs(e))>=1e18||s<Math.pow(10,-n))?e.toExponential(n):e.toFixed(n)}else return e+""}function Hs(e,t,i={}){for(const n in e)i[n]=t(e[n],n);return i}function Vy(e,t={}){const i=Gs(e,t.columns),{align:n,format:s}=jl(e,i,t),r=Py(t),a=t.null,o=g=>g==="c"?"center":g==="r"?"right":"left",c=g=>g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u=(g,_)=>c($l(g,_)),l=a?(g,_)=>g==null?a(g):u(g,_):u;let p=-1,d=-1;const m=(g,_,v)=>{const j=v?o(n[_]):"",ut=r[g]&&r[g](_,d,p)||"",x=(j?`text-align: ${j};`+(ut?" ":""):"")+ut;return`<${g}${x?` style="${x}"`:""}>`};let y=m("table")+m("thead")+m("tr",p)+i.map(g=>`${m("th",g,1)}${g}</th>`).join("")+"</tr></thead>"+m("tbody");return Ya(e,i,t.limit,t.offset,{row(g){p=g,y+=(++d?"</tr>":"")+m("tr")},cell(g,_){y+=m("td",_,1)+l(g,s[_])+"</td>"}}),y+"</tr></tbody></table>"}function Py(e){return Hs(e.style,t=>et(t)?t:()=>t)}function Uy(e,t=!0,i=!1){return e===void 0||e?t:i}const jy=e=>je(e)?Ms(e,!0):e;function $y(e,t={}){const i=Uy(t.schema),n=t.format||{},s=Gs(e,t.columns);let r="{";return i&&(r+='"schema":{"fields":'+JSON.stringify(s.map(a=>({name:a})))+'},"data":{'),s.forEach((a,o)=>{r+=(o?",":"")+JSON.stringify(a)+":[";const c=e.column(a),u=n[a]||jy;let l=-1;e.scan(p=>{const d=c.get(p);r+=(++l?",":"")+JSON.stringify(u(d))},!0,t.limit,t.offset),r+="]"}),r+"}"+(i?"}":"")}function zy(e,t={}){const i=Gs(e,t.columns),{align:n,format:s}=jl(e,i,t),r=c=>c==="c"?":-:":c==="r"?"-:":":-",a=c=>c.replace(/\|/g,"\\|");let o="|"+i.map(a).join("|")+`|
|`+i.map(c=>r(n[c])).join("|")+"|";return Ya(e,i,t.limit,t.offset,{row(){o+=`
|`},cell(c,u){o+=a($l(c,s[u]))+"|"}}),o+`
`}function zl(e,t){for(const[i,n]of Ds(t))e.set(i,n);return e}function Wy(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function We(e,t,i=new Map){return t=St(t)?e.columnName(t):t,bt(t)?i.set(t,t):q(t)?t.forEach(n=>We(e,n,i)):et(t)?We(e,t(e),i):xt(t)?zl(i,t):N(`Invalid column selection: ${Ie(t)}`),i}function Ks(e,t){return e.toObject=t,e}function Wl(e){return q(e)?e.map(Wl):e&&e.toObject?e.toObject():e}function tn(){return Ks(e=>e.columnNames(),()=>({all:[]}))}function ql(...e){return e=e.flat(),Ks(t=>{const i=We(t,e);return t.columnNames(n=>!i.has(n))},()=>({not:Wl(e)}))}function qy(e,t){return Ks(i=>{let n=St(e)?e:i.columnIndex(e),s=St(t)?t:i.columnIndex(t);if(s<n){const r=s;s=n,n=r}return i.columnNames().slice(n,s+1)},()=>({range:[e,t]}))}function Yy(e){return bt(e)&&(e=RegExp(Wy(e))),Ks(t=>t.columnNames(i=>e.test(i)),()=>({matches:[e.source,e.flags]}))}function Gy(e){return Vn(e.data)?e.data.constructor:Array}class Ve extends df{static from(t,i){return new Ve(yf(t,i),i)}static new(t,i){if(t instanceof Ve)return t;const n={},s=[];for(const[r,a]of Ds(t))n[r]=a,s.push(r);return new Ve(n,i||s)}constructor(t,i,n,s,r,a){Hs(t,mf,t),i=i||Object.keys(t);const o=i.length?t[i[0]].length:0;super(i,o,t,n,s,r,a)}create({data:t,names:i,filter:n,groups:s,order:r}){const a=n!==void 0?n:this.mask();return new Ve(t||this._data,i||(t?null:this._names),a,s!==void 0?s:Wf(this._group,n&&a),r!==void 0?r:this._order,this._params)}assign(...t){const i=this.numRows(),n=this.reify(),s=$t(n).groupby(n.groups());return t.forEach(r=>{r=Ve.new(r),r.numRows()!==i&&N("Assign row counts do not match"),r=r.reify(),r.columnNames(a=>s.add(a,r.column(a)))}),this.create(s.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,i=Array){const n=this.column(t),s=new i(this.numRows());let r=-1;return this.scan(a=>s[++r]=n.get(a),!0),s}get(t,i=0){const n=this.column(t);return this.isFiltered()||this.isOrdered()?n.get(this.indices()[i]):n.get(i)}getter(t){const i=this.column(t),n=this.isFiltered()||this.isOrdered()?this.indices():null;return n?s=>i.get(n[s]):i?s=>i.get(s):N(`Unrecognized column: ${t}`)}object(t=0){return Wo(this)(t)}objects(t={}){const{grouped:i,limit:n,offset:s}=t,r=We(this,t.columns||tn()),a=Wc(r),o=[];if(this.scan((c,u)=>o.push(a(c,u)),!0,n,s),i&&this.isGrouped()){const c=[];return this.scan(u=>c.push(u),!0,n,s),Yf(this,c,o,i)}return o}*[Symbol.iterator](){const t=Wo(this),i=this.numRows();for(let n=0;n<i;++n)yield t(n)}reify(t){const i=t?t.length:this.numRows(),n=this._names;let s,r;if(!t&&!this.isOrdered())if(this.isFiltered())i===this.totalRows()&&(s=this.data());else return this;if(!s){const a=t?c=>t.forEach(c):c=>this.scan(c,!0),o=n.length;s={};for(let c=0;c<o;++c){const u=n[c],l=this.column(u),p=s[u]=new(Gy(l))(i);let d=-1;a(m=>p[++d]=l.get(m))}this.isGrouped()&&(r=qf(this.groups(),a,!!t,i))}return this.create({data:s,names:n,groups:r,filter:null,order:null})}transform(...t){return t.flat().reduce((i,n)=>n(i),this)}toArrow(t){return Ul(this,t)}toArrowBuffer(t){return Fy(this,t)}toCSV(t){return Ry(this,t)}toHTML(t){return Vy(this,t)}toJSON(t){return $y(this,t)}toMarkdown(t){return zy(this,t)}}function Wo(e){let t=e._builder;if(!t){const i=Wc(e.columnNames()),n=e.data();if(e.isOrdered()||e.isFiltered()){const s=e.indices();t=r=>i(s[r],n)}else t=s=>i(s,n);e._builder=t}return t}class Hy{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function z(e,t,i,n){const s=i[e.type]||i.Default;if(s&&s(e,t,n)===!1)return;const r=Ky[e.type];r&&r(e,t,i)}const Xn=(e,t,i)=>{z(e.argument,t,i,e)},fr=(e,t,i)=>{z(e.left,t,i,e),z(e.right,t,i,e)},qo=(e,t,i)=>{z(e.test,t,i,e),z(e.consequent,t,i,e),e.alternate&&z(e.alternate,t,i,e)},dr=(e,t,i)=>{me(e.params,t,i,e),z(e.body,t,i,e)},Yo=(e,t,i)=>{z(e.callee,t,i,e),me(e.arguments,t,i,e)},me=(e,t,i,n)=>{e.forEach(s=>z(s,t,i,n))},Ky={TemplateLiteral:(e,t,i)=>{me(e.expressions,t,i,e),me(e.quasis,t,i,e)},MemberExpression:(e,t,i)=>{z(e.object,t,i,e),z(e.property,t,i,e)},CallExpression:Yo,NewExpression:Yo,ArrayExpression:(e,t,i)=>{me(e.elements,t,i,e)},AssignmentExpression:fr,AwaitExpression:Xn,BinaryExpression:fr,LogicalExpression:fr,UnaryExpression:Xn,UpdateExpression:Xn,ConditionalExpression:qo,ObjectExpression:(e,t,i)=>{me(e.properties,t,i,e)},Property:(e,t,i)=>{z(e.key,t,i,e),z(e.value,t,i,e)},ArrowFunctionExpression:dr,FunctionExpression:dr,FunctionDeclaration:dr,VariableDeclaration:(e,t,i)=>{me(e.declarations,t,i,e)},VariableDeclarator:(e,t,i)=>{z(e.id,t,i,e),z(e.init,t,i,e)},SpreadElement:(e,t,i)=>{z(e.argument,t,i,e)},BlockStatement:(e,t,i)=>{me(e.body,t,i,e)},ExpressionStatement:(e,t,i)=>{z(e.expression,t,i,e)},IfStatement:qo,ForStatement:(e,t,i)=>{z(e.init,t,i,e),z(e.test,t,i,e),z(e.update,t,i,e),z(e.body,t,i,e)},WhileStatement:(e,t,i)=>{z(e.test,t,i,e),z(e.body,t,i,e)},DoWhileStatement:(e,t,i)=>{z(e.body,t,i,e),z(e.test,t,i,e)},SwitchStatement:(e,t,i)=>{z(e.discriminant,t,i,e),me(e.cases,t,i,e)},SwitchCase:(e,t,i)=>{e.test&&z(e.test,t,i,e),me(e.consequent,t,i,e)},ReturnStatement:Xn,Program:(e,t,i)=>{z(e.body[0],t,i,e)}};function Yl(e){delete e.start,delete e.end,delete e.optional}function Go(e){Yl(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function Jy(e){return z(e,null,{Column:Go,Constant:Go,Default:Yl}),e}function ft(e,t){return t&&t.type===e}function Qy(e){return ft(Kf,e)||ft(Hf,e)}function Zy(e){return et(e)?e:()=>e}const Xy="Escaped functions are not valid as rollup or pivot values.";function t0(e,t,i){e.aggronly&&N(Xy);const n="(row,data)=>fn("+zc(e.table.columnNames())+",$)";return{escape:Kr.escape(n,Zy(t.expr),i)}}var e0=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],Gl=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],i0="-----------------------------------------------------------------------------------------------------------------------------------------------------",Hl="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",pr={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},mr="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",n0={5:mr,"5module":mr+" export import",6:mr+" const class extends export import super"},s0=/^in(stanceof)?$/,r0=new RegExp("["+Hl+"]"),a0=new RegExp("["+Hl+i0+"]");function Dr(e,t){for(var i=65536,n=0;n<t.length;n+=2){if(i+=t[n],i>e)return!1;if(i+=t[n+1],i>=e)return!0}return!1}function qe(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&r0.test(String.fromCharCode(e)):t===!1?!1:Dr(e,Gl)}function en(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&a0.test(String.fromCharCode(e)):t===!1?!1:Dr(e,Gl)||Dr(e,e0)}var $=function(t,i){i===void 0&&(i={}),this.label=t,this.keyword=i.keyword,this.beforeExpr=!!i.beforeExpr,this.startsExpr=!!i.startsExpr,this.isLoop=!!i.isLoop,this.isAssign=!!i.isAssign,this.prefix=!!i.prefix,this.postfix=!!i.postfix,this.binop=i.binop||null,this.updateContext=null};function Wt(e,t){return new $(e,{beforeExpr:!0,binop:t})}var qt={beforeExpr:!0},Ct={startsExpr:!0},Ga={};function R(e,t){return t===void 0&&(t={}),t.keyword=e,Ga[e]=new $(e,t)}var h={num:new $("num",Ct),regexp:new $("regexp",Ct),string:new $("string",Ct),name:new $("name",Ct),privateId:new $("privateId",Ct),eof:new $("eof"),bracketL:new $("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new $("]"),braceL:new $("{",{beforeExpr:!0,startsExpr:!0}),braceR:new $("}"),parenL:new $("(",{beforeExpr:!0,startsExpr:!0}),parenR:new $(")"),comma:new $(",",qt),semi:new $(";",qt),colon:new $(":",qt),dot:new $("."),question:new $("?",qt),questionDot:new $("?."),arrow:new $("=>",qt),template:new $("template"),invalidTemplate:new $("invalidTemplate"),ellipsis:new $("...",qt),backQuote:new $("`",Ct),dollarBraceL:new $("${",{beforeExpr:!0,startsExpr:!0}),eq:new $("=",{beforeExpr:!0,isAssign:!0}),assign:new $("_=",{beforeExpr:!0,isAssign:!0}),incDec:new $("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new $("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Wt("||",1),logicalAND:Wt("&&",2),bitwiseOR:Wt("|",3),bitwiseXOR:Wt("^",4),bitwiseAND:Wt("&",5),equality:Wt("==/!=/===/!==",6),relational:Wt("</>/<=/>=",7),bitShift:Wt("<</>>/>>>",8),plusMin:new $("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Wt("%",10),star:Wt("*",10),slash:Wt("/",10),starstar:new $("**",{beforeExpr:!0}),coalesce:Wt("??",1),_break:R("break"),_case:R("case",qt),_catch:R("catch"),_continue:R("continue"),_debugger:R("debugger"),_default:R("default",qt),_do:R("do",{isLoop:!0,beforeExpr:!0}),_else:R("else",qt),_finally:R("finally"),_for:R("for",{isLoop:!0}),_function:R("function",Ct),_if:R("if"),_return:R("return",qt),_switch:R("switch"),_throw:R("throw",qt),_try:R("try"),_var:R("var"),_const:R("const"),_while:R("while",{isLoop:!0}),_with:R("with"),_new:R("new",{beforeExpr:!0,startsExpr:!0}),_this:R("this",Ct),_super:R("super",Ct),_class:R("class",Ct),_extends:R("extends",qt),_export:R("export"),_import:R("import",Ct),_null:R("null",Ct),_true:R("true",Ct),_false:R("false",Ct),_in:R("in",{beforeExpr:!0,binop:7}),_instanceof:R("instanceof",{beforeExpr:!0,binop:7}),_typeof:R("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:R("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:R("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Xt=/\r\n?|\n|\u2028|\u2029/,o0=new RegExp(Xt.source,"g");function ln(e){return e===10||e===13||e===8232||e===8233}function Kl(e,t,i){i===void 0&&(i=e.length);for(var n=t;n<i;n++){var s=e.charCodeAt(n);if(ln(s))return n<i-1&&s===13&&e.charCodeAt(n+1)===10?n+2:n+1}return-1}var Jl=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Jt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Ql=Object.prototype,c0=Ql.hasOwnProperty,u0=Ql.toString,Wn=Object.hasOwn||function(e,t){return c0.call(e,t)},Ho=Array.isArray||function(e){return u0.call(e)==="[object Array]"};function Ci(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}function ci(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var l0=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Bn=function(t,i){this.line=t,this.column=i};Bn.prototype.offset=function(t){return new Bn(this.line,this.column+t)};var Js=function(t,i,n){this.start=i,this.end=n,t.sourceFile!==null&&(this.source=t.sourceFile)};function Zl(e,t){for(var i=1,n=0;;){var s=Kl(e,n,t);if(s<0)return new Bn(i,t-n);++i,n=s}}var Rr={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Ko=!1;function h0(e){var t={};for(var i in Rr)t[i]=e&&Wn(e,i)?e[i]:Rr[i];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Ko&&typeof console=="object"&&console.warn&&(Ko=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Ho(t.onToken)){var n=t.onToken;t.onToken=function(s){return n.push(s)}}return Ho(t.onComment)&&(t.onComment=f0(t,t.onComment)),t}function f0(e,t){return function(i,n,s,r,a,o){var c={type:i?"Block":"Line",value:n,start:s,end:r};e.locations&&(c.loc=new Js(this,a,o)),e.ranges&&(c.range=[s,r]),t.push(c)}}var Nn=1,hn=2,Ha=4,Xl=8,th=16,eh=32,Ka=64,ih=128,qn=256,Ja=Nn|hn|qn;function Qa(e,t){return hn|(e?Ha:0)|(t?Xl:0)}var ks=0,Za=1,Ue=2,nh=3,sh=4,rh=5,dt=function(t,i,n){this.options=t=h0(t),this.sourceFile=t.sourceFile,this.keywords=Ci(n0[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var s="";t.allowReserved!==!0&&(s=pr[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(s+=" await")),this.reservedWords=Ci(s);var r=(s?s+" ":"")+pr.strict;this.reservedWordsStrict=Ci(r),this.reservedWordsStrictBind=Ci(r+" "+pr.strictBind),this.input=String(i),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf(`
`,n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Xt).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=h.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Nn),this.regexpState=null,this.privateNameStack=[]},Te={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};dt.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Te.inFunction.get=function(){return(this.currentVarScope().flags&hn)>0};Te.inGenerator.get=function(){return(this.currentVarScope().flags&Xl)>0&&!this.currentVarScope().inClassFieldInit};Te.inAsync.get=function(){return(this.currentVarScope().flags&Ha)>0&&!this.currentVarScope().inClassFieldInit};Te.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&qn)return!1;if(t.flags&hn)return(t.flags&Ha)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Te.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,i=e.inClassFieldInit;return(t&Ka)>0||i||this.options.allowSuperOutsideMethod};Te.allowDirectSuper.get=function(){return(this.currentThisScope().flags&ih)>0};Te.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Te.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,i=e.inClassFieldInit;return(t&(hn|qn))>0||i};Te.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&qn)>0};dt.extend=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];for(var n=this,s=0;s<t.length;s++)n=t[s](n);return n};dt.parse=function(t,i){return new this(i,t).parse()};dt.parseExpressionAt=function(t,i,n){var s=new this(n,t,i);return s.nextToken(),s.parseExpression()};dt.tokenizer=function(t,i){return new this(i,t)};Object.defineProperties(dt.prototype,Te);var At=dt.prototype,d0=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;At.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Jt.lastIndex=e,e+=Jt.exec(this.input)[0].length;var t=d0.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Jt.lastIndex=e+t[0].length;var i=Jt.exec(this.input),n=i.index+i[0].length,s=this.input.charAt(n);return s===";"||s==="}"||Xt.test(i[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(s)||s==="!"&&this.input.charAt(n+1)==="=")}e+=t[0].length,Jt.lastIndex=e,e+=Jt.exec(this.input)[0].length,this.input[e]===";"&&e++}};At.eat=function(e){return this.type===e?(this.next(),!0):!1};At.isContextual=function(e){return this.type===h.name&&this.value===e&&!this.containsEsc};At.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};At.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};At.canInsertSemicolon=function(){return this.type===h.eof||this.type===h.braceR||Xt.test(this.input.slice(this.lastTokEnd,this.start))};At.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};At.semicolon=function(){!this.eat(h.semi)&&!this.insertSemicolon()&&this.unexpected()};At.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};At.expect=function(e){this.eat(e)||this.unexpected()};At.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var Qs=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};At.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var i=t?e.parenthesizedAssign:e.parenthesizedBind;i>-1&&this.raiseRecoverable(i,t?"Assigning to rvalue":"Parenthesized pattern")}};At.checkExpressionErrors=function(e,t){if(!e)return!1;var i=e.shorthandAssign,n=e.doubleProto;if(!t)return i>=0||n>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")};At.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};At.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var w=dt.prototype;w.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==h.eof;){var i=this.parseStatement(null,!0,t);e.body.push(i)}if(this.inModule)for(var n=0,s=Object.keys(this.undefinedExports);n<s.length;n+=1){var r=s[n];this.raiseRecoverable(this.undefinedExports[r].start,"Export '"+r+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Xa={kind:"loop"},p0={kind:"switch"};w.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Jt.lastIndex=this.pos;var t=Jt.exec(this.input),i=this.pos+t[0].length,n=this.input.charCodeAt(i);if(n===91||n===92)return!0;if(e)return!1;if(n===123||n>55295&&n<56320)return!0;if(qe(n,!0)){for(var s=i+1;en(n=this.input.charCodeAt(s),!0);)++s;if(n===92||n>55295&&n<56320)return!0;var r=this.input.slice(i,s);if(!s0.test(r))return!0}return!1};w.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Jt.lastIndex=this.pos;var e=Jt.exec(this.input),t=this.pos+e[0].length,i;return!Xt.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(en(i=this.input.charCodeAt(t+8))||i>55295&&i<56320))};w.parseStatement=function(e,t,i){var n=this.type,s=this.startNode(),r;switch(this.isLet(e)&&(n=h._var,r="let"),n){case h._break:case h._continue:return this.parseBreakContinueStatement(s,n.keyword);case h._debugger:return this.parseDebuggerStatement(s);case h._do:return this.parseDoStatement(s);case h._for:return this.parseForStatement(s);case h._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case h._class:return e&&this.unexpected(),this.parseClass(s,!0);case h._if:return this.parseIfStatement(s);case h._return:return this.parseReturnStatement(s);case h._switch:return this.parseSwitchStatement(s);case h._throw:return this.parseThrowStatement(s);case h._try:return this.parseTryStatement(s);case h._const:case h._var:return r=r||this.value,e&&r!=="var"&&this.unexpected(),this.parseVarStatement(s,r);case h._while:return this.parseWhileStatement(s);case h._with:return this.parseWithStatement(s);case h.braceL:return this.parseBlock(!0,s);case h.semi:return this.parseEmptyStatement(s);case h._export:case h._import:if(this.options.ecmaVersion>10&&n===h._import){Jt.lastIndex=this.pos;var a=Jt.exec(this.input),o=this.pos+a[0].length,c=this.input.charCodeAt(o);if(c===40||c===46)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),n===h._import?this.parseImport(s):this.parseExport(s,i);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var u=this.value,l=this.parseExpression();return n===h.name&&l.type==="Identifier"&&this.eat(h.colon)?this.parseLabeledStatement(s,u,l,e):this.parseExpressionStatement(s,l)}};w.parseBreakContinueStatement=function(e,t){var i=t==="break";this.next(),this.eat(h.semi)||this.insertSemicolon()?e.label=null:this.type!==h.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var s=this.labels[n];if((e.label==null||s.name===e.label.name)&&(s.kind!=null&&(i||s.kind==="loop")||e.label&&i))break}return n===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,i?"BreakStatement":"ContinueStatement")};w.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};w.parseDoStatement=function(e){return this.next(),this.labels.push(Xa),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(h._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(h.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};w.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Xa),this.enterScope(0),this.expect(h.parenL),this.type===h.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var i=this.isLet();if(this.type===h._var||this.type===h._const||i){var n=this.startNode(),s=i?"let":this.value;return this.next(),this.parseVar(n,!0,s),this.finishNode(n,"VariableDeclaration"),(this.type===h._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&n.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===h._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,n)):(t>-1&&this.unexpected(t),this.parseFor(e,n))}var r=this.isContextual("let"),a=!1,o=new Qs,c=this.parseExpression(t>-1?"await":!0,o);return this.type===h._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===h._in?t>-1&&this.unexpected(t):e.await=t>-1),r&&a&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,o),this.checkLValPattern(c),this.parseForIn(e,c)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,c))};w.parseFunctionStatement=function(e,t,i){return this.next(),this.parseFunction(e,In|(i?0:Vr),!1,t)};w.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(h._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};w.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(h.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};w.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(h.braceL),this.labels.push(p0),this.enterScope(0);for(var t,i=!1;this.type!==h.braceR;)if(this.type===h._case||this.type===h._default){var n=this.type===h._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),n?t.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,t.test=null),this.expect(h.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};w.parseThrowStatement=function(e){return this.next(),Xt.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var m0=[];w.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===h._catch){var t=this.startNode();if(this.next(),this.eat(h.parenL)){t.param=this.parseBindingAtom();var i=t.param.type==="Identifier";this.enterScope(i?eh:0),this.checkLValPattern(t.param,i?sh:Ue),this.expect(h.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(h._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};w.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")};w.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Xa),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};w.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};w.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};w.parseLabeledStatement=function(e,t,i,n){for(var s=0,r=this.labels;s<r.length;s+=1){var a=r[s];a.name===t&&this.raise(i.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===h._switch?"switch":null,c=this.labels.length-1;c>=0;c--){var u=this.labels[c];if(u.statementStart===e.start)u.statementStart=this.start,u.kind=o;else break}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(n?n.indexOf("label")===-1?n+"label":n:"label"),this.labels.pop(),e.label=i,this.finishNode(e,"LabeledStatement")};w.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};w.parseBlock=function(e,t,i){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(h.braceL),e&&this.enterScope(0);this.type!==h.braceR;){var n=this.parseStatement(null);t.body.push(n)}return i&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};w.parseFor=function(e,t){return e.init=t,this.expect(h.semi),e.test=this.type===h.semi?null:this.parseExpression(),this.expect(h.semi),e.update=this.type===h.parenR?null:this.parseExpression(),this.expect(h.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};w.parseForIn=function(e,t){var i=this.type===h._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!i||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(i?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=i?this.parseExpression():this.parseMaybeAssign(),this.expect(h.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,i?"ForInStatement":"ForOfStatement")};w.parseVar=function(e,t,i){for(e.declarations=[],e.kind=i;;){var n=this.startNode();if(this.parseVarId(n,i),this.eat(h.eq)?n.init=this.parseMaybeAssign(t):i==="const"&&!(this.type===h._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():n.id.type!=="Identifier"&&!(t&&(this.type===h._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):n.init=null,e.declarations.push(this.finishNode(n,"VariableDeclarator")),!this.eat(h.comma))break}return e};w.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?Za:Ue,!1)};var In=1,Vr=2,ah=4;w.parseFunction=function(e,t,i,n,s){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(this.type===h.star&&t&Vr&&this.unexpected(),e.generator=this.eat(h.star)),this.options.ecmaVersion>=8&&(e.async=!!n),t&In&&(e.id=t&ah&&this.type!==h.name?null:this.parseIdent(),e.id&&!(t&Vr)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?Za:Ue:nh));var r=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Qa(e.async,e.generator)),t&In||(e.id=this.type===h.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,i,!1,s),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&In?"FunctionDeclaration":"FunctionExpression")};w.parseFunctionParams=function(e){this.expect(h.parenL),e.params=this.parseBindingList(h.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};w.parseClass=function(e,t){this.next();var i=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var n=this.enterClassBody(),s=this.startNode(),r=!1;for(s.body=[],this.expect(h.braceL);this.type!==h.braceR;){var a=this.parseClassElement(e.superClass!==null);a&&(s.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(r&&this.raise(a.start,"Duplicate constructor in the same class"),r=!0):a.key&&a.key.type==="PrivateIdentifier"&&y0(n,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=i,this.next(),e.body=this.finishNode(s,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};w.parseClassElement=function(e){if(this.eat(h.semi))return null;var t=this.options.ecmaVersion,i=this.startNode(),n="",s=!1,r=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(h.braceL))return this.parseClassStaticBlock(i),i;this.isClassElementNameStart()||this.type===h.star?o=!0:n="static"}if(i.static=o,!n&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===h.star)&&!this.canInsertSemicolon()?r=!0:n="async"),!n&&(t>=9||!r)&&this.eat(h.star)&&(s=!0),!n&&!r&&!s){var c=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=c:n=c)}if(n?(i.computed=!1,i.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),i.key.name=n,this.finishNode(i.key,"Identifier")):this.parseClassElementName(i),t<13||this.type===h.parenL||a!=="method"||s||r){var u=!i.static&&Ts(i,"constructor"),l=u&&e;u&&a!=="method"&&this.raise(i.key.start,"Constructor can't have get/set modifier"),i.kind=u?"constructor":a,this.parseClassMethod(i,s,r,l)}else this.parseClassField(i);return i};w.isClassElementNameStart=function(){return this.type===h.name||this.type===h.privateId||this.type===h.num||this.type===h.string||this.type===h.bracketL||this.type.keyword};w.parseClassElementName=function(e){this.type===h.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};w.parseClassMethod=function(e,t,i,n){var s=e.key;e.kind==="constructor"?(t&&this.raise(s.start,"Constructor can't be a generator"),i&&this.raise(s.start,"Constructor can't be an async method")):e.static&&Ts(e,"prototype")&&this.raise(s.start,"Classes may not have a static property named prototype");var r=e.value=this.parseMethod(t,i,n);return e.kind==="get"&&r.params.length!==0&&this.raiseRecoverable(r.start,"getter should have no params"),e.kind==="set"&&r.params.length!==1&&this.raiseRecoverable(r.start,"setter should have exactly one param"),e.kind==="set"&&r.params[0].type==="RestElement"&&this.raiseRecoverable(r.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};w.parseClassField=function(e){if(Ts(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&Ts(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(h.eq)){var t=this.currentThisScope(),i=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=i}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};w.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(qn|Ka);this.type!==h.braceR;){var i=this.parseStatement(null);e.body.push(i)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};w.parseClassId=function(e,t){this.type===h.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Ue,!1)):(t===!0&&this.unexpected(),e.id=null)};w.parseClassSuper=function(e){e.superClass=this.eat(h._extends)?this.parseExprSubscripts(null,!1):null};w.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};w.exitClassBody=function(){for(var e=this.privateNameStack.pop(),t=e.declared,i=e.used,n=this.privateNameStack.length,s=n===0?null:this.privateNameStack[n-1],r=0;r<i.length;++r){var a=i[r];Wn(t,a.name)||(s?s.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function y0(e,t){var i=t.key.name,n=e[i],s="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(s=(t.static?"s":"i")+t.kind),n==="iget"&&s==="iset"||n==="iset"&&s==="iget"||n==="sget"&&s==="sset"||n==="sset"&&s==="sget"?(e[i]="true",!1):n?!0:(e[i]=s,!1)}function Ts(e,t){var i=e.computed,n=e.key;return!i&&(n.type==="Identifier"&&n.name===t||n.type==="Literal"&&n.value===t)}w.parseExport=function(e,t){if(this.next(),this.eat(h.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==h.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(h._default)){this.checkExport(t,"default",this.lastTokStart);var i;if(this.type===h._function||(i=this.isAsyncFunction())){var n=this.startNode();this.next(),i&&this.next(),e.declaration=this.parseFunction(n,In|ah,!1,i)}else if(this.type===h._class){var s=this.startNode();e.declaration=this.parseClass(s,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==h.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var r=0,a=e.specifiers;r<a.length;r+=1){var o=a[r];this.checkUnreserved(o.local),this.checkLocalExport(o.local),o.local.type==="Literal"&&this.raise(o.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};w.checkExport=function(e,t,i){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),Wn(e,t)&&this.raiseRecoverable(i,"Duplicate export '"+t+"'"),e[t]=!0)};w.checkPatternExport=function(e,t){var i=t.type;if(i==="Identifier")this.checkExport(e,t,t.start);else if(i==="ObjectPattern")for(var n=0,s=t.properties;n<s.length;n+=1){var r=s[n];this.checkPatternExport(e,r)}else if(i==="ArrayPattern")for(var a=0,o=t.elements;a<o.length;a+=1){var c=o[a];c&&this.checkPatternExport(e,c)}else i==="Property"?this.checkPatternExport(e,t.value):i==="AssignmentPattern"?this.checkPatternExport(e,t.left):i==="RestElement"?this.checkPatternExport(e,t.argument):i==="ParenthesizedExpression"&&this.checkPatternExport(e,t.expression)};w.checkVariableExport=function(e,t){if(e)for(var i=0,n=t;i<n.length;i+=1){var s=n[i];this.checkPatternExport(e,s.id)}};w.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};w.parseExportSpecifiers=function(e){var t=[],i=!0;for(this.expect(h.braceL);!this.eat(h.braceR);){if(i)i=!1;else if(this.expect(h.comma),this.afterTrailingComma(h.braceR))break;var n=this.startNode();n.local=this.parseModuleExportName(),n.exported=this.eatContextual("as")?this.parseModuleExportName():n.local,this.checkExport(e,n.exported,n.exported.start),t.push(this.finishNode(n,"ExportSpecifier"))}return t};w.parseImport=function(e){return this.next(),this.type===h.string?(e.specifiers=m0,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===h.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};w.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===h.name){var i=this.startNode();if(i.local=this.parseIdent(),this.checkLValSimple(i.local,Ue),e.push(this.finishNode(i,"ImportDefaultSpecifier")),!this.eat(h.comma))return e}if(this.type===h.star){var n=this.startNode();return this.next(),this.expectContextual("as"),n.local=this.parseIdent(),this.checkLValSimple(n.local,Ue),e.push(this.finishNode(n,"ImportNamespaceSpecifier")),e}for(this.expect(h.braceL);!this.eat(h.braceR);){if(t)t=!1;else if(this.expect(h.comma),this.afterTrailingComma(h.braceR))break;var s=this.startNode();s.imported=this.parseModuleExportName(),this.eatContextual("as")?s.local=this.parseIdent():(this.checkUnreserved(s.imported),s.local=s.imported),this.checkLValSimple(s.local,Ue),e.push(this.finishNode(s,"ImportSpecifier"))}return e};w.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===h.string){var e=this.parseLiteral(this.value);return l0.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};w.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};w.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var ue=dt.prototype;ue.toAssignable=function(e,t,i){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var n=0,s=e.properties;n<s.length;n+=1){var r=s[n];this.toAssignable(r,t),r.type==="RestElement"&&(r.argument.type==="ArrayPattern"||r.argument.type==="ObjectPattern")&&this.raise(r.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,i);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return e};ue.toAssignableList=function(e,t){for(var i=e.length,n=0;n<i;n++){var s=e[n];s&&this.toAssignable(s,t)}if(i){var r=e[i-1];this.options.ecmaVersion===6&&t&&r&&r.type==="RestElement"&&r.argument.type!=="Identifier"&&this.unexpected(r.argument.start)}return e};ue.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};ue.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==h.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};ue.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case h.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(h.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case h.braceL:return this.parseObj(!0)}return this.parseIdent()};ue.parseBindingList=function(e,t,i){for(var n=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(h.comma),t&&this.type===h.comma)n.push(null);else{if(i&&this.afterTrailingComma(e))break;if(this.type===h.ellipsis){var r=this.parseRestBinding();this.parseBindingListItem(r),n.push(r),this.type===h.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else{var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),n.push(a)}}return n};ue.parseBindingListItem=function(e){return e};ue.parseMaybeDefault=function(e,t,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(h.eq))return i;var n=this.startNodeAt(e,t);return n.left=i,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")};ue.checkLValSimple=function(e,t,i){t===void 0&&(t=ks);var n=t!==ks;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(n?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(t===Ue&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),i&&(Wn(i,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),i[e.name]=!0),t!==rh&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":n&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return n&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,i);default:this.raise(e.start,(n?"Binding":"Assigning to")+" rvalue")}};ue.checkLValPattern=function(e,t,i){switch(t===void 0&&(t=ks),e.type){case"ObjectPattern":for(var n=0,s=e.properties;n<s.length;n+=1){var r=s[n];this.checkLValInnerPattern(r,t,i)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var c=o[a];c&&this.checkLValInnerPattern(c,t,i)}break;default:this.checkLValSimple(e,t,i)}};ue.checkLValInnerPattern=function(e,t,i){switch(t===void 0&&(t=ks),e.type){case"Property":this.checkLValInnerPattern(e.value,t,i);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,i);break;case"RestElement":this.checkLValPattern(e.argument,t,i);break;default:this.checkLValPattern(e,t,i)}};var te=function(t,i,n,s,r){this.token=t,this.isExpr=!!i,this.preserveSpace=!!n,this.override=s,this.generator=!!r},it={b_stat:new te("{",!1),b_expr:new te("{",!0),b_tmpl:new te("${",!1),p_stat:new te("(",!1),p_expr:new te("(",!0),q_tmpl:new te("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new te("function",!1),f_expr:new te("function",!0),f_expr_gen:new te("function",!0,!1,null,!0),f_gen:new te("function",!1,!1,null,!0)},fn=dt.prototype;fn.initialContext=function(){return[it.b_stat]};fn.curContext=function(){return this.context[this.context.length-1]};fn.braceIsBlock=function(e){var t=this.curContext();return t===it.f_expr||t===it.f_stat?!0:e===h.colon&&(t===it.b_stat||t===it.b_expr)?!t.isExpr:e===h._return||e===h.name&&this.exprAllowed?Xt.test(this.input.slice(this.lastTokEnd,this.start)):e===h._else||e===h.semi||e===h.eof||e===h.parenR||e===h.arrow?!0:e===h.braceL?t===it.b_stat:e===h._var||e===h._const||e===h.name?!1:!this.exprAllowed};fn.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};fn.updateContext=function(e){var t,i=this.type;i.keyword&&e===h.dot?this.exprAllowed=!1:(t=i.updateContext)?t.call(this,e):this.exprAllowed=i.beforeExpr};fn.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};h.parenR.updateContext=h.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===it.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};h.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?it.b_stat:it.b_expr),this.exprAllowed=!0};h.dollarBraceL.updateContext=function(){this.context.push(it.b_tmpl),this.exprAllowed=!0};h.parenL.updateContext=function(e){var t=e===h._if||e===h._for||e===h._with||e===h._while;this.context.push(t?it.p_stat:it.p_expr),this.exprAllowed=!0};h.incDec.updateContext=function(){};h._function.updateContext=h._class.updateContext=function(e){e.beforeExpr&&e!==h._else&&!(e===h.semi&&this.curContext()!==it.p_stat)&&!(e===h._return&&Xt.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===h.colon||e===h.braceL)&&this.curContext()===it.b_stat)?this.context.push(it.f_expr):this.context.push(it.f_stat),this.exprAllowed=!1};h.backQuote.updateContext=function(){this.curContext()===it.q_tmpl?this.context.pop():this.context.push(it.q_tmpl),this.exprAllowed=!1};h.star.updateContext=function(e){if(e===h._function){var t=this.context.length-1;this.context[t]===it.f_expr?this.context[t]=it.f_expr_gen:this.context[t]=it.f_gen}this.exprAllowed=!0};h.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==h.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var L=dt.prototype;L.checkPropClash=function(e,t,i){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var n=e.key,s;switch(n.type){case"Identifier":s=n.name;break;case"Literal":s=String(n.value);break;default:return}var r=e.kind;if(this.options.ecmaVersion>=6){s==="__proto__"&&r==="init"&&(t.proto&&(i?i.doubleProto<0&&(i.doubleProto=n.start):this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),t.proto=!0);return}s="$"+s;var a=t[s];if(a){var o;r==="init"?o=this.strict&&a.init||a.get||a.set:o=a.init||a[r],o&&this.raiseRecoverable(n.start,"Redefinition of property")}else a=t[s]={init:!1,get:!1,set:!1};a[r]=!0}};L.parseExpression=function(e,t){var i=this.start,n=this.startLoc,s=this.parseMaybeAssign(e,t);if(this.type===h.comma){var r=this.startNodeAt(i,n);for(r.expressions=[s];this.eat(h.comma);)r.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(r,"SequenceExpression")}return s};L.parseMaybeAssign=function(e,t,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var n=!1,s=-1,r=-1,a=-1;t?(s=t.parenthesizedAssign,r=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new Qs,n=!0);var o=this.start,c=this.startLoc;(this.type===h.parenL||this.type===h.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var u=this.parseMaybeConditional(e,t);if(i&&(u=i.call(this,u,o,c)),this.type.isAssign){var l=this.startNodeAt(o,c);return l.operator=this.value,this.type===h.eq&&(u=this.toAssignable(u,!1,t)),n||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===h.eq?this.checkLValPattern(u):this.checkLValSimple(u),l.left=u,this.next(),l.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(l,"AssignmentExpression")}else n&&this.checkExpressionErrors(t,!0);return s>-1&&(t.parenthesizedAssign=s),r>-1&&(t.trailingComma=r),u};L.parseMaybeConditional=function(e,t){var i=this.start,n=this.startLoc,s=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return s;if(this.eat(h.question)){var r=this.startNodeAt(i,n);return r.test=s,r.consequent=this.parseMaybeAssign(),this.expect(h.colon),r.alternate=this.parseMaybeAssign(e),this.finishNode(r,"ConditionalExpression")}return s};L.parseExprOps=function(e,t){var i=this.start,n=this.startLoc,s=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||s.start===i&&s.type==="ArrowFunctionExpression"?s:this.parseExprOp(s,i,n,-1,e)};L.parseExprOp=function(e,t,i,n,s){var r=this.type.binop;if(r!=null&&(!s||this.type!==h._in)&&r>n){var a=this.type===h.logicalOR||this.type===h.logicalAND,o=this.type===h.coalesce;o&&(r=h.logicalAND.binop);var c=this.value;this.next();var u=this.start,l=this.startLoc,p=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,s),u,l,r,s),d=this.buildBinary(t,i,e,p,c,a||o);return(a&&this.type===h.coalesce||o&&(this.type===h.logicalOR||this.type===h.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,i,n,s)}return e};L.buildBinary=function(e,t,i,n,s,r){n.type==="PrivateIdentifier"&&this.raise(n.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=i,a.operator=s,a.right=n,this.finishNode(a,r?"LogicalExpression":"BinaryExpression")};L.parseMaybeUnary=function(e,t,i,n){var s=this.start,r=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(n),t=!0;else if(this.type.prefix){var o=this.startNode(),c=this.type===h.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,c,n),this.checkExpressionErrors(e,!0),c?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&o.argument.type==="Identifier"?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&oh(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,a=this.finishNode(o,c?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===h.privateId)(n||this.privateNameStack.length===0)&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==h._in&&this.unexpected();else{if(a=this.parseExprSubscripts(e,n),this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(s,r);u.operator=this.value,u.prefix=!1,u.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(u,"UpdateExpression")}}if(!i&&this.eat(h.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(s,r,a,this.parseMaybeUnary(null,!1,!1,n),"**",!1);else return a};function oh(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&oh(e.expression)}L.parseExprSubscripts=function(e,t){var i=this.start,n=this.startLoc,s=this.parseExprAtom(e,t);if(s.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return s;var r=this.parseSubscripts(s,i,n,!1,t);return e&&r.type==="MemberExpression"&&(e.parenthesizedAssign>=r.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=r.start&&(e.parenthesizedBind=-1),e.trailingComma>=r.start&&(e.trailingComma=-1)),r};L.parseSubscripts=function(e,t,i,n,s){for(var r=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,i,n,r,a,s);if(o.optional&&(a=!0),o===e||o.type==="ArrowFunctionExpression"){if(a){var c=this.startNodeAt(t,i);c.expression=o,o=this.finishNode(c,"ChainExpression")}return o}e=o}};L.parseSubscript=function(e,t,i,n,s,r,a){var o=this.options.ecmaVersion>=11,c=o&&this.eat(h.questionDot);n&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(h.bracketL);if(u||c&&this.type!==h.parenL&&this.type!==h.backQuote||this.eat(h.dot)){var l=this.startNodeAt(t,i);l.object=e,u?(l.property=this.parseExpression(),this.expect(h.bracketR)):this.type===h.privateId&&e.type!=="Super"?l.property=this.parsePrivateIdent():l.property=this.parseIdent(this.options.allowReserved!=="never"),l.computed=!!u,o&&(l.optional=c),e=this.finishNode(l,"MemberExpression")}else if(!n&&this.eat(h.parenL)){var p=new Qs,d=this.yieldPos,m=this.awaitPos,y=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(h.parenR,this.options.ecmaVersion>=8,!1,p);if(s&&!c&&!this.canInsertSemicolon()&&this.eat(h.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=m,this.awaitIdentPos=y,this.parseArrowExpression(this.startNodeAt(t,i),g,!0,a);this.checkExpressionErrors(p,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=m||this.awaitPos,this.awaitIdentPos=y||this.awaitIdentPos;var _=this.startNodeAt(t,i);_.callee=e,_.arguments=g,o&&(_.optional=c),e=this.finishNode(_,"CallExpression")}else if(this.type===h.backQuote){(c||r)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var v=this.startNodeAt(t,i);v.tag=e,v.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(v,"TaggedTemplateExpression")}return e};L.parseExprAtom=function(e,t){this.type===h.slash&&this.readRegexp();var i,n=this.potentialArrowAt===this.start;switch(this.type){case h._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),i=this.startNode(),this.next(),this.type===h.parenL&&!this.allowDirectSuper&&this.raise(i.start,"super() call outside constructor of a subclass"),this.type!==h.dot&&this.type!==h.bracketL&&this.type!==h.parenL&&this.unexpected(),this.finishNode(i,"Super");case h._this:return i=this.startNode(),this.next(),this.finishNode(i,"ThisExpression");case h.name:var s=this.start,r=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&o.name==="async"&&!this.canInsertSemicolon()&&this.eat(h._function))return this.overrideContext(it.f_expr),this.parseFunction(this.startNodeAt(s,r),0,!1,!0,t);if(n&&!this.canInsertSemicolon()){if(this.eat(h.arrow))return this.parseArrowExpression(this.startNodeAt(s,r),[o],!1,t);if(this.options.ecmaVersion>=8&&o.name==="async"&&this.type===h.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return o=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(h.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,r),[o],!0,t)}return o;case h.regexp:var c=this.value;return i=this.parseLiteral(c.value),i.regex={pattern:c.pattern,flags:c.flags},i;case h.num:case h.string:return this.parseLiteral(this.value);case h._null:case h._true:case h._false:return i=this.startNode(),i.value=this.type===h._null?null:this.type===h._true,i.raw=this.type.keyword,this.next(),this.finishNode(i,"Literal");case h.parenL:var u=this.start,l=this.parseParenAndDistinguishExpression(n,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(e.parenthesizedAssign=u),e.parenthesizedBind<0&&(e.parenthesizedBind=u)),l;case h.bracketL:return i=this.startNode(),this.next(),i.elements=this.parseExprList(h.bracketR,!0,!0,e),this.finishNode(i,"ArrayExpression");case h.braceL:return this.overrideContext(it.b_expr),this.parseObj(!1,e);case h._function:return i=this.startNode(),this.next(),this.parseFunction(i,0);case h._class:return this.parseClass(this.startNode(),!1);case h._new:return this.parseNew();case h.backQuote:return this.parseTemplate();case h._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}};L.parseExprImport=function(){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var t=this.parseIdent(!0);switch(this.type){case h.parenL:return this.parseDynamicImport(e);case h.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected()}};L.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(h.parenR)){var t=this.start;this.eat(h.comma)&&this.eat(h.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};L.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};L.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};L.parseParenExpression=function(){this.expect(h.parenL);var e=this.parseExpression();return this.expect(h.parenR),e};L.parseParenAndDistinguishExpression=function(e,t){var i=this.start,n=this.startLoc,s,r=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,o=this.startLoc,c=[],u=!0,l=!1,p=new Qs,d=this.yieldPos,m=this.awaitPos,y;for(this.yieldPos=0,this.awaitPos=0;this.type!==h.parenR;)if(u?u=!1:this.expect(h.comma),r&&this.afterTrailingComma(h.parenR,!0)){l=!0;break}else if(this.type===h.ellipsis){y=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===h.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else c.push(this.parseMaybeAssign(!1,p,this.parseParenItem));var g=this.lastTokEnd,_=this.lastTokEndLoc;if(this.expect(h.parenR),e&&!this.canInsertSemicolon()&&this.eat(h.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=m,this.parseParenArrowList(i,n,c,t);(!c.length||l)&&this.unexpected(this.lastTokStart),y&&this.unexpected(y),this.checkExpressionErrors(p,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=m||this.awaitPos,c.length>1?(s=this.startNodeAt(a,o),s.expressions=c,this.finishNodeAt(s,"SequenceExpression",g,_)):s=c[0]}else s=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(i,n);return v.expression=s,this.finishNode(v,"ParenthesizedExpression")}else return s};L.parseParenItem=function(e){return e};L.parseParenArrowList=function(e,t,i,n){return this.parseArrowExpression(this.startNodeAt(e,t),i,!1,n)};var g0=[];L.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(h.dot)){e.meta=t;var i=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),i&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var n=this.start,s=this.startLoc,r=this.type===h._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),n,s,!0,!1),r&&e.callee.type==="ImportExpression"&&this.raise(n,"Cannot use new with import()"),this.eat(h.parenL)?e.arguments=this.parseExprList(h.parenR,this.options.ecmaVersion>=8,!1):e.arguments=g0,this.finishNode(e,"NewExpression")};L.parseTemplateElement=function(e){var t=e.isTagged,i=this.startNode();return this.type===h.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),i.tail=this.type===h.backQuote,this.finishNode(i,"TemplateElement")};L.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var i=this.startNode();this.next(),i.expressions=[];var n=this.parseTemplateElement({isTagged:t});for(i.quasis=[n];!n.tail;)this.type===h.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(h.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(h.braceR),i.quasis.push(n=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(i,"TemplateLiteral")};L.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===h.name||this.type===h.num||this.type===h.string||this.type===h.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===h.star)&&!Xt.test(this.input.slice(this.lastTokEnd,this.start))};L.parseObj=function(e,t){var i=this.startNode(),n=!0,s={};for(i.properties=[],this.next();!this.eat(h.braceR);){if(n)n=!1;else if(this.expect(h.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(h.braceR))break;var r=this.parseProperty(e,t);e||this.checkPropClash(r,s,t),i.properties.push(r)}return this.finishNode(i,e?"ObjectPattern":"ObjectExpression")};L.parseProperty=function(e,t){var i=this.startNode(),n,s,r,a;if(this.options.ecmaVersion>=9&&this.eat(h.ellipsis))return e?(i.argument=this.parseIdent(!1),this.type===h.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(i,"RestElement")):(i.argument=this.parseMaybeAssign(!1,t),this.type===h.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(i,"SpreadElement"));this.options.ecmaVersion>=6&&(i.method=!1,i.shorthand=!1,(e||t)&&(r=this.start,a=this.startLoc),e||(n=this.eat(h.star)));var o=this.containsEsc;return this.parsePropertyName(i),!e&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(i)?(s=!0,n=this.options.ecmaVersion>=9&&this.eat(h.star),this.parsePropertyName(i)):s=!1,this.parsePropertyValue(i,e,n,s,r,a,t,o),this.finishNode(i,"Property")};L.parsePropertyValue=function(e,t,i,n,s,r,a,o){if((i||n)&&this.type===h.colon&&this.unexpected(),this.eat(h.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===h.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(i,n);else if(!t&&!o&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==h.comma&&this.type!==h.braceR&&this.type!==h.eq){(i||n)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var c=e.kind==="get"?0:1;if(e.value.params.length!==c){var u=e.value.start;e.kind==="get"?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((i||n)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=s),e.kind="init",t?e.value=this.parseMaybeDefault(s,r,this.copyNode(e.key)):this.type===h.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(s,r,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};L.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(h.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(h.bracketR),e.key;e.computed=!1}return e.key=this.type===h.num||this.type===h.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};L.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};L.parseMethod=function(e,t,i){var n=this.startNode(),s=this.yieldPos,r=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=e),this.options.ecmaVersion>=8&&(n.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Qa(t,n.generator)|Ka|(i?ih:0)),this.expect(h.parenL),n.params=this.parseBindingList(h.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0,!1),this.yieldPos=s,this.awaitPos=r,this.awaitIdentPos=a,this.finishNode(n,"FunctionExpression")};L.parseArrowExpression=function(e,t,i,n){var s=this.yieldPos,r=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(Qa(i,!1)|th),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,n),this.yieldPos=s,this.awaitPos=r,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")};L.parseFunctionBody=function(e,t,i,n){var s=t&&this.type!==h.braceL,r=this.strict,a=!1;if(s)e.body=this.parseMaybeAssign(n),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!r||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var c=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!r&&!a&&!t&&!i&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,rh),e.body=this.parseBlock(!1,void 0,a&&!r),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=c}this.exitScope()};L.isSimpleParamList=function(e){for(var t=0,i=e;t<i.length;t+=1){var n=i[t];if(n.type!=="Identifier")return!1}return!0};L.checkParams=function(e,t){for(var i=Object.create(null),n=0,s=e.params;n<s.length;n+=1){var r=s[n];this.checkLValInnerPattern(r,Za,t?null:i)}};L.parseExprList=function(e,t,i,n){for(var s=[],r=!0;!this.eat(e);){if(r)r=!1;else if(this.expect(h.comma),t&&this.afterTrailingComma(e))break;var a=void 0;i&&this.type===h.comma?a=null:this.type===h.ellipsis?(a=this.parseSpread(n),n&&this.type===h.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):a=this.parseMaybeAssign(!1,n),s.push(a)}return s};L.checkUnreserved=function(e){var t=e.start,i=e.end,n=e.name;if(this.inGenerator&&n==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&n==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&n==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(n==="arguments"||n==="await")&&this.raise(t,"Cannot use "+n+" in class static initialization block"),this.keywords.test(n)&&this.raise(t,"Unexpected keyword '"+n+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,i).indexOf("\\")!==-1)){var s=this.strict?this.reservedWordsStrict:this.reservedWords;s.test(n)&&(!this.inAsync&&n==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+n+"' is reserved"))}};L.parseIdent=function(e){var t=this.startNode();return this.type===h.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,(t.name==="class"||t.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};L.parsePrivateIdent=function(){var e=this.startNode();return this.type===h.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e),e};L.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===h.semi||this.canInsertSemicolon()||this.type!==h.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(h.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};L.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var Bs=dt.prototype;Bs.raise=function(e,t){var i=Zl(this.input,e);t+=" ("+i.line+":"+i.column+")";var n=new SyntaxError(t);throw n.pos=e,n.loc=i,n.raisedAt=this.pos,n};Bs.raiseRecoverable=Bs.raise;Bs.curPosition=function(){if(this.options.locations)return new Bn(this.curLine,this.pos-this.lineStart)};var mi=dt.prototype,_0=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};mi.enterScope=function(e){this.scopeStack.push(new _0(e))};mi.exitScope=function(){this.scopeStack.pop()};mi.treatFunctionsAsVarInScope=function(e){return e.flags&hn||!this.inModule&&e.flags&Nn};mi.declareName=function(e,t,i){var n=!1;if(t===Ue){var s=this.currentScope();n=s.lexical.indexOf(e)>-1||s.functions.indexOf(e)>-1||s.var.indexOf(e)>-1,s.lexical.push(e),this.inModule&&s.flags&Nn&&delete this.undefinedExports[e]}else if(t===sh){var r=this.currentScope();r.lexical.push(e)}else if(t===nh){var a=this.currentScope();this.treatFunctionsAsVar?n=a.lexical.indexOf(e)>-1:n=a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var c=this.scopeStack[o];if(c.lexical.indexOf(e)>-1&&!(c.flags&eh&&c.lexical[0]===e)||!this.treatFunctionsAsVarInScope(c)&&c.functions.indexOf(e)>-1){n=!0;break}if(c.var.push(e),this.inModule&&c.flags&Nn&&delete this.undefinedExports[e],c.flags&Ja)break}n&&this.raiseRecoverable(i,"Identifier '"+e+"' has already been declared")};mi.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};mi.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};mi.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Ja)return t}};mi.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Ja&&!(t.flags&th))return t}};var Zs=function(t,i,n){this.type="",this.start=i,this.end=0,t.options.locations&&(this.loc=new Js(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[i,0])},Yn=dt.prototype;Yn.startNode=function(){return new Zs(this,this.start,this.startLoc)};Yn.startNodeAt=function(e,t){return new Zs(this,e,t)};function ch(e,t,i,n){return e.type=t,e.end=i,this.options.locations&&(e.loc.end=n),this.options.ranges&&(e.range[1]=i),e}Yn.finishNode=function(e,t){return ch.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};Yn.finishNodeAt=function(e,t,i,n){return ch.call(this,e,t,i,n)};Yn.copyNode=function(e){var t=new Zs(this,e.start,this.startLoc);for(var i in e)t[i]=e[i];return t};var uh="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",lh=uh+" Extended_Pictographic",hh=lh,fh=hh+" EBase EComp EMod EPres ExtPict",dh=fh,b0=dh,v0={9:uh,10:lh,11:hh,12:fh,13:dh,14:b0},Jo="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ph="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",mh=ph+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",yh=mh+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",gh=yh+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",_h=gh+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",w0=_h+" Kawi Nag_Mundari Nagm",x0={9:ph,10:mh,11:yh,12:gh,13:_h,14:w0},bh={};function S0(e){var t=bh[e]={binary:Ci(v0[e]+" "+Jo),nonBinary:{General_Category:Ci(Jo),Script:Ci(x0[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var yr=0,Qo=[9,10,11,12,13,14];yr<Qo.length;yr+=1){var I0=Qo[yr];S0(I0)}var b=dt.prototype,Ke=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":""),this.unicodeProperties=bh[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Ke.prototype.reset=function(t,i,n){var s=n.indexOf("u")!==-1;this.start=t|0,this.source=i+"",this.flags=n,this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchN=s&&this.parser.options.ecmaVersion>=9};Ke.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Ke.prototype.at=function(t,i){i===void 0&&(i=!1);var n=this.source,s=n.length;if(t>=s)return-1;var r=n.charCodeAt(t);if(!(i||this.switchU)||r<=55295||r>=57344||t+1>=s)return r;var a=n.charCodeAt(t+1);return a>=56320&&a<=57343?(r<<10)+a-56613888:r};Ke.prototype.nextIndex=function(t,i){i===void 0&&(i=!1);var n=this.source,s=n.length;if(t>=s)return s;var r=n.charCodeAt(t),a;return!(i||this.switchU)||r<=55295||r>=57344||t+1>=s||(a=n.charCodeAt(t+1))<56320||a>57343?t+1:t+2};Ke.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Ke.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Ke.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Ke.prototype.eat=function(t,i){return i===void 0&&(i=!1),this.current(i)===t?(this.advance(i),!0):!1};b.validateRegExpFlags=function(e){for(var t=e.validFlags,i=e.flags,n=0;n<i.length;n++){var s=i.charAt(n);t.indexOf(s)===-1&&this.raise(e.start,"Invalid regular expression flag"),i.indexOf(s,n+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}};b.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};b.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,i=e.backReferenceNames;t<i.length;t+=1){var n=i[t];e.groupNames.indexOf(n)===-1&&e.raise("Invalid named capture referenced")}};b.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};b.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};b.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};b.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!i,!0}return e.pos=t,!1};b.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};b.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};b.regexp_eatBracedQuantifier=function(e,t){var i=e.pos;if(e.eat(123)){var n=0,s=-1;if(this.regexp_eatDecimalDigits(e)&&(n=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(s=e.lastIntValue),e.eat(125)))return s!==-1&&s<n&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=i}return!1};b.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};b.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};b.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};b.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};b.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};b.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};b.regexp_eatSyntaxCharacter=function(e){var t=e.current();return vh(t)?(e.lastIntValue=t,e.advance(),!0):!1};function vh(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}b.regexp_eatPatternCharacters=function(e){for(var t=e.pos,i=0;(i=e.current())!==-1&&!vh(i);)e.advance();return e.pos!==t};b.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};b.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};b.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};b.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ci(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ci(e.lastIntValue);return!0}return!1};b.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,i=this.options.ecmaVersion>=11,n=e.current(i);return e.advance(i),n===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,i)&&(n=e.lastIntValue),A0(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)};function A0(e){return qe(e,!0)||e===36||e===95}b.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,i=this.options.ecmaVersion>=11,n=e.current(i);return e.advance(i),n===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,i)&&(n=e.lastIntValue),C0(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)};function C0(e){return en(e,!0)||e===36||e===95||e===8204||e===8205}b.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};b.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var i=e.lastIntValue;if(e.switchU)return i>e.maxBackReference&&(e.maxBackReference=i),!0;if(i<=e.numCapturingParens)return!0;e.pos=t}return!1};b.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};b.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};b.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};b.regexp_eatZero=function(e){return e.current()===48&&!Xs(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};b.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};b.regexp_eatControlLetter=function(e){var t=e.current();return wh(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function wh(e){return e>=65&&e<=90||e>=97&&e<=122}b.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var i=e.pos,n=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var s=e.lastIntValue;if(n&&s>=55296&&s<=56319){var r=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=(s-55296)*1024+(a-56320)+65536,!0}e.pos=r,e.lastIntValue=s}return!0}if(n&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&E0(e.lastIntValue))return!0;n&&e.raise("Invalid unicode escape"),e.pos=i}return!1};function E0(e){return e>=0&&e<=1114111}b.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};b.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};b.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(O0(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(t===80||t===112)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1};function O0(e){return e===100||e===68||e===115||e===83||e===119||e===87}b.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var i=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var n=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,i,n),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var s=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,s),!0}return!1};b.regexp_validateUnicodePropertyNameAndValue=function(e,t,i){Wn(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(i)||e.raise("Invalid property value")};b.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")};b.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";xh(t=e.current());)e.lastStringValue+=ci(t),e.advance();return e.lastStringValue!==""};function xh(e){return wh(e)||e===95}b.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";k0(t=e.current());)e.lastStringValue+=ci(t),e.advance();return e.lastStringValue!==""};function k0(e){return xh(e)||Xs(e)}b.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};b.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1};b.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var i=e.lastIntValue;e.switchU&&(t===-1||i===-1)&&e.raise("Invalid character class"),t!==-1&&i!==-1&&t>i&&e.raise("Range out of order in character class")}}};b.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var i=e.current();(i===99||Ah(i))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var n=e.current();return n!==93?(e.lastIntValue=n,e.advance(),!0):!1};b.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};b.regexp_eatClassControlLetter=function(e){var t=e.current();return Xs(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};b.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};b.regexp_eatDecimalDigits=function(e){var t=e.pos,i=0;for(e.lastIntValue=0;Xs(i=e.current());)e.lastIntValue=10*e.lastIntValue+(i-48),e.advance();return e.pos!==t};function Xs(e){return e>=48&&e<=57}b.regexp_eatHexDigits=function(e){var t=e.pos,i=0;for(e.lastIntValue=0;Sh(i=e.current());)e.lastIntValue=16*e.lastIntValue+Ih(i),e.advance();return e.pos!==t};function Sh(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Ih(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}b.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var i=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+i*8+e.lastIntValue:e.lastIntValue=t*8+i}else e.lastIntValue=t;return!0}return!1};b.regexp_eatOctalDigit=function(e){var t=e.current();return Ah(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function Ah(e){return e>=48&&e<=55}b.regexp_eatFixedHexDigits=function(e,t){var i=e.pos;e.lastIntValue=0;for(var n=0;n<t;++n){var s=e.current();if(!Sh(s))return e.pos=i,!1;e.lastIntValue=16*e.lastIntValue+Ih(s),e.advance()}return!0};var to=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new Js(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},D=dt.prototype;D.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new to(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};D.getToken=function(){return this.next(),new to(this)};typeof Symbol<"u"&&(D[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===h.eof,value:t}}}});D.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(h.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};D.readToken=function(e){return qe(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};D.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};D.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(i===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(var n=void 0,s=t;(n=Kl(this.input,s,this.pos))>-1;)++this.curLine,s=this.lineStart=n;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,i),t,this.pos,e,this.curPosition())};D.skipLineComment=function(e){for(var t=this.pos,i=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!ln(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,i,this.curPosition())};D.skipSpace=function(){t:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(e>8&&e<14||e>=5760&&Jl.test(String.fromCharCode(e)))++this.pos;else break t}}};D.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=e,this.value=t,this.updateContext(i)};D.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(h.ellipsis)):(++this.pos,this.finishToken(h.dot))};D.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(h.assign,2):this.finishOp(h.slash,1)};D.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),i=1,n=e===42?h.star:h.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++i,n=h.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(h.assign,i+1):this.finishOp(n,i)};D.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(h.assign,3)}return this.finishOp(e===124?h.logicalOR:h.logicalAND,2)}return t===61?this.finishOp(h.assign,2):this.finishOp(e===124?h.bitwiseOR:h.bitwiseAND,1)};D.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(h.assign,2):this.finishOp(h.bitwiseXOR,1)};D.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Xt.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(h.incDec,2):t===61?this.finishOp(h.assign,2):this.finishOp(h.plusMin,1)};D.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),i=1;return t===e?(i=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+i)===61?this.finishOp(h.assign,i+1):this.finishOp(h.bitShift,i)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(i=2),this.finishOp(h.relational,i))};D.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(h.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(h.arrow)):this.finishOp(e===61?h.eq:h.prefix,1)};D.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var i=this.input.charCodeAt(this.pos+2);if(i<48||i>57)return this.finishOp(h.questionDot,2)}if(t===63){if(e>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(h.assign,3)}return this.finishOp(h.coalesce,2)}}return this.finishOp(h.question,1)};D.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),qe(t,!0)||t===92))return this.finishToken(h.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+ci(t)+"'")};D.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(h.parenL);case 41:return++this.pos,this.finishToken(h.parenR);case 59:return++this.pos,this.finishToken(h.semi);case 44:return++this.pos,this.finishToken(h.comma);case 91:return++this.pos,this.finishToken(h.bracketL);case 93:return++this.pos,this.finishToken(h.bracketR);case 123:return++this.pos,this.finishToken(h.braceL);case 125:return++this.pos,this.finishToken(h.braceR);case 58:return++this.pos,this.finishToken(h.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(h.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(h.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+ci(e)+"'")};D.finishOp=function(e,t){var i=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,i)};D.readRegexp=function(){for(var e,t,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(Xt.test(n)&&this.raise(i,"Unterminated regular expression"),e)e=!1;else{if(n==="[")t=!0;else if(n==="]"&&t)t=!1;else if(n==="/"&&!t)break;e=n==="\\"}++this.pos}var s=this.input.slice(i,this.pos);++this.pos;var r=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(r);var o=this.regexpState||(this.regexpState=new Ke(this));o.reset(i,s,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var c=null;try{c=new RegExp(s,a)}catch{}return this.finishToken(h.regexp,{pattern:s,flags:a,value:c})};D.readInt=function(e,t,i){for(var n=this.options.ecmaVersion>=12&&t===void 0,s=i&&this.input.charCodeAt(this.pos)===48,r=this.pos,a=0,o=0,c=0,u=t??1/0;c<u;++c,++this.pos){var l=this.input.charCodeAt(this.pos),p=void 0;if(n&&l===95){s&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),c===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=l;continue}if(l>=97?p=l-97+10:l>=65?p=l-65+10:l>=48&&l<=57?p=l-48:p=1/0,p>=e)break;o=l,a=a*e+p}return n&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===r||t!=null&&this.pos-r!==t?null:a};function T0(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function Ch(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}D.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var i=this.readInt(e);return i==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(i=Ch(this.input.slice(t,this.pos)),++this.pos):qe(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(h.num,i)};D.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var i=this.pos-t>=2&&this.input.charCodeAt(t)===48;i&&this.strict&&this.raise(t,"Invalid number");var n=this.input.charCodeAt(this.pos);if(!i&&!e&&this.options.ecmaVersion>=11&&n===110){var s=Ch(this.input.slice(t,this.pos));return++this.pos,qe(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(h.num,s)}i&&/[89]/.test(this.input.slice(t,this.pos))&&(i=!1),n===46&&!i&&(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),(n===69||n===101)&&!i&&(n=this.input.charCodeAt(++this.pos),(n===43||n===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),qe(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var r=T0(this.input.slice(t,this.pos),i);return this.finishToken(h.num,r)};D.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var i=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(i,"Code point out of bounds")}else t=this.readHexChar(4);return t};D.readString=function(e){for(var t="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===e)break;n===92?(t+=this.input.slice(i,this.pos),t+=this.readEscapedChar(!1),i=this.pos):n===8232||n===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(ln(n)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(i,this.pos++),this.finishToken(h.string,t)};var Eh={};D.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===Eh)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};D.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Eh;this.raise(e,t)};D.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(i===96||i===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===h.template||this.type===h.invalidTemplate)?i===36?(this.pos+=2,this.finishToken(h.dollarBraceL)):(++this.pos,this.finishToken(h.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(h.template,e));if(i===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(ln(i)){switch(e+=this.input.slice(t,this.pos),++this.pos,i){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(i);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};D.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(h.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};D.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ci(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var i=this.pos-1;this.invalidStringToken(i,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],s=parseInt(n,8);return s>255&&(n=n.slice(0,-1),s=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),(n!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(s)}return ln(t)?"":String.fromCharCode(t)}};D.readHexChar=function(e){var t=this.pos,i=this.readInt(16,e);return i===null&&this.invalidStringToken(t,"Bad character escape sequence"),i};D.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,i=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var s=this.fullCharCodeAtPos();if(en(s,n))this.pos+=s<=65535?1:2;else if(s===92){this.containsEsc=!0,e+=this.input.slice(i,this.pos);var r=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?qe:en)(a,n)||this.invalidStringToken(r,"Invalid Unicode escape"),e+=ci(a),i=this.pos}else break;t=!1}return e+this.input.slice(i,this.pos)};D.readWord=function(){var e=this.readWord1(),t=h.name;return this.keywords.test(e)&&(t=Ga[e]),this.finishToken(t,e)};var B0="8.8.2";dt.acorn={Parser:dt,version:B0,defaultOptions:Rr,Position:Bn,SourceLocation:Js,getLineInfo:Zl,Node:Zs,TokenType:$,tokTypes:h,keywordTypes:Ga,TokContext:te,tokContexts:it,isIdentifierChar:en,isIdentifierStart:qe,Token:to,isNewLine:ln,lineBreak:Xt,lineBreakG:o0,nonASCIIwhitespace:Jl};function N0(e,t){return dt.parse(e,t)}const eo={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},F0={ecmaVersion:11},Zo="$",L0="d",M0="d1",D0="d2",yt=e=>(t,i)=>i.error(t,e+" not allowed"),R0=yt("Aggregate function"),V0=yt("Window function"),P0="Invalid argument",io="Invalid column reference",U0=io+" (must be input to an aggregate function)",Oh="Invalid function call",j0="Invalid member expression",$0="Invalid operator parameter",z0="Invalid param reference",W0="Invalid variable reference",q0="Variable not accessible in operator call",Y0="Unsupported variable declaration",G0="Unsupported destructuring pattern",kh="Table expressions do not support closures",Th="Use aq.escape(fn) to use a function as-is (including closures)",H0="use table.params({ name: value }) to define dynamic parameters",K0="use aq.addFunction(name, fn) to add new op functions",J0=`
Note: ${kh}. ${Th}, or ${H0}.`,Bh=`
Note: ${kh}. ${Th}, or ${K0}.`,Q0=`The ${jc} method is not valid in multi-table expressions.`;function Z0(e,t){const i=X0(t);let n=e.root=i;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,Qy(n)?(eg(n,e),n=n.body):e.join?(e.scope.add(e.tuple1=M0),e.scope.add(e.tuple2=D0),e.scope.add(e.$param=Zo)):(e.scope.add(e.tuple=L0),e.scope.add(e.$param=Zo)),z(n,e,Nh),e.root}function X0(e){try{const t=e.field?tg(e):q(e)?Ie(e):e;return N0(`expr=(${t})`,F0).body[0].expression.right}catch{N(`Expression parse error: ${e+""}`)}}function tg(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const Nh={FunctionDeclaration:yt("Function definitions"),ForStatement:yt("For loops"),ForOfStatement:yt("For-of loops"),ForInStatement:yt("For-in loops"),WhileStatement:yt("While loops"),DoWhileStatement:yt("Do-while loops"),AwaitExpression:yt("Await expressions"),ArrowFunctionExpression:yt("Function definitions"),AssignmentExpression:yt("Assignments"),FunctionExpression:yt("Function definitions"),NewExpression:yt('Use of "new"'),UpdateExpression:yt("Update expressions"),VariableDeclarator(e,t){jr(e.id,t)},Identifier(e,t,i){Mh(e,t,i)&&!t.scope.has(e.name)&&t.error(e,W0,J0)},CallExpression(e,t){const i=Fh(e.callee),n=Vc(i)||Pc(i);if(n){if((t.join||t.aggregate===!1)&&Gr(i)&&R0(e,t),(t.join||t.window===!1)&&Hr(i)&&V0(e,t),t.$op=1,t.ast)Ur(e,i,t),e.arguments.forEach(s=>z(s,t,Pr));else{const s=t.op(ig(t,n,i,e.arguments));Object.assign(e,{type:Fc,name:s.id})}return t.$op=0,!1}else Rc(i)?Ur(e,i,t):t.error(e,Oh,Bh)},MemberExpression(e,t,i){const{object:n,property:s}=e;if(!ft(ti,n))return;const{name:r}=n;if(Lh(e)&&ft(ti,s)&&ae(eo,s.name)){Vh(e,s.name);return}const a=r===t.tuple?0:r===t.tuple1?1:r===t.tuple2?2:-1;if(a>=0)return Xo(e,a,t,Dh,i);if(r===t.$param)return Xo(e,a,t,sg);t.paramsRef.has(r)?Fn(e,t.paramsRef.get(r)):t.columnRef.has(r)?Rh(n,r,t,e):ae(t.params,r)&&Fn(n,r)}};function Xo(e,t,i,n,s){const{property:r,computed:a}=e;let o;if(!a)o=r.name;else if(ft(an,r))o=r.value;else try{o=i.param(r)}catch{i.error(e,j0)}return n(e,o,t,i,s),!1}const Pr={...Nh,VariableDeclarator:yt("Variable declaration in operator call"),Identifier(e,t,i){Mh(e,t,i)&&t.error(e,q0)},CallExpression(e,t){const i=Fh(e.callee);Rc(i)?Ur(e,i,t):t.error(e,Oh,Bh)}};function eg(e,t){e.generator&&yt("Generator functions")(e,t),e.async&&yt("Async functions")(e,t);const{params:i}=e,n=i.length,s=a=>(o,c)=>t.columnRef.set(o,[c,a]),r=(a,o)=>t.paramsRef.set(a,o);n&&(t.join?(_n(t,i[0],"tuple1",s(1)),n>1&&_n(t,i[1],"tuple2",s(2)),n>2&&_n(t,i[2],"$param",r)):(_n(t,i[0],"tuple",s(0)),n>1&&_n(t,i[1],"$param",r))),t.root=e.body}function _n(e,t,i,n){ft(ti,t)?(e.scope.add(t.name),e[i]=t.name):ft(Bc,t)&&t.properties.forEach(s=>{const r=ft(ti,s.key)?s.key.name:ft(an,s.key)?s.key.value:e.error(s,P0);ft(ti,s.value)||e.error(s.value,G0),n(s.value.name,r)})}function ig(e,t,i,n){const s=[],r=[],a=t.param[0]||0,o=a+(t.param[1]||0);return n.forEach((c,u)=>{u<a?(z(c,e,Pr),s.push(e.field(c))):u<o?(z(c,e,Pr),r.push(e.param(c))):e.error(c,$0)}),{name:i,fields:s,params:r,...e.spec.window||{}}}function Fh(e){return ft(ti,e)?e.name:ft(Tc,e)?Lh(e)?ng(e.property.name):e.property.name:null}function Lh(e){return ft(ti,e.object)&&e.object.name==="Math"}function ng(e){return e==="max"?"greatest":e==="min"?"least":e}function Mh(e,t,i){const{name:n}=e;if(!(ft(Tc,i)&&i.property===e)){if(!(ft(Nc,i)&&i.key===e))if(t.paramsRef.has(n))Fn(e,t.paramsRef.get(n));else if(t.columnRef.has(n))Rh(e,n,t,i);else if(ae(t.params,n))Fn(e,n);else if(ae(eo,n))Vh(e,n);else return!0}}function Dh(e,t,i,n,s){const r=i===0?n.table:i>0?n.join[i-1]:null,a=r&&r.column(t);r&&!a&&n.error(e,io),n.aggronly&&!n.$op&&n.error(e,U0),Uc(e,t,i,a,s)}function Rh(e,t,i,n){const[s,r]=i.columnRef.get(t);Dh(e,s,r,i,n)}function sg(e,t,i,n){n.params&&!ae(n.params,t)&&n.error(e,z0),Fn(e,t)}function Fn(e,t){e.type=td,e.name=t}function Vh(e,t){e.type=Qf,e.name=t,e.raw=eo[t]}function Ur(e,t,i){if(t===jc){const n=i.table;n||i.error(e,Q0),$c(e,e.arguments.length?e.arguments.map(s=>{const r=i.param(s),a=St(r)?n.columnName(r):r;return n.column(a)||i.error(s,io),a}):n.columnNames())}else e.callee={type:Xf,name:t}}function jr(e,t){ft(ti,e)?t.scope.add(e.name):ft(Gf,e)?e.elements.forEach(i=>jr(i,t)):ft(Bc,e)?e.properties.forEach(i=>jr(i.value,t)):t.error(e.id,Y0)}const rg={[Pn]:1,[Fc]:1};function Ft(e,t={}){const i=t.generate||hs,n=t.compiler||Kr,s=og(t),r={},a={},o=[],c=[];let u=0,l=-1;const p=t.join?n.join:t.index==1?n.expr2:n.expr,d={op(g){const _=ag(g);return a[_]||(g.id=++l,a[_]=g)},field(g){const _=i(g);return r[_]||(r[_]=++u)},param(g){return ft(an,g)?g.value:n.param(i(g),s)},value(g,_){o.push(g);const v=_.escape||(t.ast?Jy(_):p(i(_),s));c.push(v),rg[_.type]&&v!==_&&xt(v)&&(v.field=_.name)},error(g,_,v=""){const j=g.start-6,ut=g.end-6,x=String(d.spec).slice(j,ut);N(`${_}: "${x}"${v}`)}};Object.assign(d,t,{params:s});for(const[g,_]of Ds(e))d.value(g+"",_.escape?t0(d,_,s):Z0(d,_));if(t.ast)return{names:o,exprs:c};const m=[];for(const g in r)m[r[g]]=n.expr(g,s);const y=Object.values(a);return y.forEach(g=>g.fields=g.fields.map(_=>m[_])),{names:o,exprs:c,ops:y}}function ag(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const i=e.frame.map(n=>Number.isFinite(n)?Math.abs(n):-1);t+=`[${i},${!!e.peers}]`}return t}function og(e){return(e.table?gr(e.table):e.join?{...gr(e.join[1]),...gr(e.join[0])}:{})||{}}function gr(e){return e&&et(e.params)?e.params():{}}const Ph="Expr",ee="ExprList",Uh="ExprNumber",wn="ExprObject",Vi="JoinKeys",Ns="JoinValues",Gt="Options",no="OrderKeys",Qe="SelectionList",gi="TableRef",Pi="TableRefList",cg="Descending",ug="Query",lg="Selection",hg="Verb",fg="Window";function so(e,t){return e&&e.expr?new tc({...e,...t}):new tc(t,e)}class tc{constructor(t,i){this.expr=i,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...et(this.expr)?{func:!0}:{}}}}function dg(e){return so(e,{desc:!0})}function ki(e,t,i=0){const n=i?{field:!0,table:i}:{field:!0};return so(e,t?{expr:t,...n}:n)}function pg(e,t,i){return so(e,{window:{frame:t||[-1/0,0],peers:!!i}})}function mg(e){const t=i=>i;return t.toString=()=>e,t}function ec(e,t){return t=t&&et(t.query)?t.query():t,t&&et(t.evaluate)?t.evaluate(null,e):e(t)}function jh(e){return xt(e)&&(q(e.all)||q(e.matches)||q(e.not)||q(e.range))}function Ln(e){return e&&et(e.toObject)?e.toObject():et(e)?{expr:String(e),func:!0}:q(e)?e.map(Ln):xt(e)?Hs(e,t=>Ln(t)):e}function ro(e){return q(e)?e.map(ro):xt(e)?q(e.verbs)?Gn.from(e):q(e.all)?tn():q(e.range)?qy(...e.range):q(e.match)?Yy(RegExp(...e.match)):q(e.not)?ql(e.not.map(Ln)):yg(e):e}function yg(e){let t=e,i=e.expr;if(i!=null){if(e.field===!0?t=i=ki(i):e.func===!0&&(t=i=mg(i)),xt(e.window)){const{frame:n,peers:s}=e.window;t=i=pg(i,n,s)}e.desc===!0&&(t=dg(i))}return e===t?Hs(e,n=>ro(n)):t}function gg(e){return q(e)?e.map(_g):e}function _g(e){const t=[];return Bt(e).forEach(i=>{St(i)?t.push(i):bt(i)?t.push(ki(i,null)):xt(i)&&i.expr||et(i)?t.push(i):N(`Invalid key value: ${i+""}`)}),t}function bg(e){return q(e)?e.map(vg):e}function vg(e,t){return t<2?Bt(e):e}function wg(e){const t=[];return e.forEach(i=>{const n=i.expr!=null?i.expr:i;if(xt(n)&&!et(n))for(const s in n)t.push(n[s]);else i=St(n)?n:bt(n)?ki(i):et(n)?i:N(`Invalid orderby field: ${i+""}`),t.push(i)}),t}const xg={[Ph]:qh,[ee]:nn,[Uh]:Og,[wn]:ui,[Vi]:kg,[Ns]:Tg,[no]:nn,[Qe]:Cg};function Sg(e,t,i){return t===gi?ic(e):t===Pi?e.map(ic):$h(Ln(e),t,i)}function $h(e,t,i){return t===Gt?e&&Ig(e,i):xg[t](e)}function Ig(e,t={}){const i={};for(const n in e){const s=e[n];i[n]=t[n]?$h(s,t[n]):s}return i}function Ag(e,t){return Ft({expr:e},{...t,ast:!0}).exprs[0]}function ao(e){return{type:Pn,name:e}}function zh(e){return{type:Pn,index:e}}function ui(e,t){if(bt(e))return Ag(e,t);if(e.expr){let i;if(e.field===!0?i=ao(e.expr):e.func===!0&&(i=ui(e.expr,t)),i)return e.desc&&(i={type:cg,expr:i}),e.window&&(i={type:fg,expr:i,...e.window}),i}return Object.keys(e).map(i=>({...ui(e[i],t),as:i}))}function Wh(e){const t=lg;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:nn(e.not)}:e.range?{type:t,operator:"range",arguments:nn(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:N("Invalid input")}function Cg(e){return Bt(e).map(Eg).flat()}function Eg(e){return jh(e)?Wh(e):St(e)?zh(e):bt(e)?ao(e):xt(e)?Object.keys(e).map(t=>({type:Pn,name:t,as:e[t]})):N("Invalid input")}function qh(e){return jh(e)?Wh(e):St(e)?zh(e):bt(e)?ao(e):xt(e)?ui(e):N("Invalid input")}function nn(e){return Bt(e).map(qh).flat()}function Og(e){return St(e)?e:ui(e)}function kg(e){return q(e)?e.map(nn):ui(e,{join:!0})}function Tg(e){return q(e)?e.map((t,i)=>i<2?nn(t):ui(t,{join:!0})):ui(e,{join:!0})}function ic(e){return e&&et(e.toAST)?e.toAST():e}class Yh{constructor(t,i=[],n=[]){this.verb=t,this.schema=i,i.forEach((s,r)=>{const a=s.type,o=n[r],c=a===Vi?gg(o):a===Ns?bg(o):a===no?wg(o):o;this[s.name]=c!==void 0?c:s.default})}static from(t){const i=$r[t.verb],n=(i.schema||[]).map(({name:s})=>ro(t[s]));return i(...n)}evaluate(t,i){const n=this.schema.map(({name:s,type:r})=>{const a=this[s];return r===gi?ec(i,a):r===Pi?a.map(o=>ec(i,o)):a});return t[this.verb](...n)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:i})=>{t[i]=Ln(this[i])}),t}toAST(){const t={type:hg,verb:this.verb};return this.schema.forEach(({name:i,type:n,props:s})=>{t[i]=Sg(this[i],n,s)}),t}}function Q(e,t){return Object.assign((...i)=>new Yh(e,t,i),{schema:t})}const $r={count:Q("count",[{name:"options",type:Gt}]),derive:Q("derive",[{name:"values",type:wn},{name:"options",type:Gt,props:{before:Qe,after:Qe}}]),filter:Q("filter",[{name:"criteria",type:wn}]),groupby:Q("groupby",[{name:"keys",type:ee}]),orderby:Q("orderby",[{name:"keys",type:no}]),relocate:Q("relocate",[{name:"columns",type:Qe},{name:"options",type:Gt,props:{before:Qe,after:Qe}}]),rename:Q("rename",[{name:"columns",type:Qe}]),rollup:Q("rollup",[{name:"values",type:wn}]),sample:Q("sample",[{name:"size",type:Uh},{name:"options",type:Gt,props:{weight:Ph}}]),select:Q("select",[{name:"columns",type:Qe}]),ungroup:Q("ungroup"),unorder:Q("unorder"),reify:Q("reify"),dedupe:Q("dedupe",[{name:"keys",type:ee,default:[]}]),impute:Q("impute",[{name:"values",type:wn},{name:"options",type:Gt,props:{expand:ee}}]),fold:Q("fold",[{name:"values",type:ee},{name:"options",type:Gt}]),pivot:Q("pivot",[{name:"keys",type:ee},{name:"values",type:ee},{name:"options",type:Gt}]),spread:Q("spread",[{name:"values",type:ee},{name:"options",type:Gt}]),unroll:Q("unroll",[{name:"values",type:ee},{name:"options",type:Gt,props:{drop:ee}}]),lookup:Q("lookup",[{name:"table",type:gi},{name:"on",type:Vi},{name:"values",type:ee}]),join:Q("join",[{name:"table",type:gi},{name:"on",type:Vi},{name:"values",type:Ns},{name:"options",type:Gt}]),cross:Q("cross",[{name:"table",type:gi},{name:"values",type:Ns},{name:"options",type:Gt}]),semijoin:Q("semijoin",[{name:"table",type:gi},{name:"on",type:Vi}]),antijoin:Q("antijoin",[{name:"table",type:gi},{name:"on",type:Vi}]),concat:Q("concat",[{name:"tables",type:Pi}]),union:Q("union",[{name:"tables",type:Pi}]),intersect:Q("intersect",[{name:"tables",type:Pi}]),except:Q("except",[{name:"tables",type:Pi}])};class Gn extends yc{constructor(t,i,n){super(i),this._verbs=t||[],this._table=n}static from({verbs:t,table:i,params:n}){return new Gn(t.map(Yh.from),n,i)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,i){t=t||i(this._table);for(const n of this._verbs)t=n.evaluate(t.params(this._params),i);return t}toObject(){return nc(this,"toObject")}toJSON(){return this.toObject()}toAST(){return nc(this,"toAST",{type:ug})}}function nc(e,t,i){return{...i,verbs:e._verbs.map(n=>n[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function Bg(e,t){return new Gn(e._verbs.concat(t),e._params,e._table)}for(const e in $r){const t=$r[e];Gn.prototype["__"+e]=function(i,...n){return Bg(i,t(...n))}}function dn(e,t,...i){const n=["_","$"],s=n.slice(0,i.length);return s.push('"use strict"; const '+i.map((r,a)=>r.map((o,c)=>`${n[a]}${c} = ${n[a]}[${c}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...s)(...i)}const oo=e=>e,Ng=[e=>e==="true"||e==="false",e=>e!=="false"],sc=[e=>e==="NaN"||(e=+e)===e,e=>+e],Fg=[bc,e=>new Date(Date.parse(e))];function Lg(e){const{decimal:t}=e;return t&&t!=="."?sc.map(i=>n=>i(n&&n.replace(t,"."))):sc}function Mg(e,t){const i=[Ng,Lg(t),Fg],n=i.length;for(let s=0;s<n;++s){const[r,a]=i[s];if(Dg(e,r))return a}return oo}function Dg(e,t){const i=e.length;for(let n=0;n<i;++n){const s=e[n];if(s!=null&&!t(s))return!1}return!0}function rc(e,t=0){return sn(e-t,i=>`col${i+t+1}`)}function Rg(e,t,i){let n=e();const s=n.length,r=+i.autoMax||1e3,a=sn(s,()=>[]);t=t?t.length<s?[...t,rc(s,t.length)]:t:rc(s);let o=0;for(;o<r&&n;++o,n=e())for(let l=0;l<s;++l)a[l].push(n[l]===""?null:n[l]);const c=Vg(t,a,i);for(c.forEach((l,p)=>{if(l===oo)return;const d=a[p];for(let m=0;m<o;++m)d[m]!=null&&(d[m]=l(d[m]))});n;n=e())for(let l=0;l<s;++l)a[l].push(n[l]?c[l](n[l]):null);const u={};return t.forEach((l,p)=>u[l]=a[p]),new Ve(u,t)}function Vg(e,t,i){const{parse:n={}}=i,s=i.autoType===!1;return e.map((r,a)=>et(n[r])?n[r]:s?oo:Mg(t[a],i))}const ac={},_r={},br=34,bn=10,vr=13;function Pg(e,t,i){let n=+t||0;for(;--n>=0;)e();return i?()=>{let s;for(;!s;)if(i(s=e()))s=null;else return s}:e}function Ug(e,{delimiter:t=",",skip:i,comment:n}){t.length!==1&&N(`Text "delimiter" should be a single character, found "${t}"`);const s=t.charCodeAt(0);let r=e.length,a=0,o,c=r<=0,u=!1;e.charCodeAt(r-1)===bn&&--r,e.charCodeAt(r-1)===vr&&--r;function l(){if(c)return _r;if(u)return u=!1,ac;const d=a;let m,y;if(e.charCodeAt(d)===br){for(;a++<r&&e.charCodeAt(a)!==br||e.charCodeAt(++a)===br;);return(m=a)>=r?c=!0:(y=e.charCodeAt(a++))===bn?u=!0:y===vr&&(u=!0,e.charCodeAt(a)===bn&&++a),e.slice(d+1,m-1).replace(/""/g,'"')}for(;a<r;){if((y=e.charCodeAt(m=a++))===bn)u=!0;else if(y===vr)u=!0,e.charCodeAt(a)===bn&&++a;else if(y!==s)continue;return e.slice(d,m)}return c=!0,e.slice(d,r)}function p(){if((o=l())!==_r){const d=[];for(;o!==ac&&o!==_r;)d.push(o),o=l();return d}}return Pg(p,i,n&&(d=>(d&&d[0]||"").startsWith(n)))}function jg(e,t={}){const i=Ug(e,t);return Rg(i,t.header!==!1?i():t.names,t)}function $g(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function co(e,t){const i=$t();return t.forEach((n,s)=>{const r=bt(n)?n:s;if(r){const a=e.column(s)||N(`Unrecognized column: ${s}`);i.add(r,a)}}),e.create(i)}function Gh(e,t,{before:i,after:n}={}){const s=i!=null,r=n!=null;s||r||N("relocate requires a before or after option."),s&&r&&N("relocate accepts only one of the before or after options."),t=We(e,t);const a=[...We(e,s?i:n).keys()],o=s?a[0]:a.pop(),c=new Map;return e.columnNames().forEach(u=>{const l=!t.has(u);if(u===o){r&&l&&c.set(u,u);for(const[p,d]of t)c.set(p,d);if(r)return}l&&c.set(u,u)}),co(e,c)}function Hn(e,t=n=>n,i=""){const n=e.length;if(!n)return"";let s=t(e[0],0);for(let r=1;r<n;++r)s+=i+t(e[r],r);return s}function uo(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function zg(e,t=0,i=e.length){let n=i?e[t++]:W;for(let s=t;s<i;++s)n>e[s]&&(n=e[s]);return n}function Wg(e,t=0,i=e.length){let n=i?e[t++]:W;for(let s=t;s<i;++s)n<e[s]&&(n=e[s]);return n}function ts(e){return An(e)?e:+e}function qg(e,t){const i=e.length;if(!i)return W;if((t=+t)<=0||i<2)return ts(e[0]);if(t>=1)return ts(e[i-1]);const n=(i-1)*t,s=Math.floor(n),r=ts(e[s]);return An(r)?r:r+(ts(e[s+1])-r)*(n-s)}class Yg{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:zg(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:Wg(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(uo)),qg(this._sorted,t)}}const Fs=(e,t,i)=>dn(t,"{"+Hn(e,(n,s)=>`_${s}.${i}(${t});`)+"}",e);function Gg(e,t){const{ops:i,output:n}=Hg(e,t),s=e[0].fields,r=s.length,a=r===0?lo:r===1?Kg:r===2?Jg:N("Unsupported field count: "+r);return new a(s,i,n,t)}function Hg(e,t){const i={},n=[];function s(a,o=[]){const c=a+":"+o;if(i[c])return i[c];const u=Vc(a),l=u.create(...o);return t<0&&u.stream&&u.stream.forEach(p=>s(p,[])),u.req&&u.req.forEach(p=>s(p,[])),i[c]=l,n.push(l),l}const r=e.map(a=>{const o=s(a.name,a.params);return o.output=a.id,o});return{ops:n,output:r}}class lo extends Hy{constructor(t,i,n,s){super(n),this._op=i,this._fields=t,this._stream=!!s}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(i=>i.init(t)),t.values&&(t.list=new Yg),t}write(t,i,n){const s=this._outputs,r=s.length;for(let a=0;a<r;++a)i[s[a].output][n]=s[a].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Kg extends lo{constructor(t,i,n,s){super(t,i,n,s);const r=["state","v1","v2"];this._add=Fs(i,r,"add"),this._rem=Fs(i,r,"rem")}add(t,i,n){const s=this._fields[0](i,n);++t.count,se(s)&&(++t.valid,t.list&&t.list.add(s),this._add(t,s))}rem(t,i,n){const s=this._fields[0](i,n);--t.count,se(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,s))}}class Jg extends lo{constructor(t,i,n,s){super(t,i,n,s);const r=["state","v1","v2"];this._add=Fs(i,r,"add"),this._rem=Fs(i,r,"rem")}add(t,i,n){const s=this._fields[0](i,n),r=this._fields[1](i,n);++t.count,se(s)&&se(r)&&(++t.valid,t.list&&t.list.add([s,r]),this._add(t,s,r))}rem(t,i,n){const s=this._fields[0](i,n),r=this._fields[1](i,n);--t.count,se(s)&&se(r)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,s,r))}}function Bi(e,t,i){if(t.length){const n=e.data(),{keys:s}=e.groups()||{},r=pn(e,t),a=s?(o,c)=>r[o][s[c]]:o=>r[o][0];i=i.map(o=>c=>o(c,n,a))}return i}function pn(e,t,i){if(!t.length)return i;const n=Hh(t),s=e.groups(),r=s?s.size:1;return i=i||sn(t.length,()=>Array(r)),r>1?n.forEach(a=>{const o=Jh(e,a,s);for(let c=0;c<r;++c)a.write(o[c],i,c)}):n.forEach(a=>{const o=Kh(e,a);a.write(o,i,0)}),i}function Hh(e,t){const i=[],n={};for(const s of e){const r=s.fields.map(a=>a+"").join(",");(n[r]||(n[r]=[])).push(s)}for(const s in n)i.push(Gg(n[s],t));return i}function Kh(e,t){const i=t.init(),n=e.totalRows(),s=e.data(),r=e.mask();if(e.isOrdered()){const a=e.indices();for(let o=0;o<n;++o)t.add(i,a[o],s)}else if(r)for(let a=r.next(0);a>=0;a=r.next(a+1))t.add(i,a,s);else for(let a=0;a<n;++a)t.add(i,a,s);return i}function Jh(e,t,i){const{keys:n,size:s}=i,r=sn(s,()=>t.init()),a=e.data();if(e.isOrdered()){const o=e.indices(),c=o.length;for(let u=0;u<c;++u){const l=o[u];t.add(r[n[l]],l,a)}}else if(e.isFiltered()){const o=e.mask();for(let c=o.next(0);c>=0;c=o.next(c+1))t.add(r[n[c]],c,a)}else{const o=e.totalRows();for(let c=0;c<o;++c)t.add(r[n[c]],c,a)}return r}function Qh(e,t){const{get:i,names:n,rows:s,size:r}=t,a=n.length;for(let o=0;o<a;++o){const c=e.add(n[o],Array(r)),u=i[o];for(let l=0;l<r;++l)c[l]=u(s[l])}}function Zh(e){return{left(t,i,n,s){for(n==null&&(n=0),s==null&&(s=t.length);n<s;){const r=n+s>>>1;e(t[r],i)<0?n=r+1:s=r}return n},right(t,i,n,s){for(n==null&&(n=0),s==null&&(s=t.length);n<s;){const r=n+s>>>1;e(t[r],i)>0?s=r:n=r+1}return n}}}const oc=Zh(uo);function Qg(e,t,i,n,s){let r,a,o,c,u;const l=g=>a[g-1]===a[g],p=n.length,d=s.length,m=n.length?dn(["w","r","k"],"{"+Hn(n,(g,_)=>`r[_${_}.id][k]=_${_}.value(w,_${_}.get);`)+"}",n):()=>{},y={i0:0,i1:0,index:0,size:0,peer:l,init(g,_,v,j){y.index=y.i0=y.i1=0,y.size=_.length,r=g,a=_,c=v,u=j,o=s?s.map(ut=>ut.init()):null;for(let ut=0;ut<p;++ut)n[ut].init();return y},value(g,_){return _(r[g],e)},step(g){const[_,v]=t,j=y.size,ut=y.i0,x=y.i1;y.i0=_!=null?Math.max(0,g-Math.abs(_)):0,y.i1=v!=null?Math.min(j,g+Math.abs(v)+1):j,y.index=g,i&&(y.i0>0&&l(y.i0)&&(y.i0=oc.left(a,a[y.i0])),y.i1<j&&l(y.i1)&&(y.i1=oc.right(a,a[y.i1-1])));for(let mt=0;mt<d;++mt){const G=s[mt],zt=o[mt];for(let nt=ut;nt<y.i0;++nt)G.rem(zt,r[nt],e);for(let nt=x;nt<y.i1;++nt)G.add(zt,r[nt],e);G.write(zt,c,u)}return m(y,c,u),c}};return y}const Zg=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),Xg=e=>!!e.peers;function t_(e){const{id:t,name:i,fields:n=[],params:s=[]}=e,r=Pc(i).create(...s);return n.length&&(r.get=n[0]),r.id=t,r}function e_(e,t,i,n={},s){const r=e.data(),a=i_(s,r),o=a.length,c=dn(["r","d","op"],"{"+Hn(t,(u,l)=>`_${l}[r] = $${l}(r, d, op);`)+"}",t,i);e.partitions().forEach((u,l)=>{const p=u.length,d=n_(e,u);for(let y=0;y<o;++y)a[y].init(u,d,n,l);const m=y=>n[y][l];for(let y=0;y<p;++y){for(let g=0;g<o;++g)a[g].step(y);c(u[y],r,m)}})}function i_(e,t){const i={};return e.forEach(n=>{const s=Zg(n),r=Xg(n),a=`${s},${r}`,{aggOps:o,winOps:c}=i[a]||(i[a]={frame:s,peers:r,aggOps:[],winOps:[]});Gr(n.name)?o.push(n):c.push(t_(n))}),Object.values(i).map(n=>Qg(t,n.frame,n.peers,n.winOps,Hh(n.aggOps,n.frame[0]!=null?-1:1)))}function n_(e,t){if(e.isOrdered()){const i=e.comparator(),n=e.data(),s=t.length,r=new Uint32Array(s);for(let a=1,o=0;a<s;++a)r[a]=i(t[a-1],t[a],n)?++o:o;return r}else return t}function s_(e){return Hr(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function ho(e,{names:t,exprs:i,ops:n},s={}){const r=e.totalRows(),a=$t(s.drop?null:e),o=t.map(d=>a.add(d,Array(r))),[c,u]=r_(n),l=e.isGrouped()?e.groups().size:1,p=pn(e,c,sn(n.length,()=>Array(l)));return u.length?e_(e,o,i,p,u):a_(e,o,i,p),e.create(a)}function r_(e){const t=[],i=[],n=e.length;for(let s=0;s<n;++s){const r=e[s];r.id=s,(s_(r)?i:t).push(r)}return[t,i]}function a_(e,t,i,n){const s=e.mask(),r=e.data(),{keys:a}=e.groups()||{},o=a?(u,l)=>n[u][a[l]]:u=>n[u][0],c=t.length;for(let u=0;u<c;++u){const l=i[u],p=t[u];if(s)for(let d=s.next(0);d>=0;d=s.next(d+1))p[d]=l(d,r,o);else{const d=e.totalRows();for(let m=0;m<d;++m)p[m]=l(m,r,o)}}}function o_(e,t,i={}){const n=ho(e,Ft(t,{table:e}),i);return i.drop||i.before==null&&i.after==null?n:Gh(n,Object.keys(t).filter(s=>!e.column(s)),i)}function c_(e,t){if(t.length===0)return e;const i=e.columnNames();return t.reduce((n,s)=>n.antijoin(s.select(i)),e).dedupe()}const es=2147483648,u_=4294967295;class Xh{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let i=0;for(let n=0;n<t;++n)for(let s=this._bits[n];s;++i)s&=s-1;return i}get(t){return this._bits[t>>5]&es>>>t}set(t){this._bits[t>>5]|=es>>>t}clear(t){this._bits[t>>5]&=~(es>>>t)}scan(t){for(let i=this.next(0);i>=0;i=this.next(i+1))t(i)}next(t){const i=this._bits,n=i.length;let s=t>>5,r=i[s]&u_>>>t;for(;s<n;r=i[++s])if(r!==0)return(s<<5)+Math.clz32(r);return-1}nth(t){let i=this.next(0);for(;t--&&i>=0;)i=this.next(i+1);return i}not(){const t=this._bits,i=t.length;for(let s=0;s<i;++s)t[s]=~t[s];const n=this._size%32;return n&&(t[i-1]&=es>>n-1),this}and(t){if(t){const i=this._bits,n=t._bits,s=i.length;for(let r=0;r<s;++r)i[r]&=n[r]}return this}or(t){if(t){const i=this._bits,n=t._bits,s=i.length;for(let r=0;r<s;++r)i[r]|=n[r]}return this}}function l_(e,t){const i=e.totalRows(),n=e.mask(),s=e.data(),r=new Xh(i);if(n)for(let a=n.next(0);a>=0;a=n.next(a+1))t(a,s)&&r.set(a);else for(let a=0;a<i;++a)t(a,s)&&r.set(a);return e.create({filter:r})}function h_(e,t){const i=Ft({p:t},{table:e});let n=i.exprs[0];if(i.ops.length){const{data:s}=ho(e,i,{drop:!0}).column("p");n=r=>s[r]}return l_(e,n)}function tf(e,{names:t=[],exprs:i=[],ops:n=[]},s={}){if(!t.length)return e;const r=s.limit>0?+s.limit:1/0,a=s.index?s.index===!0?"index":s.index+"":null,o=new Set(s.drop),c=Bi(e,n,i),u=$t(),l=new Set(t),p=[],d=[],m=[];e.columnNames().forEach(x=>{if(!o.has(x)){const mt=u.add(x,[]);l.has(x)||(p.push(e.column(x)),d.push(mt))}}),t.forEach(x=>{o.has(x)||(u.has(x)||u.add(x,[]),m.push(u.data[x]))});const y=a?u.add(a,[]):null;let g=0;const _=p.length,v=m.length,j=(x,mt)=>{for(let G=0;G<_;++G)d[G].length=g+mt,d[G].fill(p[G].get(x),g,g+mt)},ut=y?(x,mt)=>{for(let G=0;G<mt;++G)y[x+G]=G}:()=>{};if(v===1){const x=c[0],mt=m[0];e.scan((G,zt)=>{const nt=Bt(x(G,zt)),Dt=Math.min(nt.length,r);j(G,Dt);for(let le=0;le<Dt;++le)mt[g+le]=nt[le];ut(g,Dt),g+=Dt})}else e.scan((x,mt)=>{let G=0;const zt=c.map(nt=>{const Dt=Bt(nt(x,mt));return G=Math.min(Math.max(G,Dt.length),r),Dt});j(x,G);for(let nt=0;nt<v;++nt){const Dt=m[nt],le=zt[nt];for(let yi=0;yi<G;++yi)Dt[g+yi]=le[yi]}ut(g,G),g+=G});return e.create(u.new())}function f_(e,{names:t=[],exprs:i=[],ops:n=[]},s={}){if(t.length===0)return e;const[r="key",a="value"]=s.as||[],o=Bi(e,n,i);return tf(e,{names:[r,a],exprs:[()=>t,(c,u)=>o.map(l=>l(c,u))]},{...s,drop:t})}function oe(e,t,i,n={window:!1}){const s=new Map,r=a=>{a=St(a)?t.columnName(a):a,bt(a)?s.set(a,ki(a)):et(a)?We(t,a).forEach(r):xt(a)?zl(s,a):N(`Invalid ${e} value: ${a+""}`)};return Bt(i).forEach(r),n.preparse&&n.preparse(s),Ft(s,{table:t,...n})}function d_(e,t,i){return f_(e,oe("fold",e,t),i)}function cc(e,t,i,n){const s=i&&i.length;return p_(s?m_(e,i,n):e,t,s)}function p_(e,{names:t,exprs:i,ops:n},s){const r=Bi(e,n,i),a=s?null:$t(e),o=e.totalRows();return t.forEach((c,u)=>{const l=e.column(c),p=s?l.data:a.add(c,Array(o)),d=r[u];e.scan(m=>{const y=l.get(m);p[m]=se(y)?y:d(m)})}),s?e:e.create(a)}function m_(e,t,i){const n=e.groups(),s=e.data(),r=(n?n.names:[]).concat(t),a=(n?n.get:[]).concat(t.map(y=>e.getter(y))),o=new Set,c=fs(a);e.scan((y,g)=>o.add(c(y,g)));const u=e.columnNames(),l=$t(),p=u.map(y=>l.add(y,[]));u.forEach((y,g)=>{const _=s[y],v=p[g];e.scan(j=>v.push(_.get(j)))});const d=fs(a.map((y,g)=>_=>_[g])),m=dn("v","{"+p.map((y,g)=>`_${g}.push(v[$${g}]);`).join("")+"}",p,u.map(y=>r.indexOf(y)));if(n){let y=n.keys.length;const g=i.reduce((v,j)=>v*j.length,n.size),_=new Uint32Array(g+(y-o.size));_.set(n.keys),uc(n,i,(v,j)=>{o.has(d(v))||(m(v),_[y++]=j[0])}),l.groupby({...n,keys:_})}else uc(n,i,y=>{o.has(d(y))||m(y)});return e.create(l.new())}function uc(e,t,i){const n=e?e.get.length:0,s=e?1:0,r=s+t.length,a=new Int32Array(r),o=new Int32Array(r),c=[];if(e){const{get:l,rows:p,size:d}=e;a[0]=d,c.push((m,y)=>{const g=p[y];for(let _=0;_<n;++_)m[_]=l[_](g)})}t.forEach((l,p)=>{const d=p+n;a[p+s]=l.length,c.push((m,y)=>m[d]=l[y])});const u=Array(n+t.length);for(let l=0;l<r;++l)c[l](u,0);i(u,o);for(let l=r-1;l>=0;){const p=++o[l];p<a[l]?(c[l](u,p),i(u,o),l=r-1):(o[l]=0,c[l](u,0),--l)}}function fo(e,{names:t,exprs:i,ops:n}){const s=$t(),r=e.groups();return r&&Qh(s,r),y_(t,i,r,pn(e,n),s),e.create(s.new())}function y_(e,t,i,n=[],s){if(!t.length)return;const r=i?i.size:1,a=(c,u)=>n[c][u],o=e.length;for(let c=0;c<o;++c){const u=t[c];if(u.field!=null)s.add(e[c],n[u.field]);else if(r>1){const l=s.add(e[c],Array(r));for(let p=0;p<r;++p)l[p]=u(p,null,a)}else s.add(e[c],[u(0,null,a)])}}function g_(e,t,i={}){if(t=Ft(t,{table:e}),t.names.forEach(n=>e.column(n)?0:N(`Invalid impute column ${Ie(n)}`)),i.expand){const n={preparse:__,aggronly:!0},s=oe("impute",e,i.expand,n),r=fo(e.ungroup(),s);return cc(e,t,s.names,s.names.map(a=>r.get(a,0)))}else return cc(e,t)}function __(e){e.forEach((t,i)=>t.field?e.set(i,Cc(t+"")):0)}function b_(e,t){const i=e.columnNames();return t.length?t.reduce((n,s)=>n.semijoin(s.select(i)),e).dedupe():e.reify([])}function ef(e,t){const i=new Map;return e.scan((n,s)=>{const r=t(n,s);r!=null&&r===r&&i.set(r,n)}),i}function v_(e,t,i){const n=new Map,s=e.length;for(let r=0;r<s;++r){const a=e[r],o=i(a,t);o!=null&&o===o&&(n.has(o)?n.get(o).push(r):n.set(o,[r]))}return n}function w_(e,t){const i=["i","a","j","b"];return dn(i,"{"+Hn(e,(n,s)=>`_${s}.push($${s}(${i}));`)+"}",e,t)}function x_(e,t,i,{names:n,exprs:s},r={}){const a=e.data(),o=e.indices(!1),c=o.length,u=new Int32Array(c),l=t.data(),p=t.indices(!1),d=p.length,m=new Int32Array(d),y=n.length,g=$t(),_=Array(y),v=Array(y);for(let x=0;x<n.length;++x)_[x]=g.add(n[x],[]),v[x]=s[x];const j=w_(_,v);if((q(i)?I_:S_)(j,i,a,l,o,p,u,m,c,d),r.left)for(let x=0;x<c;++x)u[x]||j(o[x],a,-1,l);if(r.right)for(let x=0;x<d;++x)m[x]||j(-1,a,p[x],l);return e.create(g.new())}function S_(e,t,i,n,s,r,a,o,c,u){for(let l=0;l<c;++l){const p=s[l];for(let d=0;d<u;++d){const m=r[d];t(p,i,m,n)&&(e(p,i,m,n),a[l]=1,o[d]=1)}}}function I_(e,[t,i],n,s,r,a,o,c,u,l){let p,d,m,y,g,_,v,j,ut=e;u>=l?(p=n,d=t,m=o,y=r,g=s,_=i,v=c,j=a):(p=s,d=i,m=c,y=a,g=n,_=t,v=o,j=r,ut=(G,zt,nt,Dt)=>e(nt,Dt,G,zt));const x=v_(j,g,_),mt=y.length;for(let G=0;G<mt;++G){const zt=y[G],nt=x.get(d(zt,p));if(nt){const Dt=nt.length;for(let le=0;le<Dt;++le){const yi=nt[le];ut(zt,p,j[yi],g),v[yi]=1}m[G]=1}}}function Ls(e,t,i){const n=new Map;Bt(i).forEach((r,a)=>{r=St(r)?t.columnName(r):r,bt(r)?n.set(a,ki(r)):et(r)||xt(r)&&r.expr?n.set(a,r):N(`Invalid ${e} key value: ${r+""}`)});const s=Ft(n,{table:t,aggregate:!1,window:!1});return fs(s.exprs,!0)}function A_(e,t){const i=new Set(t);return e.filter(n=>i.has(n))}function po(e,t,i){if(i)bt(i)?i=[i,i]:q(i)&&i.length===1&&(i=[i[0],i[0]]);else{const n=A_(e.columnNames(),t.columnNames());n.length||N("Natural join requires shared column names."),i=[n,n]}return i}function nf(e,t,i,n){return i.length!==n.length&&N("Mismatched number of join keys"),[Ls("join",e,i),Ls("join",t,n)]}const C_={aggregate:!1,window:!1},E_={...C_,index:1};function lc(e,t,i,n,s={}){i=po(e,t,i);const r={join:[e,t]};let a;if(q(i)){const[o,c]=i.map(Bt);a=nf(e,t,o,c),n||(n=O_(e,o,c,s))}else a=Ft({on:i},r).exprs[0],n||(n=[tn(),tn()]);return x_(e,t,a,k_(e,t,n,r,s&&s.suffix),s)}function O_(e,t,i,n){const s=[];t.forEach((a,o)=>bt(a)&&a===i[o]?s.push(a):0);const r=ql(s);if(n.left&&n.right){const a=new Set(s);return[e.columnNames().map(o=>{const c=`[${Ie(o)}]`;return a.has(o)?{[o]:`(a, b) => a${c} == null ? b${c} : a${c}`}:o}),r]}return n.right?[r,tn()]:[tn(),r]}function k_(e,t,i,n,s=[]){if(q(i)){let r,a,o,c=i.length;r=a=o={names:[],exprs:[]},c--&&(r=oe("join",e,i[0],n)),c--&&(a=oe("join",t,i[1],E_)),c--&&(o=Ft(i[2],n));const u=new Set,l=new Set(r.names);return a.names.forEach(p=>{l.has(p)&&u.add(p)}),u.size&&(hc(r.names,u,s[0]||"_1"),hc(a.names,u,s[1]||"_2")),{names:r.names.concat(a.names,o.names),exprs:r.exprs.concat(a.exprs,o.exprs)}}else return Ft(i,n)}function hc(e,t,i){e.forEach((n,s)=>t.has(n)?e[s]=n+i:0)}function T_(e,t,i,n={}){const s=new Xh(e.totalRows());return(q(i)?B_:N_)(s,e,t,i),n.anti&&s.not().and(e.mask()),e.create({filter:s})}function B_(e,t,i,[n,s]){const r=ef(i,s);t.scan((a,o)=>{r.get(n(a,o))>=0&&e.set(a)})}function N_(e,t,i,n){const s=t.numRows(),r=i.numRows(),a=t.data(),o=i.data();if(t.isFiltered()||i.isFiltered()){const c=t.indices(!1),u=i.indices(!1);for(let l=0;l<s;++l){const p=c[l];for(let d=0;d<r;++d)if(n(p,a,u[d],o)){e.set(p);break}}}else for(let c=0;c<s;++c)for(let u=0;u<r;++u)if(n(c,a,u,o)){e.set(c);break}}function fc(e,t,i,n){i=po(e,t,i);const s=q(i)?nf(e,t,...i.map(Bt)):Ft({on:i},{join:[e,t]}).exprs[0];return T_(e,t,s,n)}function F_(e,t,[i,n],{names:s,exprs:r,ops:a}){const o=$t(e),c=e.totalRows();s.forEach(d=>o.add(d,Array(c).fill(W)));const u=ef(t,n),l=dn(["lr","rr","data"],"{"+Hn(s,(d,m)=>`_[${m}][lr] = $[${m}](rr, data);`)+"}",s.map(d=>o.data[d]),Bi(t,a,r)),p=t.data();return e.scan((d,m)=>{const y=u.get(i(d,m));y>=0&&l(d,y,p)}),e.create(o)}function L_(e,t,i,n){return i=po(e,t,i),F_(e,t,[Ls("lookup",e,i[0]),Ls("lookup",t,i[1])],oe("lookup",t,n))}const zr=(e,t)=>e??t;function M_(e,t,i,n={}){const{keys:s,keyColumn:r}=D_(e,t,n),a=zr(n.valueSeparator,"_"),o=i.names.length>1?(u,l)=>l+a+s[u]:u=>s[u],c=s.map(u=>pn(e,i.ops.map(l=>{if(l.name==="count"){const d=m=>u===r[m]?1:NaN;return d.toString=()=>u+":1",{...l,name:"sum",fields:[d]}}const p=l.fields.map(d=>{const m=(y,g)=>u===r[y]?d(y,g):NaN;return m.toString=()=>u+":"+d,m});return{...l,fields:p}})));return e.create(R_(i,o,e.groups(),c))}function D_(e,t,i){const n=i.limit>0?+i.limit:1/0,s=zr(i.sort,!0),r=zr(i.keySeparator,"_"),a=Bi(e,t.ops,t.exprs),o=a.length===1?a[0]:(p,d)=>a.map(m=>m(p,d)).join(r),c=Array(e.totalRows());e.scan((p,d)=>c[p]=o(p,d));const u=pn(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[p=>c[p]],params:[]}])[0][0],l=s?u.sort():u;return{keys:Number.isFinite(n)?l.slice(0,n):l,keyColumn:c}}function R_({names:e,exprs:t},i,n,s){const r=n?n.size:1,a=$t(),o=s.length,c=e.length;let u;const l=(p,d)=>u[p][d];n&&Qh(a,n);for(let p=0;p<c;++p){const d=t[p];if(d.field!=null)for(let m=0;m<o;++m)a.add(i(m,e[p]),s[m][d.field]);else if(r>1)for(let m=0;m<o;++m){u=s[m];const y=a.add(i(m,e[p]),Array(r));for(let g=0;g<r;++g)y[g]=d(g,null,l)}else for(let m=0;m<o;++m)u=s[m],a.add(i(m,e[p]),[d(0,null,l)])}return a.new()}function V_(e,t,i,n){return M_(e,oe("fold",e,t),oe("fold",e,i,{preparse:P_,aggronly:!0}),n)}function P_(e){e.forEach((t,i)=>t.field?e.set(i,Sc(t+"")):0)}function U_(e,t){const i=new Map;return e.columnNames(n=>(i.set(n,n),0)),co(e,We(e,t,i))}function dc(e,t){return fo(e,Ft(t,{table:e,aggronly:!0,window:!1}))}function j_(e,t,i,n){return(t?n?z_:$_:n?q_:W_)(e.length,e,i,n)}function $_(e,t,i){const n=i.length;for(let s=0;s<e;++s)t[s]=i[n*rn()|0];return t}function z_(e,t,i,n){const s=i.length,r=new Float64Array(s);let a=0;for(let c=0;c<s;++c)r[c]=a+=n(i[c]);const o=Zh(uo).right;for(let c=0;c<e;++c)t[c]=i[o(r,a*rn())];return t}function W_(e,t,i){const n=i.length;if(e>=n)return i;for(let s=0;s<e;++s)t[s]=i[s];for(let s=e;s<n;++s){const r=s*rn();r<e&&(t[r|0]=i[s])}return t}function q_(e,t,i,n){const s=i.length;if(e>=s)return i;const r=new Float32Array(s),a=new Uint32Array(s);for(let o=0;o<s;++o)a[o]=o,r[o]=-Math.log(rn())/n(i[o]);a.sort((o,c)=>r[o]-r[c]);for(let o=0;o<e;++o)t[o]=i[a[o]];return t}function Y_(e,t=0,i=e.length){let n=i-(t=+t);for(;n;){const s=rn()*n--|0,r=e[n+t];e[n+t]=e[s+t],e[s+t]=r}return e}function G_(e,t,i,n={}){const{replace:s,shuffle:r}=n,a=e.partitions(!1);let o=0;t=a.map((l,p)=>{let d=t(p);return o+=d=s?d:Math.min(l.length,d),d});const c=new Uint32Array(o);let u=0;return a.forEach((l,p)=>{const d=t[p],m=c.subarray(u,u+=d);!s&&d===l.length?m.set(l):j_(m,s,l,i)}),r!==!1&&(a.length>1||!s)&&Y_(c),e.reify(c)}function H_(e,t,i={}){return G_(e,K_(e,t),J_(e,i.weight),i)}const sf=e=>t=>e.get(t)||0;function K_(e,t){return St(t)?()=>t:sf(fo(e,Ft({size:t},{table:e,window:!1})).column("size"))}function J_(e,t){return t==null?null:(t=St(t)?e.columnName(t):t,sf(bt(t)?e.column(t):ho(e,Ft({w:t},{table:e}),{drop:!0}).column("w")))}function Q_(e,t){return co(e,We(e,t))}function Z_(e,{names:t,exprs:i,ops:n=[]},s={}){if(t.length===0)return e;const r=t.length===1&&s.as||[],a=s.drop==null?!0:!!s.drop,o=s.limit==null?r.length||1/0:Math.max(1,+s.limit||1),c=Bi(e,n,i),u=$t(),l=t.reduce((d,m,y)=>d.set(m,y),new Map),p=(d,m)=>{const y=X_(e,c[d],o),g=y.length;for(let _=0;_<g;++_)u.add(r[_]||`${m}_${_+1}`,y[_])};return e.columnNames().forEach(d=>{l.has(d)?(a||u.add(d,e.column(d)),p(l.get(d),d),l.delete(d)):u.add(d,e.column(d))}),l.forEach(p),e.create(u)}function X_(e,t,i){const n=e.totalRows(),s=[];return e.scan((r,a)=>{const o=Bt(t(r,a)),c=Math.min(o.length,i);for(;s.length<c;)s.push(Array(n).fill(W));for(let u=0;u<c;++u)s[u][r]=o[u]}),s}function tb(e,t,i){return Z_(e,oe("spread",e,t),i)}function eb(e,t){return e.concat(t).dedupe()}function ib(e,t,i){return tf(e,oe("unroll",e,t),i&&i.drop?{...i,drop:oe("unroll",e,i.drop).names}:i)}function nb(e,t){return e.create({groups:sb(e,t)})}function sb(e,{names:t=[],exprs:i=[],ops:n=[]}){const s=t.length;if(s===0)return null;if(s===1&&!e.isFiltered()&&i[0].field){const m=e.column(i[0].field);if(m.groups)return m.groups(t)}let r=Bi(e,n,i);const a=fs(r),o=e.totalRows(),c=new Uint32Array(o),u={},l=[],p=e.data(),d=e.mask();if(d)for(let m=d.next(0);m>=0;m=d.next(m+1)){const y=a(m,p)+"",g=u[y];c[m]=g??(u[y]=l.push(m)-1)}else for(let m=0;m<o;++m){const y=a(m,p)+"",g=u[y];c[m]=g??(u[y]=l.push(m)-1)}return n.length||(r=r.map(m=>y=>m(y,p))),{keys:c,get:r,names:t,rows:l,size:l.length}}function rb(e,t){return nb(e,oe("groupby",e,t))}function ab(e,t){return e.create({order:t})}const ob=(e,t,i,n)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${i}
    : (u > v || v == null) && u != null ? ${n}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${i}
    : v !== v && u === u ? ${n} : `;function cb(e,t){const i=[],n=[],s=[];let r=null,a="0",o="0";e.isGrouped()&&(r=e.groups().keys,a="ka",o="kb");const{ops:c}=Ft(t,{table:e,value:(m,y)=>{if(i.push(m),y.escape){const g=_=>`fn[${s.length}](${_}, data)`;n.push([g("a"),g("b")]),s.push(y.escape)}else n.push([hs(y,{index:"a",op:a}),hs(y,{index:"b",op:o})])},window:!1}),u=pn(e,c),l=(m,y)=>u[m][y],p=i.length;let d="return (a, b) => {"+(l&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let m=0;m<p;++m){const y=t.get(i[m]).desc?-1:1,[g,_]=n[m];d+=ob(g,_,-y,y)}return d+="0;};",Function("op","keys","fn","data",d)(l,r,s,e.data())}function ub(e,t){return ab(e,lb(e,t))}function lb(e,t){let i=-1;const n=new Map,s=r=>n.set(++i+"",r);return t.forEach(r=>{const a=r.expr!=null?r.expr:r;if(xt(a)&&!et(a))for(const o in a)s(a[o]);else s(St(a)?ki(r,e.columnName(a)):bt(a)?ki(r):et(a)?r:N(`Invalid orderby field: ${r+""}`))}),cb(e,n)}function hb(e,t){const i=e.numRows(),n=i+t.reduce((a,o)=>a+o.numRows(),0);if(i===n)return e;const s=[e,...t],r=$t();return e.columnNames().forEach(a=>{const o=Array(n);let c=0;s.forEach(u=>{const l=u.column(a)||{get:()=>W};u.scan(p=>o[c++]=l.get(p))}),r.add(a,o)}),e.create(r.new())}function fb(e,t){const i=$t(),n=e.groups(),{get:s,names:r=[],rows:a,size:o=1}=n||{},c=new Uint32Array(o+1);r.forEach(d=>i.add(d,null));const u=n?Jh(e,t,n):[Kh(e,t)];t.outputs().map(d=>i.add(d,[]));const l=c.length-1;let p=0;for(let d=0;d<l;++d)p+=c[d+1]=t.write(u[d],i.data,c[d]);if(n){const d=e.data();r.forEach((m,y)=>{const g=i.data[m]=Array(p),_=s[y];for(let v=0,j=0;v<o;++v)g.fill(_(a[v],d),j,j+=c[v+1])})}return e.create(i.new())}function db(e){return e.isGrouped()?e.create({groups:null}):e}function pb(e){return e.isOrdered()?e.create({order:null}):e}const mb={__antijoin:(e,t,i)=>fc(e,t,i,{anti:!0}),__count:(e,t={})=>dc(e,{[t.as||"count"]:Ic()}),__cross:(e,t,i,n)=>lc(e,t,()=>!0,i,{...n,left:!0,right:!0}),__concat:hb,__dedupe:$g,__derive:o_,__except:c_,__filter:h_,__fold:d_,__impute:g_,__intersect:b_,__join:lc,__lookup:L_,__pivot:V_,__relocate:Gh,__rename:U_,__rollup:dc,__sample:H_,__select:Q_,__semijoin:fc,__spread:tb,__union:eb,__unroll:ib,__groupby:rb,__orderby:ub,__ungroup:db,__unorder:pb,__reduce:fb};Object.assign(Ve.prototype,mb);Ve.prototype;function Gb(e){return Array.from(new Set(e))}function yb(e){let t=jg(e);return gb(t)}function gb(e){for(const i of e._names)e=e.impute({[i]:()=>0});let t=0;for(const i of e._names)i.includes(" ")?e=e.rename({[i]:i.replace(/\s/gi,"_")}):i===""&&(e=e.rename({[i]:"index_"+t}),t++);return e}function Hb(e,t,i,n){let s=Object.keys(t).map(r=>{let a=e==null?void 0:e[r];if(e===void 0)return!1;{let o=t[r];if(o.response_type===_b)return Object.keys(a||{}).length==2&&a.lower>=0&&a.lower<=1e3&&a.upper>=0&&a.upper<=1e3;if(o.response_type===wb)return Object.keys(a||{}).length==2&&a.Yes>=0&&a.Yes<=1&&a.No>=0&&a.No<=1&&a.Yes+a.No==1;if(o.response_type===vb)return Object.keys(a||{}).length==n[o.group_by];if(o.response_type===bb)return Object.keys(a||{}).length==n[o.group_by]*(n[o.group_by]-1)/2}});return s.length===i&&s.every(r=>r)}let Kb=pc(""),us=pc();async function Jb(e){e.order_2=e.Order.map(t=>({ACS:Mn,DIA:Dn,STU:Rn})[t]),us.set(e),localStorage.setItem("participant-id",JSON.stringify(e))}async function Qb(){return mo(us)||us.set(JSON.parse(localStorage.getItem("participant-id"))),mo(us)}async function Zb(e,t,i){let s=await(await hf(`data-${of[e]}-${t}-${i}.csv`)).text();return yb(s)}const _b="interval",bb="joint",vb="discrete",wb="binary";export{wb as B,vb as D,_b as I,bb as J,Mn as P,mc as T,Dn as a,Rn as b,Wr as c,Kb as d,N as e,Hb as f,Eb as g,Qb as h,Ob as i,of as j,hf as k,yb as l,Zb as m,Cb as n,Fb as o,kb as p,Ab as q,Ib as r,Jb as s,Gb as u,so as w};
