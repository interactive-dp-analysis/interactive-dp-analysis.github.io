import{S as je,i as Ue,s as Xe,k as y,q as F,a as z,l as k,m as x,r as H,h as g,c as B,n as m,b as L,G as _,u as Ae,H as W,e as ge,M as Z,y as Se,z as De,A as Ve,g as le,d as he,B as Ce,I as Gt,o as gt,Q as Ke,R as pe,T as Me,U as Oe,O as vt,p as ke,N as Et,v as Qt,f as Wt,J as rs}from"./index.fc46900e.js";import{w as is,e as ss,I as ki,D as Ln,J as Ei,B as Ni,o as ft,u as ls,d as or,f as as,i as ur,h as os,j as us,k as cs,l as fs,m as hs,n as _s,p as ds,q as cr,r as ms}from"./data.2691bf3c.js";import{w as _t}from"./index.12ece268.js";function fr(e){return is(e,{escape:!0,toString(){ss("Escaped values can not be serialized.")}})}const rn="Differential Privacy Study";function hr(e){return`Click the "Continue" button to start ${e}.`}function _r(e){return`You completed ${e} of the study.`}const dr='Click the "Continue" button to proceed.',mr="You completed the main task, and we will move on to the interview.",pr="There are either missing answers or your answers fall out of the acceptable ranges.",gr="The number of remeasurements used so far",vr="You have reached the remeasurement budget",Nt="Please make sure the probabilities you entered sum to 1.",br="Please make sure the lower bound is less than or equals to the upper bound.",wr="Please make sure the numbers you enter are at least 0 and less than or equal to 1,000.",yr="Please report your answer in terms of an interval in which you are 95% confident the true answer falls.",kr="Please report your answer in terms of a probability for each bin/group.",Er="Please report your answer in terms of a probability for each pair of bins/groups.",Nr="Please report your answer in terms of probabilities for Yes and No.";function qr(e){return`You have spent <strong class="text-danger">${e||0}</strong> remeasure${e>1?"s":""} on this question.`}const xr="Center the previous errors around the previous noisy estimates",Ar="Rescale the Y axis for the current view";function ps(e){let t;return{c(){t=F(Nr)},l(n){t=H(n,Nr)},m(n,r){L(n,t,r)},p:W,d(n){n&&g(t)}}}function gs(e){let t;return{c(){t=F(Er)},l(n){t=H(n,Er)},m(n,r){L(n,t,r)},p:W,d(n){n&&g(t)}}}function vs(e){let t;return{c(){t=F(kr)},l(n){t=H(n,kr)},m(n,r){L(n,t,r)},p:W,d(n){n&&g(t)}}}function bs(e){let t;return{c(){t=F(yr)},l(n){t=H(n,yr)},m(n,r){L(n,t,r)},p:W,d(n){n&&g(t)}}}function ws(e){let t,n,r,i,s,l,a;function o(h,f){if(h[2]===ki)return bs;if(h[2]===Ln)return vs;if(h[2]===Ei)return gs;if(h[2]===Ni)return ps}let u=o(e),c=u&&u(e);return{c(){t=y("h3"),n=F("Q"),r=F(e[0]),i=F(". "),s=F(e[1]),l=z(),a=y("p"),c&&c.c(),this.h()},l(h){t=k(h,"H3",{class:!0});var f=x(t);n=H(f,"Q"),r=H(f,e[0]),i=H(f,". "),s=H(f,e[1]),f.forEach(g),l=B(h),a=k(h,"P",{class:!0});var d=x(a);c&&c.l(d),d.forEach(g),this.h()},h(){m(t,"class","text-center mb-1"),m(a,"class","text-center mb-5")},m(h,f){L(h,t,f),_(t,n),_(t,r),_(t,i),_(t,s),L(h,l,f),L(h,a,f),c&&c.m(a,null)},p(h,[f]){f&1&&Ae(r,h[0]),f&2&&Ae(s,h[1]),u===(u=o(h))&&c?c.p(h,f):(c&&c.d(1),c=u&&u(h),c&&(c.c(),c.m(a,null)))},i:W,o:W,d(h){h&&g(t),h&&g(l),h&&g(a),c&&c.d()}}}function ys(e,t,n){let{q_no:r,question:i,response_type:s}=t;return e.$$set=l=>{"q_no"in l&&n(0,r=l.q_no),"question"in l&&n(1,i=l.question),"response_type"in l&&n(2,s=l.response_type)},[r,i,s]}class ks extends je{constructor(t){super(),Ue(this,t,ys,ws,Xe,{q_no:0,question:1,response_type:2})}}function un(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Es(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qi(e){let t,n,r;e.length!==2?(t=un,n=(a,o)=>un(e(a),o),r=(a,o)=>e(a)-o):(t=e===un||e===Es?e:Ns,n=e,r=e);function i(a,o,u=0,c=a.length){if(u<c){if(t(o,o)!==0)return c;do{const h=u+c>>>1;n(a[h],o)<0?u=h+1:c=h}while(u<c)}return u}function s(a,o,u=0,c=a.length){if(u<c){if(t(o,o)!==0)return c;do{const h=u+c>>>1;n(a[h],o)<=0?u=h+1:c=h}while(u<c)}return u}function l(a,o,u=0,c=a.length){const h=i(a,o,u,c-1);return h>u&&r(a[h-1],o)>-r(a[h],o)?h-1:h}return{left:i,center:l,right:s}}function Ns(){return 0}function qs(e){return e===null?NaN:+e}const xs=qi(un),As=xs.right;qi(qs).center;const Is=As;function An(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class Ir extends Map{constructor(t,n=Ss){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Tr(this,t))}has(t){return super.has(Tr(this,t))}set(t,n){return super.set(Ts(this,t),n)}delete(t){return super.delete(Ms(this,t))}}function Tr({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Ts({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Ms({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Ss(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Ds=Math.sqrt(50),Vs=Math.sqrt(10),Cs=Math.sqrt(2);function dn(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=Ds?10:s>=Vs?5:s>=Cs?2:1;let a,o,u;return i<0?(u=Math.pow(10,-i)/l,a=Math.round(e*u),o=Math.round(t*u),a/u<e&&++a,o/u>t&&--o,u=-u):(u=Math.pow(10,i)*l,a=Math.round(e/u),o=Math.round(t/u),a*u<e&&++a,o*u>t&&--o),o<a&&.5<=n&&n<2?dn(e,t,n*2):[a,o,u]}function Os(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?dn(t,e,n):dn(e,t,n);if(!(s>=i))return[];const a=s-i+1,o=new Array(a);if(r)if(l<0)for(let u=0;u<a;++u)o[u]=(s-u)/-l;else for(let u=0;u<a;++u)o[u]=(s-u)*l;else if(l<0)for(let u=0;u<a;++u)o[u]=(i+u)/-l;else for(let u=0;u<a;++u)o[u]=(i+u)*l;return o}function Dn(e,t,n){return t=+t,e=+e,n=+n,dn(e,t,n)[2]}function Ps(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Dn(t,e,n):Dn(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function In(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Rs(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function zs(e){return e}var Tn=1,cn=2,Vn=3,jt=4,Mr=1e-6;function Bs(e){return"translate("+e+",0)"}function Fs(e){return"translate(0,"+e+")"}function Hs(e){return t=>+e(t)}function Ls(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function js(){return!this.__axis}function jn(e,t){var n=[],r=null,i=null,s=6,l=6,a=3,o=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===Tn||e===jt?-1:1,c=e===jt||e===cn?"x":"y",h=e===Tn||e===Vn?Bs:Fs;function f(d){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),b=i??(t.tickFormat?t.tickFormat.apply(t,n):zs),v=Math.max(s,0)+a,q=t.range(),N=+q[0]+o,S=+q[q.length-1]+o,A=(t.bandwidth?Ls:Hs)(t.copy(),o),T=d.selection?d.selection():d,D=T.selectAll(".domain").data([null]),O=T.selectAll(".tick").data(p,t).order(),U=O.exit(),M=O.enter().append("g").attr("class","tick"),P=O.select("line"),E=O.select("text");D=D.merge(D.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),O=O.merge(M),P=P.merge(M.append("line").attr("stroke","currentColor").attr(c+"2",u*s)),E=E.merge(M.append("text").attr("fill","currentColor").attr(c,u*v).attr("dy",e===Tn?"0em":e===Vn?"0.71em":"0.32em")),d!==T&&(D=D.transition(d),O=O.transition(d),P=P.transition(d),E=E.transition(d),U=U.transition(d).attr("opacity",Mr).attr("transform",function(w){return isFinite(w=A(w))?h(w+o):this.getAttribute("transform")}),M.attr("opacity",Mr).attr("transform",function(w){var I=this.parentNode.__axis;return h((I&&isFinite(I=I(w))?I:A(w))+o)})),U.remove(),D.attr("d",e===jt||e===cn?l?"M"+u*l+","+N+"H"+o+"V"+S+"H"+u*l:"M"+o+","+N+"V"+S:l?"M"+N+","+u*l+"V"+o+"H"+S+"V"+u*l:"M"+N+","+o+"H"+S),O.attr("opacity",1).attr("transform",function(w){return h(A(w)+o)}),P.attr(c+"2",u*s),E.attr(c,u*v).text(b),T.filter(js).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===cn?"start":e===jt?"end":"middle"),T.each(function(){this.__axis=A})}return f.scale=function(d){return arguments.length?(t=d,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),f):r&&r.slice()},f.tickFormat=function(d){return arguments.length?(i=d,f):i},f.tickSize=function(d){return arguments.length?(s=l=+d,f):s},f.tickSizeInner=function(d){return arguments.length?(s=+d,f):s},f.tickSizeOuter=function(d){return arguments.length?(l=+d,f):l},f.tickPadding=function(d){return arguments.length?(a=+d,f):a},f.offset=function(d){return arguments.length?(o=+d,f):o},f}function Us(e){return jn(cn,e)}function Xs(e){return jn(Vn,e)}function Ys(e){return jn(jt,e)}var Gs={value:()=>{}};function xi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new fn(n)}function fn(e){this._=e}function Qs(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}fn.prototype=xi.prototype={constructor:fn,on:function(e,t){var n=this._,r=Qs(e+"",n),i,s=-1,l=r.length;if(arguments.length<2){for(;++s<l;)if((i=(e=r[s]).type)&&(i=Ws(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<l;)if(i=(e=r[s]).type)n[i]=Sr(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Sr(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new fn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Ws(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Sr(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Gs,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Cn="http://www.w3.org/1999/xhtml";const Dr={svg:"http://www.w3.org/2000/svg",xhtml:Cn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Dr.hasOwnProperty(t)?{space:Dr[t],local:e}:e}function Js(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Cn&&t.documentElement.namespaceURI===Cn?t.createElement(e):t.createElementNS(n,e)}}function Ks(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ai(e){var t=Nn(e);return(t.local?Ks:Js)(t)}function Zs(){}function Un(e){return e==null?Zs:function(){return this.querySelector(e)}}function $s(e){typeof e!="function"&&(e=Un(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],l=s.length,a=r[i]=new Array(l),o,u,c=0;c<l;++c)(o=s[c])&&(u=e.call(o,o.__data__,c,s))&&("__data__"in o&&(u.__data__=o.__data__),a[c]=u);return new Ze(r,this._parents)}function el(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function tl(){return[]}function Ii(e){return e==null?tl:function(){return this.querySelectorAll(e)}}function nl(e){return function(){return el(e.apply(this,arguments))}}function rl(e){typeof e=="function"?e=nl(e):e=Ii(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var l=t[s],a=l.length,o,u=0;u<a;++u)(o=l[u])&&(r.push(e.call(o,o.__data__,u,l)),i.push(o));return new Ze(r,i)}function Ti(e){return function(){return this.matches(e)}}function Mi(e){return function(t){return t.matches(e)}}var il=Array.prototype.find;function sl(e){return function(){return il.call(this.children,e)}}function ll(){return this.firstElementChild}function al(e){return this.select(e==null?ll:sl(typeof e=="function"?e:Mi(e)))}var ol=Array.prototype.filter;function ul(){return Array.from(this.children)}function cl(e){return function(){return ol.call(this.children,e)}}function fl(e){return this.selectAll(e==null?ul:cl(typeof e=="function"?e:Mi(e)))}function hl(e){typeof e!="function"&&(e=Ti(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],l=s.length,a=r[i]=[],o,u=0;u<l;++u)(o=s[u])&&e.call(o,o.__data__,u,s)&&a.push(o);return new Ze(r,this._parents)}function Si(e){return new Array(e.length)}function _l(){return new Ze(this._enter||this._groups.map(Si),this._parents)}function mn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}mn.prototype={constructor:mn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function dl(e){return function(){return e}}function ml(e,t,n,r,i,s){for(var l=0,a,o=t.length,u=s.length;l<u;++l)(a=t[l])?(a.__data__=s[l],r[l]=a):n[l]=new mn(e,s[l]);for(;l<o;++l)(a=t[l])&&(i[l]=a)}function pl(e,t,n,r,i,s,l){var a,o,u=new Map,c=t.length,h=s.length,f=new Array(c),d;for(a=0;a<c;++a)(o=t[a])&&(f[a]=d=l.call(o,o.__data__,a,t)+"",u.has(d)?i[a]=o:u.set(d,o));for(a=0;a<h;++a)d=l.call(e,s[a],a,s)+"",(o=u.get(d))?(r[a]=o,o.__data__=s[a],u.delete(d)):n[a]=new mn(e,s[a]);for(a=0;a<c;++a)(o=t[a])&&u.get(f[a])===o&&(i[a]=o)}function gl(e){return e.__data__}function vl(e,t){if(!arguments.length)return Array.from(this,gl);var n=t?pl:ml,r=this._parents,i=this._groups;typeof e!="function"&&(e=dl(e));for(var s=i.length,l=new Array(s),a=new Array(s),o=new Array(s),u=0;u<s;++u){var c=r[u],h=i[u],f=h.length,d=bl(e.call(c,c&&c.__data__,u,r)),p=d.length,b=a[u]=new Array(p),v=l[u]=new Array(p),q=o[u]=new Array(f);n(c,h,b,v,q,d,t);for(var N=0,S=0,A,T;N<p;++N)if(A=b[N]){for(N>=S&&(S=N+1);!(T=v[S])&&++S<p;);A._next=T||null}}return l=new Ze(l,r),l._enter=a,l._exit=o,l}function bl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wl(){return new Ze(this._exit||this._groups.map(Si),this._parents)}function yl(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function kl(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,l=Math.min(i,s),a=new Array(i),o=0;o<l;++o)for(var u=n[o],c=r[o],h=u.length,f=a[o]=new Array(h),d,p=0;p<h;++p)(d=u[p]||c[p])&&(f[p]=d);for(;o<i;++o)a[o]=n[o];return new Ze(a,this._parents)}function El(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],l;--i>=0;)(l=r[i])&&(s&&l.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(l,s),s=l);return this}function Nl(e){e||(e=ql);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var l=n[s],a=l.length,o=i[s]=new Array(a),u,c=0;c<a;++c)(u=l[c])&&(o[c]=u);o.sort(t)}return new Ze(i,this._parents).order()}function ql(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Al(){return Array.from(this)}function Il(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var l=r[i];if(l)return l}return null}function Tl(){let e=0;for(const t of this)++e;return e}function Ml(){return!this.node()}function Sl(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,l=i.length,a;s<l;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Dl(e){return function(){this.removeAttribute(e)}}function Vl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cl(e,t){return function(){this.setAttribute(e,t)}}function Ol(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Pl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Rl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function zl(e,t){var n=Nn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Vl:Dl:typeof t=="function"?n.local?Rl:Pl:n.local?Ol:Cl)(n,t))}function Di(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Bl(e){return function(){this.style.removeProperty(e)}}function Fl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Hl(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ll(e,t,n){return arguments.length>1?this.each((t==null?Bl:typeof t=="function"?Hl:Fl)(e,t,n??"")):qt(this.node(),e)}function qt(e,t){return e.style.getPropertyValue(t)||Di(e).getComputedStyle(e,null).getPropertyValue(t)}function jl(e){return function(){delete this[e]}}function Ul(e,t){return function(){this[e]=t}}function Xl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Yl(e,t){return arguments.length>1?this.each((t==null?jl:typeof t=="function"?Xl:Ul)(e,t)):this.node()[e]}function Vi(e){return e.trim().split(/^|\s+/)}function Xn(e){return e.classList||new Ci(e)}function Ci(e){this._node=e,this._names=Vi(e.getAttribute("class")||"")}Ci.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Oi(e,t){for(var n=Xn(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Pi(e,t){for(var n=Xn(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Gl(e){return function(){Oi(this,e)}}function Ql(e){return function(){Pi(this,e)}}function Wl(e,t){return function(){(t.apply(this,arguments)?Oi:Pi)(this,e)}}function Jl(e,t){var n=Vi(e+"");if(arguments.length<2){for(var r=Xn(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Wl:t?Gl:Ql)(n,t))}function Kl(){this.textContent=""}function Zl(e){return function(){this.textContent=e}}function $l(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ea(e){return arguments.length?this.each(e==null?Kl:(typeof e=="function"?$l:Zl)(e)):this.node().textContent}function ta(){this.innerHTML=""}function na(e){return function(){this.innerHTML=e}}function ra(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ia(e){return arguments.length?this.each(e==null?ta:(typeof e=="function"?ra:na)(e)):this.node().innerHTML}function sa(){this.nextSibling&&this.parentNode.appendChild(this)}function la(){return this.each(sa)}function aa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oa(){return this.each(aa)}function ua(e){var t=typeof e=="function"?e:Ai(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ca(){return null}function fa(e,t){var n=typeof e=="function"?e:Ai(e),r=t==null?ca:typeof t=="function"?t:Un(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ha(){var e=this.parentNode;e&&e.removeChild(this)}function _a(){return this.each(ha)}function da(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ma(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pa(e){return this.select(e?ma:da)}function ga(e){return arguments.length?this.property("__data__",e):this.node().__data__}function va(e){return function(t){e.call(this,t,this.__data__)}}function ba(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function wa(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function ya(e,t,n){return function(){var r=this.__on,i,s=va(t);if(r){for(var l=0,a=r.length;l<a;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function ka(e,t,n){var r=ba(e+""),i,s=r.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var o=0,u=a.length,c;o<u;++o)for(i=0,c=a[o];i<s;++i)if((l=r[i]).type===c.type&&l.name===c.name)return c.value}return}for(a=t?ya:wa,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Ri(e,t,n){var r=Di(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Ea(e,t){return function(){return Ri(this,e,t)}}function Na(e,t){return function(){return Ri(this,e,t.apply(this,arguments))}}function qa(e,t){return this.each((typeof t=="function"?Na:Ea)(e,t))}function*xa(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,l;i<s;++i)(l=r[i])&&(yield l)}var zi=[null];function Ze(e,t){this._groups=e,this._parents=t}function $t(){return new Ze([[document.documentElement]],zi)}function Aa(){return this}Ze.prototype=$t.prototype={constructor:Ze,select:$s,selectAll:rl,selectChild:al,selectChildren:fl,filter:hl,data:vl,enter:_l,exit:wl,join:yl,merge:kl,selection:Aa,order:El,sort:Nl,call:xl,nodes:Al,node:Il,size:Tl,empty:Ml,each:Sl,attr:zl,style:Ll,property:Yl,classed:Jl,text:ea,html:ia,raise:la,lower:oa,append:ua,insert:fa,remove:_a,clone:pa,datum:ga,on:ka,dispatch:qa,[Symbol.iterator]:xa};function Vr(e){return typeof e=="string"?new Ze([[document.querySelector(e)]],[document.documentElement]):new Ze([[e]],zi)}function Yn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Bi(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function en(){}var Jt=.7,pn=1/Jt,kt="\\s*([+-]?\\d+)\\s*",Kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",st="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ia=/^#([0-9a-f]{3,8})$/,Ta=new RegExp(`^rgb\\(${kt},${kt},${kt}\\)$`),Ma=new RegExp(`^rgb\\(${st},${st},${st}\\)$`),Sa=new RegExp(`^rgba\\(${kt},${kt},${kt},${Kt}\\)$`),Da=new RegExp(`^rgba\\(${st},${st},${st},${Kt}\\)$`),Va=new RegExp(`^hsl\\(${Kt},${st},${st}\\)$`),Ca=new RegExp(`^hsla\\(${Kt},${st},${st},${Kt}\\)$`),Cr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yn(en,mt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Or,formatHex:Or,formatHex8:Oa,formatHsl:Pa,formatRgb:Pr,toString:Pr});function Or(){return this.rgb().formatHex()}function Oa(){return this.rgb().formatHex8()}function Pa(){return Fi(this).formatHsl()}function Pr(){return this.rgb().formatRgb()}function mt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ia.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Rr(t):n===3?new Ge(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?sn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?sn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ta.exec(e))?new Ge(t[1],t[2],t[3],1):(t=Ma.exec(e))?new Ge(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Sa.exec(e))?sn(t[1],t[2],t[3],t[4]):(t=Da.exec(e))?sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Va.exec(e))?Fr(t[1],t[2]/100,t[3]/100,1):(t=Ca.exec(e))?Fr(t[1],t[2]/100,t[3]/100,t[4]):Cr.hasOwnProperty(e)?Rr(Cr[e]):e==="transparent"?new Ge(NaN,NaN,NaN,0):null}function Rr(e){return new Ge(e>>16&255,e>>8&255,e&255,1)}function sn(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ge(e,t,n,r)}function Ra(e){return e instanceof en||(e=mt(e)),e?(e=e.rgb(),new Ge(e.r,e.g,e.b,e.opacity)):new Ge}function On(e,t,n,r){return arguments.length===1?Ra(e):new Ge(e,t,n,r??1)}function Ge(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Yn(Ge,On,Bi(en,{brighter(e){return e=e==null?pn:Math.pow(pn,e),new Ge(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jt:Math.pow(Jt,e),new Ge(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ge(dt(this.r),dt(this.g),dt(this.b),gn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zr,formatHex:zr,formatHex8:za,formatRgb:Br,toString:Br}));function zr(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}`}function za(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}${ht((isNaN(this.opacity)?1:this.opacity)*255)}`}function Br(){const e=gn(this.opacity);return`${e===1?"rgb(":"rgba("}${dt(this.r)}, ${dt(this.g)}, ${dt(this.b)}${e===1?")":`, ${e})`}`}function gn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function dt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ht(e){return e=dt(e),(e<16?"0":"")+e.toString(16)}function Fr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tt(e,t,n,r)}function Fi(e){if(e instanceof tt)return new tt(e.h,e.s,e.l,e.opacity);if(e instanceof en||(e=mt(e)),!e)return new tt;if(e instanceof tt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,a=s-i,o=(s+i)/2;return a?(t===s?l=(n-r)/a+(n<r)*6:n===s?l=(r-t)/a+2:l=(t-n)/a+4,a/=o<.5?s+i:2-s-i,l*=60):a=o>0&&o<1?0:l,new tt(l,a,o,e.opacity)}function Ba(e,t,n,r){return arguments.length===1?Fi(e):new tt(e,t,n,r??1)}function tt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Yn(tt,Ba,Bi(en,{brighter(e){return e=e==null?pn:Math.pow(pn,e),new tt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jt:Math.pow(Jt,e),new tt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ge(Mn(e>=240?e-240:e+120,i,r),Mn(e,i,r),Mn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new tt(Hr(this.h),ln(this.s),ln(this.l),gn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gn(this.opacity);return`${e===1?"hsl(":"hsla("}${Hr(this.h)}, ${ln(this.s)*100}%, ${ln(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Hr(e){return e=(e||0)%360,e<0?e+360:e}function ln(e){return Math.max(0,Math.min(1,e||0))}function Mn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Gn=e=>()=>e;function Fa(e,t){return function(n){return e+n*t}}function Ha(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function La(e){return(e=+e)==1?Hi:function(t,n){return n-t?Ha(t,n,e):Gn(isNaN(t)?n:t)}}function Hi(e,t){var n=t-e;return n?Fa(e,n):Gn(isNaN(e)?t:e)}const vn=function e(t){var n=La(t);function r(i,s){var l=n((i=On(i)).r,(s=On(s)).r),a=n(i.g,s.g),o=n(i.b,s.b),u=Hi(i.opacity,s.opacity);return function(c){return i.r=l(c),i.g=a(c),i.b=o(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function ja(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Ua(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Xa(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=Qn(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(a){for(l=0;l<r;++l)s[l]=i[l](a);return s}}function Ya(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function et(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ga(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Qn(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Pn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sn=new RegExp(Pn.source,"g");function Qa(e){return function(){return e}}function Wa(e){return function(t){return e(t)+""}}function Li(e,t){var n=Pn.lastIndex=Sn.lastIndex=0,r,i,s,l=-1,a=[],o=[];for(e=e+"",t=t+"";(r=Pn.exec(e))&&(i=Sn.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[l]?a[l]+=s:a[++l]=s),(r=r[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,o.push({i:l,x:et(r,i)})),n=Sn.lastIndex;return n<t.length&&(s=t.slice(n),a[l]?a[l]+=s:a[++l]=s),a.length<2?o[0]?Wa(o[0].x):Qa(t):(t=o.length,function(u){for(var c=0,h;c<t;++c)a[(h=o[c]).i]=h.x(u);return a.join("")})}function Qn(e,t){var n=typeof t,r;return t==null||n==="boolean"?Gn(t):(n==="number"?et:n==="string"?(r=mt(t))?(t=r,vn):Li:t instanceof mt?vn:t instanceof Date?Ya:Ua(t)?ja:Array.isArray(t)?Xa:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ga:et)(e,t)}function Ja(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Lr=180/Math.PI,Rn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ji(e,t,n,r,i,s){var l,a,o;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(o=e*n+t*r)&&(n-=e*o,r-=t*o),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,o/=a),e*r<t*n&&(e=-e,t=-t,o=-o,l=-l),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Lr,skewX:Math.atan(o)*Lr,scaleX:l,scaleY:a}}var an;function Ka(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Rn:ji(t.a,t.b,t.c,t.d,t.e,t.f)}function Za(e){return e==null||(an||(an=document.createElementNS("http://www.w3.org/2000/svg","g")),an.setAttribute("transform",e),!(e=an.transform.baseVal.consolidate()))?Rn:(e=e.matrix,ji(e.a,e.b,e.c,e.d,e.e,e.f))}function Ui(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,h,f,d,p){if(u!==h||c!==f){var b=d.push("translate(",null,t,null,n);p.push({i:b-4,x:et(u,h)},{i:b-2,x:et(c,f)})}else(h||f)&&d.push("translate("+h+t+f+n)}function l(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:et(u,c)})):c&&h.push(i(h)+"rotate("+c+r)}function a(u,c,h,f){u!==c?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:et(u,c)}):c&&h.push(i(h)+"skewX("+c+r)}function o(u,c,h,f,d,p){if(u!==h||c!==f){var b=d.push(i(d)+"scale(",null,",",null,")");p.push({i:b-4,x:et(u,h)},{i:b-2,x:et(c,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,h,f),l(u.rotate,c.rotate,h,f),a(u.skewX,c.skewX,h,f),o(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(d){for(var p=-1,b=f.length,v;++p<b;)h[(v=f[p]).i]=v.x(d);return h.join("")}}}var $a=Ui(Ka,"px, ","px)","deg)"),eo=Ui(Za,", ",")",")"),xt=0,Ut=0,Lt=0,Xi=1e3,bn,Xt,wn=0,pt=0,qn=0,Zt=typeof performance=="object"&&performance.now?performance:Date,Yi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Wn(){return pt||(Yi(to),pt=Zt.now()+qn)}function to(){pt=0}function yn(){this._call=this._time=this._next=null}yn.prototype=Gi.prototype={constructor:yn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Wn():+n)+(t==null?0:+t),!this._next&&Xt!==this&&(Xt?Xt._next=this:bn=this,Xt=this),this._call=e,this._time=n,zn()},stop:function(){this._call&&(this._call=null,this._time=1/0,zn())}};function Gi(e,t,n){var r=new yn;return r.restart(e,t,n),r}function no(){Wn(),++xt;for(var e=bn,t;e;)(t=pt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xt}function jr(){pt=(wn=Zt.now())+qn,xt=Ut=0;try{no()}finally{xt=0,io(),pt=0}}function ro(){var e=Zt.now(),t=e-wn;t>Xi&&(qn-=t,wn=e)}function io(){for(var e,t=bn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:bn=n);Xt=e,zn(r)}function zn(e){if(!xt){Ut&&(Ut=clearTimeout(Ut));var t=e-pt;t>24?(e<1/0&&(Ut=setTimeout(jr,e-Zt.now()-qn)),Lt&&(Lt=clearInterval(Lt))):(Lt||(wn=Zt.now(),Lt=setInterval(ro,Xi)),xt=1,Yi(jr))}}function Ur(e,t,n){var r=new yn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var so=xi("start","end","cancel","interrupt"),lo=[],Qi=0,Xr=1,Bn=2,hn=3,Yr=4,Fn=5,_n=6;function xn(e,t,n,r,i,s){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;ao(e,n,{name:t,index:r,group:i,on:so,tween:lo,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Qi})}function Jn(e,t){var n=rt(e,t);if(n.state>Qi)throw new Error("too late; already scheduled");return n}function lt(e,t){var n=rt(e,t);if(n.state>hn)throw new Error("too late; already running");return n}function rt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ao(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Gi(s,0,n.time);function s(u){n.state=Xr,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var c,h,f,d;if(n.state!==Xr)return o();for(c in r)if(d=r[c],d.name===n.name){if(d.state===hn)return Ur(l);d.state===Yr?(d.state=_n,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=_n,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(Ur(function(){n.state===hn&&(n.state=Yr,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Bn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Bn){for(n.state=hn,i=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(o),n.state=Fn,1),h=-1,f=i.length;++h<f;)i[h].call(e,c);n.state===Fn&&(n.on.call("end",e,e.__data__,n.index,n.group),o())}function o(){n.state=_n,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function oo(e,t){var n=e.__transition,r,i,s=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){s=!1;continue}i=r.state>Bn&&r.state<Fn,r.state=_n,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}s&&delete e.__transition}}function uo(e){return this.each(function(){oo(this,e)})}function co(e,t){var n,r;return function(){var i=lt(this,e),s=i.tween;if(s!==n){r=n=s;for(var l=0,a=r.length;l<a;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function fo(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=lt(this,e),l=s.tween;if(l!==r){i=(r=l).slice();for(var a={name:t,value:n},o=0,u=i.length;o<u;++o)if(i[o].name===t){i[o]=a;break}o===u&&i.push(a)}s.tween=i}}function ho(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=rt(this.node(),n).tween,i=0,s=r.length,l;i<s;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?co:fo)(n,e,t))}function Kn(e,t,n){var r=e._id;return e.each(function(){var i=lt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return rt(i,r).value[t]}}function Wi(e,t){var n;return(typeof t=="number"?et:t instanceof mt?vn:(n=mt(t))?(t=n,vn):Li)(e,t)}function _o(e){return function(){this.removeAttribute(e)}}function mo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function po(e,t,n){var r,i=n+"",s;return function(){var l=this.getAttribute(e);return l===i?null:l===r?s:s=t(r=l,n)}}function go(e,t,n){var r,i=n+"",s;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?s:s=t(r=l,n)}}function vo(e,t,n){var r,i,s;return function(){var l,a=n(this),o;return a==null?void this.removeAttribute(e):(l=this.getAttribute(e),o=a+"",l===o?null:l===r&&o===i?s:(i=o,s=t(r=l,a)))}}function bo(e,t,n){var r,i,s;return function(){var l,a=n(this),o;return a==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),o=a+"",l===o?null:l===r&&o===i?s:(i=o,s=t(r=l,a)))}}function wo(e,t){var n=Nn(e),r=n==="transform"?eo:Wi;return this.attrTween(e,typeof t=="function"?(n.local?bo:vo)(n,r,Kn(this,"attr."+e,t)):t==null?(n.local?mo:_o)(n):(n.local?go:po)(n,r,t))}function yo(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ko(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Eo(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ko(e,s)),n}return i._value=t,i}function No(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&yo(e,s)),n}return i._value=t,i}function qo(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Nn(e);return this.tween(n,(r.local?Eo:No)(r,t))}function xo(e,t){return function(){Jn(this,e).delay=+t.apply(this,arguments)}}function Ao(e,t){return t=+t,function(){Jn(this,e).delay=t}}function Io(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xo:Ao)(t,e)):rt(this.node(),t).delay}function To(e,t){return function(){lt(this,e).duration=+t.apply(this,arguments)}}function Mo(e,t){return t=+t,function(){lt(this,e).duration=t}}function So(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?To:Mo)(t,e)):rt(this.node(),t).duration}function Do(e,t){if(typeof t!="function")throw new Error;return function(){lt(this,e).ease=t}}function Vo(e){var t=this._id;return arguments.length?this.each(Do(t,e)):rt(this.node(),t).ease}function Co(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;lt(this,e).ease=n}}function Oo(e){if(typeof e!="function")throw new Error;return this.each(Co(this._id,e))}function Po(e){typeof e!="function"&&(e=Ti(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],l=s.length,a=r[i]=[],o,u=0;u<l;++u)(o=s[u])&&e.call(o,o.__data__,u,s)&&a.push(o);return new ut(r,this._parents,this._name,this._id)}function Ro(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),l=new Array(r),a=0;a<s;++a)for(var o=t[a],u=n[a],c=o.length,h=l[a]=new Array(c),f,d=0;d<c;++d)(f=o[d]||u[d])&&(h[d]=f);for(;a<r;++a)l[a]=t[a];return new ut(l,this._parents,this._name,this._id)}function zo(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Bo(e,t,n){var r,i,s=zo(t)?Jn:lt;return function(){var l=s(this,e),a=l.on;a!==r&&(i=(r=a).copy()).on(t,n),l.on=i}}function Fo(e,t){var n=this._id;return arguments.length<2?rt(this.node(),n).on.on(e):this.each(Bo(n,e,t))}function Ho(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Lo(){return this.on("end.remove",Ho(this._id))}function jo(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Un(e));for(var r=this._groups,i=r.length,s=new Array(i),l=0;l<i;++l)for(var a=r[l],o=a.length,u=s[l]=new Array(o),c,h,f=0;f<o;++f)(c=a[f])&&(h=e.call(c,c.__data__,f,a))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,xn(u[f],t,n,f,u,rt(c,n)));return new ut(s,this._parents,t,n)}function Uo(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ii(e));for(var r=this._groups,i=r.length,s=[],l=[],a=0;a<i;++a)for(var o=r[a],u=o.length,c,h=0;h<u;++h)if(c=o[h]){for(var f=e.call(c,c.__data__,h,o),d,p=rt(c,n),b=0,v=f.length;b<v;++b)(d=f[b])&&xn(d,t,n,b,f,p);s.push(f),l.push(c)}return new ut(s,l,t,n)}var Xo=$t.prototype.constructor;function Yo(){return new Xo(this._groups,this._parents)}function Go(e,t){var n,r,i;return function(){var s=qt(this,e),l=(this.style.removeProperty(e),qt(this,e));return s===l?null:s===n&&l===r?i:i=t(n=s,r=l)}}function Ji(e){return function(){this.style.removeProperty(e)}}function Qo(e,t,n){var r,i=n+"",s;return function(){var l=qt(this,e);return l===i?null:l===r?s:s=t(r=l,n)}}function Wo(e,t,n){var r,i,s;return function(){var l=qt(this,e),a=n(this),o=a+"";return a==null&&(o=a=(this.style.removeProperty(e),qt(this,e))),l===o?null:l===r&&o===i?s:(i=o,s=t(r=l,a))}}function Jo(e,t){var n,r,i,s="style."+t,l="end."+s,a;return function(){var o=lt(this,e),u=o.on,c=o.value[s]==null?a||(a=Ji(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(l,i=c),o.on=r}}function Ko(e,t,n){var r=(e+="")=="transform"?$a:Wi;return t==null?this.styleTween(e,Go(e,r)).on("end.style."+e,Ji(e)):typeof t=="function"?this.styleTween(e,Wo(e,r,Kn(this,"style."+e,t))).each(Jo(this._id,e)):this.styleTween(e,Qo(e,r,t),n).on("end.style."+e,null)}function Zo(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function $o(e,t,n){var r,i;function s(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&Zo(e,l,n)),r}return s._value=t,s}function eu(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,$o(e,t,n??""))}function tu(e){return function(){this.textContent=e}}function nu(e){return function(){var t=e(this);this.textContent=t??""}}function ru(e){return this.tween("text",typeof e=="function"?nu(Kn(this,"text",e)):tu(e==null?"":e+""))}function iu(e){return function(t){this.textContent=e.call(this,t)}}function su(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&iu(i)),t}return r._value=e,r}function lu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,su(e))}function au(){for(var e=this._name,t=this._id,n=Ki(),r=this._groups,i=r.length,s=0;s<i;++s)for(var l=r[s],a=l.length,o,u=0;u<a;++u)if(o=l[u]){var c=rt(o,t);xn(o,e,n,u,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ut(r,this._parents,e,n)}function ou(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,l){var a={value:l},o={value:function(){--i===0&&s()}};n.each(function(){var u=lt(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(o)),u.on=t}),i===0&&s()})}var uu=0;function ut(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ki(){return++uu}var ot=$t.prototype;ut.prototype={constructor:ut,select:jo,selectAll:Uo,selectChild:ot.selectChild,selectChildren:ot.selectChildren,filter:Po,merge:Ro,selection:Yo,transition:au,call:ot.call,nodes:ot.nodes,node:ot.node,size:ot.size,empty:ot.empty,each:ot.each,on:Fo,attr:wo,attrTween:qo,style:Ko,styleTween:eu,text:ru,textTween:lu,remove:Lo,tween:ho,delay:Io,duration:So,ease:Vo,easeVarying:Oo,end:ou,[Symbol.iterator]:ot[Symbol.iterator]};function cu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var fu={time:null,delay:0,duration:250,ease:cu};function hu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function _u(e){var t,n;e instanceof ut?(t=e._id,e=e._name):(t=Ki(),(n=fu).time=Wn(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var l=r[s],a=l.length,o,u=0;u<a;++u)(o=l[u])&&xn(o,e,t,u,l,n||hu(o,t));return new ut(r,this._parents,e,t)}$t.prototype.interrupt=uo;$t.prototype.transition=_u;function du(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function kn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function At(e){return e=kn(Math.abs(e)),e?e[1]:NaN}function mu(e,t){return function(n,r){for(var i=n.length,s=[],l=0,a=e[0],o=0;i>0&&a>0&&(o+a+1>r&&(a=Math.max(1,r-o)),s.push(n.substring(i-=a,i+a)),!((o+=a+1)>r));)a=e[l=(l+1)%e.length];return s.reverse().join(t)}}function pu(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var gu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function En(e){if(!(t=gu.exec(e)))throw new Error("invalid format: "+e);var t;return new Zn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}En.prototype=Zn.prototype;function Zn(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Zn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vu(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Zi;function bu(e,t){var n=kn(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Zi=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+kn(e,Math.max(0,t+s-1))[0]}function Gr(e,t){var n=kn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Qr={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:du,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Gr(e*100,t),r:Gr,s:bu,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Wr(e){return e}var Jr=Array.prototype.map,Kr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function wu(e){var t=e.grouping===void 0||e.thousands===void 0?Wr:mu(Jr.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Wr:pu(Jr.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",o=e.nan===void 0?"NaN":e.nan+"";function u(h){h=En(h);var f=h.fill,d=h.align,p=h.sign,b=h.symbol,v=h.zero,q=h.width,N=h.comma,S=h.precision,A=h.trim,T=h.type;T==="n"?(N=!0,T="g"):Qr[T]||(S===void 0&&(S=12),A=!0,T="g"),(v||f==="0"&&d==="=")&&(v=!0,f="0",d="=");var D=b==="$"?n:b==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",O=b==="$"?r:/[%p]/.test(T)?l:"",U=Qr[T],M=/[defgprs%]/.test(T);S=S===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function P(E){var w=D,I=O,j,X,J;if(T==="c")I=U(E)+I,E="";else{E=+E;var K=E<0||1/E<0;if(E=isNaN(E)?o:U(Math.abs(E),S),A&&(E=vu(E)),K&&+E==0&&p!=="+"&&(K=!1),w=(K?p==="("?p:a:p==="-"||p==="("?"":p)+w,I=(T==="s"?Kr[8+Zi/3]:"")+I+(K&&p==="("?")":""),M){for(j=-1,X=E.length;++j<X;)if(J=E.charCodeAt(j),48>J||J>57){I=(J===46?i+E.slice(j+1):E.slice(j))+I,E=E.slice(0,j);break}}}N&&!v&&(E=t(E,1/0));var te=w.length+E.length+I.length,G=te<q?new Array(q-te+1).join(f):"";switch(N&&v&&(E=t(G+E,G.length?q-I.length:1/0),G=""),d){case"<":E=w+E+I+G;break;case"=":E=w+G+E+I;break;case"^":E=G.slice(0,te=G.length>>1)+w+E+I+G.slice(te);break;default:E=G+w+E+I;break}return s(E)}return P.toString=function(){return h+""},P}function c(h,f){var d=u((h=En(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(At(f)/3)))*3,b=Math.pow(10,-p),v=Kr[8+p/3];return function(q){return d(b*q)+v}}return{format:u,formatPrefix:c}}var on,$n,$i;yu({thousands:",",grouping:[3],currency:["$",""]});function yu(e){return on=wu(e),$n=on.format,$i=on.formatPrefix,on}function ku(e){return Math.max(0,-At(Math.abs(e)))}function Eu(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(At(t)/3)))*3-At(Math.abs(e)))}function Nu(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,At(t)-At(e))+1}function er(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Zr=Symbol("implicit");function es(){var e=new Ir,t=[],n=[],r=Zr;function i(s){let l=e.get(s);if(l===void 0){if(r!==Zr)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Ir;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return es(t,n).unknown(r)},er.apply(i,arguments),i}function ts(){var e=es().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,a=!1,o=0,u=0,c=.5;delete e.unknown;function h(){var f=t().length,d=i<r,p=d?i:r,b=d?r:i;s=(b-p)/Math.max(1,f-o+u*2),a&&(s=Math.floor(s)),p+=(b-p-s*(f-o))*c,l=s*(1-o),a&&(p=Math.round(p),l=Math.round(l));var v=Rs(f).map(function(q){return p+s*q});return n(d?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},e.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,h()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(f){return arguments.length?(a=!!f,h()):a},e.padding=function(f){return arguments.length?(o=Math.min(1,u=+f),h()):o},e.paddingInner=function(f){return arguments.length?(o=Math.min(1,f),h()):o},e.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),h()):c},e.copy=function(){return ts(t(),[r,i]).round(a).paddingInner(o).paddingOuter(u).align(c)},er.apply(h(),arguments)}function qu(e){return function(){return e}}function xu(e){return+e}var $r=[0,1];function yt(e){return e}function Hn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:qu(isNaN(t)?NaN:.5)}function Au(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Iu(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=Hn(i,r),s=n(l,s)):(r=Hn(r,i),s=n(s,l)),function(a){return s(r(a))}}function Tu(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=Hn(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(a){var o=Is(e,a,1,r)-1;return s[o](i[o](a))}}function Mu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Su(){var e=$r,t=$r,n=Qn,r,i,s,l=yt,a,o,u;function c(){var f=Math.min(e.length,t.length);return l!==yt&&(l=Au(e[0],e[f-1])),a=f>2?Tu:Iu,o=u=null,h}function h(f){return f==null||isNaN(f=+f)?s:(o||(o=a(e.map(r),t,n)))(r(l(f)))}return h.invert=function(f){return l(i((u||(u=a(t,e.map(r),et)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,xu),c()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=Ja,c()},h.clamp=function(f){return arguments.length?(l=f?!0:yt,c()):l!==yt},h.interpolate=function(f){return arguments.length?(n=f,c()):n},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,d){return r=f,i=d,c()}}function Du(){return Su()(yt,yt)}function Vu(e,t,n,r){var i=Ps(e,t,n),s;switch(r=En(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=Eu(i,l))&&(r.precision=s),$i(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Nu(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=ku(i))&&(r.precision=s-(r.type==="%")*2);break}}return $n(r)}function Cu(e){var t=e.domain;return e.ticks=function(n){var r=t();return Os(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Vu(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],a=r[s],o,u,c=10;for(a<l&&(u=l,l=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=Dn(l,a,n),u===o)return r[i]=l,r[s]=a,t(r);if(u>0)l=Math.floor(l/u)*u,a=Math.ceil(a/u)*u;else if(u<0)l=Math.ceil(l*u)/u,a=Math.floor(a*u)/u;else break;o=u}return e},e}function ns(){var e=Du();return e.copy=function(){return Mu(e,ns())},er.apply(e,arguments),Cu(e)}function Yt(e,t,n){this.k=e,this.x=t,this.y=n}Yt.prototype={constructor:Yt,scale:function(e){return e===1?this:new Yt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Yt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Yt.prototype;const nt={vis_area_width:1025,control_panel_width:350,progress_bar_height:140};function Ou(e){let t;return{c(){t=F("Not filtered")},l(n){t=H(n,"Not filtered")},m(n,r){L(n,t,r)},p:W,d(n){n&&g(t)}}}function Pu(e){var u;let t,n=((u=e[0][e[1]])==null?void 0:u.join(", "))+"",r,i,s,l,a,o;return{c(){t=F("Filtered by: "),r=F(n),i=z(),s=y("span"),l=F("Clear filters"),this.h()},l(c){t=H(c,"Filtered by: "),r=H(c,n),i=B(c),s=k(c,"SPAN",{class:!0});var h=x(s);l=H(h,"Clear filters"),h.forEach(g),this.h()},h(){m(s,"class","ms-2 inline-text-action svelte-8bydak")},m(c,h){L(c,t,h),L(c,r,h),L(c,i,h),L(c,s,h),_(s,l),a||(o=Z(s,"click",e[3]),a=!0)},p(c,h){var f;h&3&&n!==(n=((f=c[0][c[1]])==null?void 0:f.join(", "))+"")&&Ae(r,n)},d(c){c&&g(t),c&&g(r),c&&g(i),c&&g(s),a=!1,o()}}}function Ru(e){let t;function n(s,l){var a;return((a=s[0][s[1]])==null?void 0:a.length)>0?Pu:Ou}let r=n(e),i=r(e);return{c(){i.c(),t=ge()},l(s){i.l(s),t=ge()},m(s,l){i.m(s,l),L(s,t,l)},p(s,[l]){r===(r=n(s))&&i?i.p(s,l):(i.d(1),i=r(s),i&&(i.c(),i.m(t.parentNode,t)))},i:W,o:W,d(s){i.d(s),s&&g(t)}}}function zu(e,t,n){let{cross_selections:r={},by_field:i="",clear_selection:s=()=>{}}=t;const l=()=>{s(i)};return e.$$set=a=>{"cross_selections"in a&&n(0,r=a.cross_selections),"by_field"in a&&n(1,i=a.by_field),"clear_selection"in a&&n(2,s=a.clear_selection)},[r,i,s,l]}class ei extends je{constructor(t){super(),Ue(this,t,zu,Ru,Xe,{cross_selections:0,by_field:1,clear_selection:2})}}function ti(e){let t,n,r,i,s=e[5][0].key+"",l,a,o=e[5][0].value+"",u,c,h,f,d,p,b,v,q,N,S,A,T,D,O,U,M,P,E,w=e[5][1].value+"",I,j,X,J=e[5][2].value+"",K,te,G,we,ne,ie,ve=e[5][3].value+"",ye,Ee,qe,Ie=e[5][4].value+"",Ne,Qe;return{c(){t=y("div"),n=y("div"),r=y("div"),i=y("strong"),l=F(s),a=F(`:
        `),u=F(o),c=z(),h=y("table"),f=y("thead"),d=y("tr"),p=y("td"),b=z(),v=y("th"),q=F("Noisy Count"),N=z(),S=y("th"),A=F("Error Estimate"),T=z(),D=y("tbody"),O=y("tr"),U=y("th"),M=F("Current"),P=z(),E=y("td"),I=F(w),j=z(),X=y("td"),K=z(),te=y("tr"),G=y("th"),we=F("Prev"),ne=z(),ie=y("td"),ye=F(ve),Ee=z(),qe=y("td"),this.h()},l(de){t=k(de,"DIV",{id:!0,class:!0,style:!0});var ae=x(t);n=k(ae,"DIV",{});var Pe=x(n);r=k(Pe,"DIV",{});var Re=x(r);i=k(Re,"STRONG",{});var oe=x(i);l=H(oe,s),oe.forEach(g),a=H(Re,`:
        `),u=H(Re,o),Re.forEach(g),c=B(Pe),h=k(Pe,"TABLE",{class:!0});var $=x(h);f=k($,"THEAD",{});var R=x(f);d=k(R,"TR",{});var Q=x(d);p=k(Q,"TD",{}),x(p).forEach(g),b=B(Q),v=k(Q,"TH",{});var _e=x(v);q=H(_e,"Noisy Count"),_e.forEach(g),N=B(Q),S=k(Q,"TH",{});var V=x(S);A=H(V,"Error Estimate"),V.forEach(g),Q.forEach(g),R.forEach(g),T=B($),D=k($,"TBODY",{});var ee=x(D);O=k(ee,"TR",{});var ue=x(O);U=k(ue,"TH",{});var ce=x(U);M=H(ce,"Current"),ce.forEach(g),P=B(ue),E=k(ue,"TD",{});var fe=x(E);I=H(fe,w),fe.forEach(g),j=B(ue),X=k(ue,"TD",{});var ze=x(X);ze.forEach(g),ue.forEach(g),K=B(ee),te=k(ee,"TR",{});var be=x(te);G=k(be,"TH",{});var Be=x(G);we=H(Be,"Prev"),Be.forEach(g),ne=B(be),ie=k(be,"TD",{});var Fe=x(ie);ye=H(Fe,ve),Fe.forEach(g),Ee=B(be),qe=k(be,"TD",{});var He=x(qe);He.forEach(g),be.forEach(g),ee.forEach(g),$.forEach(g),Pe.forEach(g),ae.forEach(g),this.h()},h(){m(h,"class","table"),m(t,"id",Ne=e[0]+"-tooltip"),m(t,"class","vis-tooltip bg-white border rounded-3 p-2 svelte-4hkoxq"),m(t,"style",Qe=`left: ${e[7]||50}px; top: ${(e[8]||50)+75}px;`)},m(de,ae){L(de,t,ae),_(t,n),_(n,r),_(r,i),_(i,l),_(r,a),_(r,u),_(n,c),_(n,h),_(h,f),_(f,d),_(d,p),_(d,b),_(d,v),_(v,q),_(d,N),_(d,S),_(S,A),_(h,T),_(h,D),_(D,O),_(O,U),_(U,M),_(O,P),_(O,E),_(E,I),_(O,j),_(O,X),X.innerHTML=J,_(D,K),_(D,te),_(te,G),_(G,we),_(te,ne),_(te,ie),_(ie,ye),_(te,Ee),_(te,qe),qe.innerHTML=Ie},p(de,ae){ae[0]&32&&s!==(s=de[5][0].key+"")&&Ae(l,s),ae[0]&32&&o!==(o=de[5][0].value+"")&&Ae(u,o),ae[0]&32&&w!==(w=de[5][1].value+"")&&Ae(I,w),ae[0]&32&&J!==(J=de[5][2].value+"")&&(X.innerHTML=J),ae[0]&32&&ve!==(ve=de[5][3].value+"")&&Ae(ye,ve),ae[0]&32&&Ie!==(Ie=de[5][4].value+"")&&(qe.innerHTML=Ie),ae[0]&1&&Ne!==(Ne=de[0]+"-tooltip")&&m(t,"id",Ne),ae[0]&384&&Qe!==(Qe=`left: ${de[7]||50}px; top: ${(de[8]||50)+75}px;`)&&m(t,"style",Qe)},d(de){de&&g(t)}}}function Bu(e){var O,U;let t,n,r,i,s,l,a,o,u,c,h,f,d,p,b,v,q,N,S,A,T;i=new ei({props:{cross_selections:e[9],by_field:(O=e[1])==null?void 0:O.right_x,clear_selection:e[13]}}),o=new ei({props:{cross_selections:e[9],by_field:(U=e[1])==null?void 0:U.left_x,clear_selection:e[13]}});let D=e[6]&&ti(e);return{c(){t=y("div"),n=y("div"),r=y("div"),Se(i.$$.fragment),l=z(),a=y("div"),Se(o.$$.fragment),c=z(),h=y("div"),f=y("div"),b=z(),v=y("div"),S=z(),D&&D.c(),A=ge(),this.h()},l(M){t=k(M,"DIV",{style:!0});var P=x(t);n=k(P,"DIV",{class:!0});var E=x(n);r=k(E,"DIV",{class:!0,style:!0});var w=x(r);De(i.$$.fragment,w),w.forEach(g),l=B(E),a=k(E,"DIV",{class:!0,style:!0});var I=x(a);De(o.$$.fragment,I),I.forEach(g),E.forEach(g),c=B(P),h=k(P,"DIV",{id:!0,class:!0});var j=x(h);f=k(j,"DIV",{id:!0,style:!0}),x(f).forEach(g),b=B(j),v=k(j,"DIV",{id:!0,style:!0}),x(v).forEach(g),j.forEach(g),P.forEach(g),S=B(M),D&&D.l(M),A=ge(),this.h()},h(){var M,P,E,w;m(r,"class","filter-message svelte-4hkoxq"),m(r,"style",s=`width: ${((M=e[1])==null?void 0:M.width)||e[10]}px;`),m(a,"class","filter-message svelte-4hkoxq"),m(a,"style",u=`width: ${((P=e[1])==null?void 0:P.width)||e[10]}px;`),m(n,"class","d-flex justify-content-between divided"),m(f,"id",d=e[0]+"-left"),m(f,"style",p=`width: ${((E=e[1])==null?void 0:E.width)||e[10]}px;`),m(v,"id",q=e[0]+"-right"),m(v,"style",N=`width: ${((w=e[1])==null?void 0:w.width)||e[10]}px;`),m(h,"id",e[0]),m(h,"class","d-flex justify-content-between divided"),m(t,"style",`width: ${nt.vis_area_width}px;`)},m(M,P){L(M,t,P),_(t,n),_(n,r),Ve(i,r,null),_(n,l),_(n,a),Ve(o,a,null),_(t,c),_(t,h),_(h,f),_(h,b),_(h,v),L(M,S,P),D&&D.m(M,P),L(M,A,P),T=!0},p(M,P){var I,j,X,J,K,te;const E={};P[0]&512&&(E.cross_selections=M[9]),P[0]&2&&(E.by_field=(I=M[1])==null?void 0:I.right_x),i.$set(E),(!T||P[0]&2&&s!==(s=`width: ${((j=M[1])==null?void 0:j.width)||M[10]}px;`))&&m(r,"style",s);const w={};P[0]&512&&(w.cross_selections=M[9]),P[0]&2&&(w.by_field=(X=M[1])==null?void 0:X.left_x),o.$set(w),(!T||P[0]&2&&u!==(u=`width: ${((J=M[1])==null?void 0:J.width)||M[10]}px;`))&&m(a,"style",u),(!T||P[0]&1&&d!==(d=M[0]+"-left"))&&m(f,"id",d),(!T||P[0]&2&&p!==(p=`width: ${((K=M[1])==null?void 0:K.width)||M[10]}px;`))&&m(f,"style",p),(!T||P[0]&1&&q!==(q=M[0]+"-right"))&&m(v,"id",q),(!T||P[0]&2&&N!==(N=`width: ${((te=M[1])==null?void 0:te.width)||M[10]}px;`))&&m(v,"style",N),(!T||P[0]&1)&&m(h,"id",M[0]),M[6]?D?D.p(M,P):(D=ti(M),D.c(),D.m(A.parentNode,A)):D&&(D.d(1),D=null)},i(M){T||(le(i.$$.fragment,M),le(o.$$.fragment,M),T=!0)},o(M){he(i.$$.fragment,M),he(o.$$.fragment,M),T=!1},d(M){M&&g(t),Ce(i),Ce(o),M&&g(S),D&&D.d(M),M&&g(A)}}}function ni(e){return e[0]>0&&e[1]>0?e[0]=0:e[0]<0&&e[1]<0&&(e[1]=0),e}function Fu(e,t,n){let r,i,s=W,l=()=>(s(),s=Ke(S,R=>n(21,i=R)),S),a,o=W,u=()=>(o(),o=Ke(T,R=>n(22,a=R)),T),c,h,f=W,d=()=>(f(),f=Ke(D,R=>n(24,h=R)),D);e.$$.on_destroy.push(()=>s()),e.$$.on_destroy.push(()=>o()),e.$$.on_destroy.push(()=>f());let{view_id:p="vis",dataset:b=[],spec:v={},q_no:q,debug_mode:N,rescale_y_axis:S=_t(!1),remeasure_push:A,remeasurement_detail:T,move_prev_error:D}=t;l(),u(),d();let O=500,U=400,M="#4C7FFF",P="#925af2",E=.7,w=.8,I="black",j="gray",X=3,J=[1,1],K=4.5,te=12,G=40,we=80,ne=25,ie=_t({});Gt(e,ie,R=>n(9,r=R));let ve=!0,ye=_t(!0);Gt(e,ye,R=>n(23,c=R));function Ee(R,Q){ie.update(_e=>(_e[R]||(_e[R]=[]),_e[R].includes(Q)?_e[R]=_e[R].filter(V=>V!==Q):_e[R].push(Q),_e))}function qe(R){R?ie.update(Q=>(Q[R]=[],Q)):ie.set({})}async function Ie(R,Q,_e,V,ee,ue){let ce=R.groupby([Q,"nth_remeasure"]).rollup({[_e+"_agg"]:ft.sum(_e),[ee+"_agg"]:ft.sum(ee),[V+"_agg"]:ft.sum(V),[ue+"_agg"]:ft.sum(ue)}),fe=An(ce.array(_e+"_agg")),ze=In(ce.array(ee+"_agg"));fe[0]-=ze,fe[1]+=ze,fe=ni(fe);let be=Q==v.left_x?v.right_x:v.left_x,Be=r[be],Fe=R.transform(it=>it.filter(fr(Te=>Te.nth_remeasure==a[q])),it=>it.filter(fr(Te=>Be&&(Be==null?void 0:Be.length)>0?Be.includes(Te[be]):!0))).groupby(Q).rollup({[_e+"_agg"]:ft.sum(_e),[V+"_agg"]:ft.sum(V),[ee+"_agg"]:ft.sum(ee),[ue+"_agg"]:ft.sum(ue)}),He=Fe.array(Q),Ye=a[q]>0?An(Fe.array(V+"_agg")):An(Fe.array(_e+"_agg")),at=a[q]>0?In(Fe.array(ue+"_agg")):In(Fe.array(ee+"_agg"));return Ye[0]-=at,Ye[1]+=at,Ye=ni(Ye),a[q]==0&&ve&&(Ye[0]=fe[0],Ye[1]=fe[1]),{aggregated:Fe,dimension_band:He,measure_range:fe,measure_range_spot:Ye}}async function Ne(R,Q,_e,V,ee,ue,ce,fe){let ze=(v==null?void 0:v.height)||U,be=(v==null?void 0:v.width)||O,Be=(v==null?void 0:v.bar_color)||M,Fe=(v==null?void 0:v.bar_opacity)||E,He=(v==null?void 0:v.bar_bandwidth)||w,Ye=(v==null?void 0:v.curr_error_color)||I,at=(v==null?void 0:v.curr_error_width)||X,it=(v==null?void 0:v.prev_error_color)||j,Te=(v==null?void 0:v.prev_error_dash)||J,Le=(v==null?void 0:v.error_point_radius)||K,$e=(v==null?void 0:v.axis_font_size)||te,xe=Vr(R+" svg.chart");if(!xe.node()){let re=Vr(R);re.empty(),xe=re.append("svg").attr("class","chart"),xe.attr("width",be).attr("height",ze).attr("viewBox",`0 0 ${be} ${ze}`)}let We=await Ie(b,Q,V,ee,ce,fe),se=ts().domain(We.dimension_band).range([0,be-G-ne*2]),Y=ns().domain(i?We.measure_range_spot:We.measure_range).nice().range([ze-we-ne*2,0]),tn=Xs(se),It=Ys(Y),Tt=Us(Y).tickSize(be-ne*2-G).tickFormat(""),Mt=xe.append("g").attr("transform",`translate(${G+ne}, ${ze-we-ne})`).call(tn);Mt.selectAll("text").style("text-anchor","start").attr("transform","rotate(45)").style("font-family","'Source Sans', 'Open Sans', sans-serif").style("font-size",$e),xe.append("g").attr("transform",`translate(${(G+ne+be)/2}, ${ze-$e*1.1})`).append("text").text(_e).style("text-anchor","middle").style("font-size",$e*1.1).style("font-weight","bold");let bt=xe.append("g").attr("transform",`translate(${G+ne}, ${ne})`).call(It);bt.selectAll("text").style("font-family","'Source Sans', 'Open Sans', sans-serif").style("font-size",$e);let wt=xe.append("g").attr("class","y-grid").attr("transform",`translate(${G+ne}, ${ne})`).call(Tt).call(re=>re.selectAll(".domain").remove());wt.selectAll("line").style("opacity",.2),xe.append("g").attr("transform",`translate(${ne}, ${(ze-we)/2})`).append("text").text(ue).style("text-anchor","middle").attr("transform","rotate(-90)").style("font-size",$e*1.1).style("font-weight","bold");let St=xe.append("g").attr("class","bars").attr("transform",`translate(${G+ne}, ${ne})`),Dt=re=>{re.append("rect").attr("fill",C=>{var me;return(me=r[Q])!=null&&me.includes(C[Q])?P:Be}).attr("opacity",Fe).attr("x",C=>se(C[Q])+(1-He)/2*se.bandwidth()).attr("y",C=>C[V+"_agg"]<0?Y(0):Y(C[V+"_agg"])).attr("height",C=>Math.abs(Y(0)-Y(C[V+"_agg"]))).attr("width",se.bandwidth()*He)},Vt=re=>{re.attr("fill",C=>{var me;return(me=r[Q])!=null&&me.includes(C[Q])?P:Be}).attr("x",C=>se(C[Q])+(1-He)/2*se.bandwidth()).attr("y",C=>C[V+"_agg"]<0?Y(0):Y(C[V+"_agg"])).attr("height",C=>Math.abs(Y(0)-Y(C[V+"_agg"])))};St.selectAll("rect").data(We.aggregated).join(Dt,Vt);let Ct=xe.append("g").attr("class","prev_errors").attr("transform",`translate(${G+ne}, ${ne})`),Ot=re=>{re.append("line").attr("stroke",it).attr("stroke-width",at).attr("stroke-dasharray",Te.join(" ")).style("opacity",()=>a[q]==0?0:1).attr("transform",`translate(${se.bandwidth()*(h===!0||c?.5:.75)}, 0)`).attr("x1",C=>se(C[Q])).attr("x2",C=>se(C[Q])).attr("y1",C=>Y(h===!0||c?C[V+"_agg"]-C[fe+"_agg"]:C[ee+"_agg"]-C[fe+"_agg"])).attr("y2",C=>Y(h===!0||c?C[V+"_agg"]+C[fe+"_agg"]:C[ee+"_agg"]+C[fe+"_agg"]))},Pt=re=>{re.style("opacity",()=>a[q]==0?0:1).attr("transform",`translate(${se.bandwidth()*(h===!0||c?.5:.75)}, 0)`).attr("x1",C=>se(C[Q])).attr("x2",C=>se(C[Q])).attr("y1",C=>Y(h===!0||c?C[V+"_agg"]-C[fe+"_agg"]:C[ee+"_agg"]-C[fe+"_agg"])).attr("y2",C=>Y(h===!0||c?C[V+"_agg"]+C[fe+"_agg"]:C[ee+"_agg"]+C[fe+"_agg"]))};Ct.selectAll("line").data(We.aggregated).join(Ot,Pt);let Je=xe.append("g").attr("class","prev_error_points").attr("transform",`translate(${G+ne}, ${ne})`),Rt=re=>{re.append("circle").attr("fill",()=>a[q]==0?"transparent":it).attr("transform",`translate(${se.bandwidth()*(h===!0||c?.5:.75)}, 0)`).attr("cx",C=>se(C[Q])).attr("cy",C=>Y(h===!0||c?C[V+"_agg"]:C[ee+"_agg"])).attr("r",()=>h===!0||c?1:Le)},zt=re=>{re.attr("fill",()=>a[q]==0?"transparent":it).attr("transform",`translate(${se.bandwidth()*(h===!0||c?.5:.75)}, 0)`).attr("cx",C=>se(C[Q])).attr("cy",C=>Y(h===!0||c?C[V+"_agg"]:C[ee+"_agg"])).attr("r",()=>h===!0||c?1:Le)};Je.selectAll("circle").data(We.aggregated).join(Rt,zt);let Bt=xe.append("g").attr("class","curr_errors").attr("transform",`translate(${G+ne}, ${ne})`),Ft=re=>{re.append("line").attr("stroke",Ye).attr("stroke-width",at).attr("transform",`translate(${se.bandwidth()/2}, 0)`).attr("x1",C=>se(C[Q])).attr("x2",C=>se(C[Q])).attr("y1",C=>Y(C[V+"_agg"]-C[ce+"_agg"])).attr("y2",C=>Y(C[V+"_agg"]+C[ce+"_agg"]))},Ht=re=>{re.attr("x1",C=>se(C[Q])).attr("x2",C=>se(C[Q])).attr("y1",C=>Y(C[V+"_agg"]-C[ce+"_agg"])).attr("y2",C=>Y(C[V+"_agg"]+C[ce+"_agg"]))};Bt.selectAll("line").data(We.aggregated).join(Ft,Ht);let tr=xe.append("g").attr("class","curr_error_points").attr("transform",`translate(${G+ne}, ${ne})`),nr=re=>{re.append("circle").attr("fill",Ye).attr("transform",`translate(${se.bandwidth()/2}, 0)`).attr("cx",C=>se(C[Q])).attr("cy",C=>Y(C[V+"_agg"])).attr("r",Le)},rr=re=>{re.attr("cx",C=>se(C[Q])).attr("cy",C=>Y(C[V+"_agg"]))};tr.selectAll("circle").data(We.aggregated).join(nr,rr);let ir=xe.append("g").attr("class","wraps").attr("transform",`translate(${G+ne}, ${ne})`),nn=15,ct=$n(",.2f"),sr=re=>{re.append("rect").attr("fill","transparent").attr("stroke",()=>N?"blue":"transparent").attr("stroke-width",()=>N?3:0).attr("x",C=>se(C[Q])).attr("y",C=>(C[V+"_agg"]<0?Y(0):Y(C[V+"_agg"]))-nn).attr("height",C=>Math.abs(Y(0)-Y(C[V+"_agg"]))+nn*2).attr("width",se.bandwidth()).on("mouseover",(C,me)=>{let ar=a[q]==0;n(6,ae=!0),n(7,Pe=C.clientX+5),n(8,Re=C.clientY+5),n(5,de=[{key:_e,value:me[Q]},{key:ue,value:ct(me[V+"_agg"])},{key:ue+" Error Est.",value:`±${ct(me[ce+"_agg"])}<br /><small>[${ct(me[V+"_agg"]-me[ce+"_agg"])}, ${ct(me[V+"_agg"]+me[ce+"_agg"])}]</small>`},{key:"Prev. "+ue,value:ar?"NA":ct(me[ee+"_agg"])},{key:"Prev. "+ue+" Error Est.",value:ar?"NA":`±${ct(me[fe+"_agg"])}<br /><small>[${ct(me[ee+"_agg"]-me[fe+"_agg"])}, ${ct(me[ee+"_agg"]+me[fe+"_agg"])}]</small>`}])}).on("mousemove",C=>{n(6,ae=!0),C.clientX<window.innerWidth*.75?n(7,Pe=C.clientX+5):n(7,Pe=C.clientX+-355),n(8,Re=C.clientY+5)}).on("mouseout",C=>{n(6,ae=!1)}).on("click",(C,me)=>{Ee(Q,me[Q])})},lr=re=>{re.attr("x",C=>se(C[Q])).attr("y",C=>(C[V+"_agg"]<0?Y(0):Y(C[V+"_agg"]))-nn).attr("height",C=>Math.abs(Y(0)-Y(C[V+"_agg"]))+nn*2)};return ir.selectAll("rect").data(We.aggregated).join(sr,lr),{node:xe,update:async()=>{let re=await Ie(b,Q,V,ee,ce,fe);i?Y.domain(re.measure_range_spot).nice():Y.domain(re.measure_range).nice(),wt.transition().call(Tt).call(C=>C.selectAll(".domain").remove()),wt.selectAll("line").style("opacity",.2),bt.transition().call(It),bt.selectAll("text").style("font-family","'Source Sans', 'Open Sans', sans-serif").style("font-size",$e),Mt.selectAll("text").style("font-weight",C=>{var me;return(me=r[Q])!=null&&me.includes(C)?"bold":"normal"}),St.selectAll("rect").data(re.aggregated).join(Dt,Vt),Bt.selectAll("line").data(re.aggregated).join(Ft,Ht),tr.selectAll("circle").data(re.aggregated).join(nr,rr),Ct.selectAll("line").data(re.aggregated).join(Ot,Pt),Je.selectAll("circle").data(re.aggregated).join(Rt,zt),ir.selectAll("rect").data(re.aggregated).join(sr,lr)},update_prev_error:async()=>{}}}function Qe(R){Ne("#"+p+"-left",R.left_x,R.left_x_title,R.y,R.y_prev,R.y_title,R.y_error_size,R.y_error_size_prev).then(Q=>{oe=Q}),Ne("#"+p+"-right",R.right_x,R.right_x_title,R.y,R.y_prev,R.y_title,R.y_error_size,R.y_error_size_prev).then(Q=>{$=Q})}let de=[],ae=!1,Pe,Re,oe,$;return gt(()=>{v&&Qe(v),A.subscribe(R=>{(R==null?void 0:R.question)==q&&(oe&&v&&(oe==null||oe.update()),$&&v&&($==null||$.update()))}),ie.subscribe(R=>{oe&&v&&(oe==null||oe.update()),$&&v&&($==null||$.update()),R?ve=Object.keys(R).every(Q=>R[Q].length==0):ve=!0}),D.subscribe(R=>{oe&&v&&(oe==null||oe.update()),$&&v&&($==null||$.update()),R==33?ye.set(!1):R&&ye.set(!0)}),ye.subscribe(R=>{oe&&v&&(oe==null||oe.update()),$&&v&&($==null||$.update())}),S.subscribe(R=>{oe&&v&&(oe==null||oe.update()),$&&v&&($==null||$.update())})}),e.$$set=R=>{"view_id"in R&&n(0,p=R.view_id),"dataset"in R&&n(14,b=R.dataset),"spec"in R&&n(1,v=R.spec),"q_no"in R&&n(15,q=R.q_no),"debug_mode"in R&&n(16,N=R.debug_mode),"rescale_y_axis"in R&&l(n(2,S=R.rescale_y_axis)),"remeasure_push"in R&&n(17,A=R.remeasure_push),"remeasurement_detail"in R&&u(n(3,T=R.remeasurement_detail)),"move_prev_error"in R&&d(n(4,D=R.move_prev_error))},[p,v,S,T,D,de,ae,Pe,Re,r,O,ie,ye,qe,b,q,N,A]}class Hu extends je{constructor(t){super(),Ue(this,t,Fu,Bu,Xe,{view_id:0,dataset:14,spec:1,q_no:15,debug_mode:16,rescale_y_axis:2,remeasure_push:17,remeasurement_detail:3,move_prev_error:4},null,[-1,-1])}}function Lu(e){let t,n;return{c(){t=y("div"),n=F("_"),this.h()},l(r){t=k(r,"DIV",{class:!0});var i=x(t);n=H(i,"_"),i.forEach(g),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-light text-center text-white")},m(r,i){L(r,t,i),_(t,n)},p:W,d(r){r&&g(t)}}}function ju(e){let t,n;return{c(){t=y("div"),n=F(br),this.h()},l(r){t=k(r,"DIV",{class:!0});var i=x(t);n=H(i,br),i.forEach(g),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-warning text-center")},m(r,i){L(r,t,i),_(t,n)},p:W,d(r){r&&g(t)}}}function Uu(e){let t,n;return{c(){t=y("div"),n=F("_"),this.h()},l(r){t=k(r,"DIV",{class:!0});var i=x(t);n=H(i,"_"),i.forEach(g),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-light text-center text-white")},m(r,i){L(r,t,i),_(t,n)},p:W,d(r){r&&g(t)}}}function Xu(e){let t,n;return{c(){t=y("div"),n=F(wr),this.h()},l(r){t=k(r,"DIV",{class:!0});var i=x(t);n=H(i,wr),i.forEach(g),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-warning text-center")},m(r,i){L(r,t,i),_(t,n)},p:W,d(r){r&&g(t)}}}function Yu(e){let t,n,r,i,s,l,a,o,u,c,h,f,d,p,b,v,q,N,S,A,T;function D(w,I){return w[3]?ju:Lu}let O=D(e),U=O(e);function M(w,I){return w[4]?Xu:Uu}let P=M(e),E=P(e);return{c(){t=y("div"),n=y("div"),r=y("label"),i=F("Lower bound"),s=z(),l=y("div"),a=y("input"),u=z(),c=y("div"),h=y("label"),f=F("Upper bound"),d=z(),p=y("div"),b=y("input"),q=z(),U.c(),N=z(),E.c(),S=ge(),this.h()},l(w){t=k(w,"DIV",{class:!0,style:!0});var I=x(t);n=k(I,"DIV",{class:!0});var j=x(n);r=k(j,"LABEL",{for:!0,class:!0});var X=x(r);i=H(X,"Lower bound"),X.forEach(g),s=B(j),l=k(j,"DIV",{class:!0});var J=x(l);a=k(J,"INPUT",{type:!0,class:!0,name:!0,min:!0,max:!0,placeholder:!0,autocomplete:!0}),J.forEach(g),j.forEach(g),u=B(I),c=k(I,"DIV",{class:!0});var K=x(c);h=k(K,"LABEL",{for:!0,class:!0});var te=x(h);f=H(te,"Upper bound"),te.forEach(g),d=B(K),p=k(K,"DIV",{class:!0});var G=x(p);b=k(G,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0,min:!0,max:!0,autocomplete:!0}),G.forEach(g),K.forEach(g),I.forEach(g),q=B(w),U.l(w),N=B(w),E.l(w),S=ge(),this.h()},h(){m(r,"for","answer-1"),m(r,"class","col-5 col-form-label text-end"),m(a,"type","number"),m(a,"class",o=pe("form-control"+(e[0].lower!==void 0?" border-dark":""))+" svelte-9herw1"),m(a,"name","answer"),m(a,"min","0"),m(a,"max","1000"),m(a,"placeholder","number"),m(a,"autocomplete","off"),m(l,"class","col-7"),m(n,"class","col-auto row"),m(h,"for","answer-2"),m(h,"class","col-5 col-form-label text-end"),m(b,"type","number"),m(b,"class",v=pe("form-control"+(e[0].upper!==void 0?" border-dark":""))+" svelte-9herw1"),m(b,"name","answer"),m(b,"placeholder","number"),m(b,"min","0"),m(b,"max","1000"),m(b,"autocomplete","off"),m(p,"class","col-7"),m(c,"class","col-auto row"),m(t,"class","mt-5 p-3 response-form row justify-content-center rounded-3 bg-light svelte-9herw1"),m(t,"style",`width: ${nt.vis_area_width+nt.control_panel_width}px;`)},m(w,I){L(w,t,I),_(t,n),_(n,r),_(r,i),_(n,s),_(n,l),_(l,a),Me(a,e[0].lower),_(t,u),_(t,c),_(c,h),_(h,f),_(c,d),_(c,p),_(p,b),Me(b,e[0].upper),L(w,q,I),U.m(w,I),L(w,N,I),E.m(w,I),L(w,S,I),A||(T=[Z(a,"input",e[7]),Z(a,"change",e[8]),Z(b,"input",e[9]),Z(b,"change",e[10])],A=!0)},p(w,[I]){I&1&&o!==(o=pe("form-control"+(w[0].lower!==void 0?" border-dark":""))+" svelte-9herw1")&&m(a,"class",o),I&1&&Oe(a.value)!==w[0].lower&&Me(a,w[0].lower),I&1&&v!==(v=pe("form-control"+(w[0].upper!==void 0?" border-dark":""))+" svelte-9herw1")&&m(b,"class",v),I&1&&Oe(b.value)!==w[0].upper&&Me(b,w[0].upper),O===(O=D(w))&&U?U.p(w,I):(U.d(1),U=O(w),U&&(U.c(),U.m(N.parentNode,N))),P===(P=M(w))&&E?E.p(w,I):(E.d(1),E=P(w),E&&(E.c(),E.m(S.parentNode,S)))},i:W,o:W,d(w){w&&g(t),w&&g(q),U.d(w),w&&g(N),E.d(w),w&&g(S),A=!1,vt(T)}}}function Gu(e,t,n){let{answer:r={},record_answer:i=()=>{},q_no:s}=t,l=!1,a=!1,o=!1;function u(){n(5,o=Object.keys(r||2).length==2),o&&r.lower>r.upper?n(3,l=!0):n(3,l=!1),r.lower<0||r.lower>1e3||r.upper<0||r.upper>1e3?n(4,a=!0):n(4,a=!1)}gt(()=>{u()});function c(){r.lower=Oe(this.value),n(0,r)}const h=p=>{u(),i(s,r,o)};function f(){r.upper=Oe(this.value),n(0,r)}const d=p=>{u(),i(s,r,o)};return e.$$set=p=>{"answer"in p&&n(0,r=p.answer),"record_answer"in p&&n(1,i=p.record_answer),"q_no"in p&&n(2,s=p.q_no)},e.$$.update=()=>{var p;e.$$.dirty&1&&((p=Object.keys(r||{}))==null?void 0:p.length)==2&&u()},[r,i,s,l,a,o,u,c,h,f,d]}class Qu extends je{constructor(t){super(),Ue(this,t,Gu,Yu,Xe,{answer:0,record_answer:1,q_no:2})}}function ri(e,t,n){const r=e.slice();return r[11]=t[n],r[12]=t,r[13]=n,r}function ii(e){let t,n,r=e[11]+"",i,s,l,a,o,u,c;function h(){e[8].call(a,e[11])}return{c(){t=y("div"),n=y("label"),i=F(r),s=z(),l=y("div"),a=y("input"),this.h()},l(f){t=k(f,"DIV",{class:!0,style:!0});var d=x(t);n=k(d,"LABEL",{for:!0,class:!0});var p=x(n);i=H(p,r),p.forEach(g),s=B(d),l=k(d,"DIV",{});var b=x(l);a=k(b,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0,min:!0,max:!0,step:!0,autocomplete:!0}),b.forEach(g),d.forEach(g),this.h()},h(){m(n,"for","answer-"+e[13]),m(n,"class","text-center d-block group-label svelte-1w4g1iu"),m(a,"type","number"),m(a,"class",o=pe("form-control"+(e[0][e[11].replace(/\s/gi,"-")]!==void 0?" border-dark":""))+" svelte-1w4g1iu"),m(a,"name","answer-"+e[13]),m(a,"placeholder","probability"),m(a,"min","0"),m(a,"max","1"),m(a,"step","0.01"),m(a,"autocomplete","off"),m(t,"class","px-1"),ke(t,"width","200px")},m(f,d){L(f,t,d),_(t,n),_(n,i),_(t,s),_(t,l),_(l,a),Me(a,e[0][e[11].replace(/\s/gi,"-")]),u||(c=[Z(a,"input",h),Z(a,"change",e[9])],u=!0)},p(f,d){e=f,d&8&&r!==(r=e[11]+"")&&Ae(i,r),d&9&&o!==(o=pe("form-control"+(e[0][e[11].replace(/\s/gi,"-")]!==void 0?" border-dark":""))+" svelte-1w4g1iu")&&m(a,"class",o),d&9&&Oe(a.value)!==e[0][e[11].replace(/\s/gi,"-")]&&Me(a,e[0][e[11].replace(/\s/gi,"-")])},d(f){f&&g(t),u=!1,vt(c)}}}function Wu(e){let t,n;return{c(){t=y("div"),n=F("_"),this.h()},l(r){t=k(r,"DIV",{class:!0});var i=x(t);n=H(i,"_"),i.forEach(g),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-light text-center text-white")},m(r,i){L(r,t,i),_(t,n)},p:W,d(r){r&&g(t)}}}function Ju(e){let t,n;return{c(){t=y("div"),n=F(Nt),this.h()},l(r){t=k(r,"DIV",{class:!0});var i=x(t);n=H(i,Nt),i.forEach(g),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-warning text-center")},m(r,i){L(r,t,i),_(t,n)},p:W,d(r){r&&g(t)}}}function Ku(e){let t,n,r,i,s,l,a,o,u,c,h,f,d=e[3],p=[];for(let N=0;N<d.length;N+=1)p[N]=ii(ri(e,d,N));function b(N,S){return N[4]?Ju:Wu}let v=b(e),q=v(e);return{c(){t=y("div");for(let N=0;N<p.length;N+=1)p[N].c();n=z(),r=y("div"),i=y("label"),s=F("Sum"),l=z(),a=y("div"),o=y("input"),u=z(),q.c(),c=ge(),this.h()},l(N){t=k(N,"DIV",{class:!0,style:!0});var S=x(t);for(let O=0;O<p.length;O+=1)p[O].l(S);n=B(S),r=k(S,"DIV",{class:!0,style:!0});var A=x(r);i=k(A,"LABEL",{for:!0,class:!0});var T=x(i);s=H(T,"Sum"),T.forEach(g),l=B(A),a=k(A,"DIV",{});var D=x(a);o=k(D,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0}),D.forEach(g),A.forEach(g),S.forEach(g),u=B(N),q.l(N),c=ge(),this.h()},h(){m(i,"for","answer-sum"),m(i,"class","text-center d-block text-bold"),o.disabled=!0,m(o,"type","number"),o.readOnly=!0,m(o,"class","form-control form-control-sm"),m(o,"name","answer-sum"),m(o,"placeholder","number"),m(r,"class","px-1"),ke(r,"width","100px"),m(t,"class","mt-5 p-3 response-form d-flex justify-content-center rounded-3 bg-light svelte-1w4g1iu"),m(t,"style",`width: ${nt.vis_area_width+nt.control_panel_width}px;`)},m(N,S){L(N,t,S);for(let A=0;A<p.length;A+=1)p[A]&&p[A].m(t,null);_(t,n),_(t,r),_(r,i),_(i,s),_(r,l),_(r,a),_(a,o),Me(o,e[5]),L(N,u,S),q.m(N,S),L(N,c,S),h||(f=Z(o,"input",e[10]),h=!0)},p(N,[S]){if(S&207){d=N[3];let A;for(A=0;A<d.length;A+=1){const T=ri(N,d,A);p[A]?p[A].p(T,S):(p[A]=ii(T),p[A].c(),p[A].m(t,n))}for(;A<p.length;A+=1)p[A].d(1);p.length=d.length}S&32&&Oe(o.value)!==N[5]&&Me(o,N[5]),v===(v=b(N))&&q?q.p(N,S):(q.d(1),q=v(N),q&&(q.c(),q.m(c.parentNode,c)))},i:W,o:W,d(N){N&&g(t),Et(p,N),N&&g(u),q.d(N),N&&g(c),h=!1,f()}}}function Zu(e,t,n){let{answer:r={},record_answer:i=()=>{},q_no:s,groups:l=[]}=t,a=!1,o=0,u=!1;function c(){n(5,o=Object.keys(r).map(p=>r[p]).reduce((p,b)=>p+b,0)),o>.99999999&&o<1&&n(5,o=1),n(6,u=Object.keys(r).length===l.length&&l.length>0),o>1||u&&o!=1?n(4,a=!0):n(4,a=!1)}gt(()=>{c()});function h(p){r[p.replace(/\s/gi,"-")]=Oe(this.value),n(0,r)}const f=p=>{c(),i(s,r,u)};function d(){o=Oe(this.value),n(5,o)}return e.$$set=p=>{"answer"in p&&n(0,r=p.answer),"record_answer"in p&&n(1,i=p.record_answer),"q_no"in p&&n(2,s=p.q_no),"groups"in p&&n(3,l=p.groups)},e.$$.update=()=>{e.$$.dirty&9&&(Object.keys(r)>0||l.length>0)&&c()},[r,i,s,l,a,o,u,c,h,f,d]}class $u extends je{constructor(t){super(),Ue(this,t,Zu,Ku,Xe,{answer:0,record_answer:1,q_no:2,groups:3})}}function si(e,t,n){const r=e.slice();return r[19]=t[n],r[20]=t,r[21]=n,r}function li(e,t,n){const r=e.slice();return r[22]=t[n],r[23]=t,r[24]=n,r}function ai(e,t,n){const r=e.slice();return r[25]=t[n],r[24]=n,r}function oi(e){let t,n,r=e[25]+"",i,s,l,a,o;return{c(){t=y("div"),n=y("span"),i=F(r),l=z(),this.h()},l(u){t=k(u,"DIV",{class:!0,style:!0});var c=x(t);n=k(c,"SPAN",{class:!0});var h=x(n);i=H(h,r),h.forEach(g),l=B(c),c.forEach(g),this.h()},h(){m(n,"class",s=pe("group-label "+(e[8][1]==e[24]?"focus":""))+" svelte-2pwvq4"),m(t,"class",a=pe("col px-1 text-center"+(e[8][1]==e[24]?" bg-hl-focus":""))+" svelte-2pwvq4"),m(t,"style",o=`width: ${e[4]}px;`)},m(u,c){L(u,t,c),_(t,n),_(n,i),_(t,l)},p(u,c){c&8&&r!==(r=u[25]+"")&&Ae(i,r),c&256&&s!==(s=pe("group-label "+(u[8][1]==u[24]?"focus":""))+" svelte-2pwvq4")&&m(n,"class",s),c&256&&a!==(a=pe("col px-1 text-center"+(u[8][1]==u[24]?" bg-hl-focus":""))+" svelte-2pwvq4")&&m(t,"class",a),c&16&&o!==(o=`width: ${u[4]}px;`)&&m(t,"style",o)},d(u){u&&g(t)}}}function ui(e){let t,n=e[24]<e[3].length-1&&oi(e);return{c(){n&&n.c(),t=ge()},l(r){n&&n.l(r),t=ge()},m(r,i){n&&n.m(r,i),L(r,t,i)},p(r,i){r[24]<r[3].length-1?n?n.p(r,i):(n=oi(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&g(t)}}}function ec(e){let t,n,r,i=e[19]+"",s,l,a,o,u,c,h=e[3],f=[];for(let d=0;d<h.length;d+=1)f[d]=fi(li(e,h,d));return{c(){t=y("div"),n=y("div"),r=y("span"),s=F(i),u=z();for(let d=0;d<f.length;d+=1)f[d].c();c=z(),this.h()},l(d){t=k(d,"DIV",{class:!0,style:!0});var p=x(t);n=k(p,"DIV",{class:!0,style:!0});var b=x(n);r=k(b,"SPAN",{class:!0});var v=x(r);s=H(v,i),v.forEach(g),b.forEach(g),u=B(p);for(let q=0;q<f.length;q+=1)f[q].l(p);c=B(p),p.forEach(g),this.h()},h(){m(r,"class",l=pe("group-label me-3 "+(e[8][0]==e[21]?"focus":""))+" svelte-2pwvq4"),m(n,"class",a=pe("col px-1 text-end"+(e[8][0]==e[21]?" bg-hl-focus":""))+" svelte-2pwvq4"),m(n,"style",o=`width: ${e[4]}px;`),m(t,"class","row align-items-center"),m(t,"style",`width: ${e[9]}px;`)},m(d,p){L(d,t,p),_(t,n),_(n,r),_(r,s),_(t,u);for(let b=0;b<f.length;b+=1)f[b]&&f[b].m(t,null);_(t,c)},p(d,p){if(p&8&&i!==(i=d[19]+"")&&Ae(s,i),p&256&&l!==(l=pe("group-label me-3 "+(d[8][0]==d[21]?"focus":""))+" svelte-2pwvq4")&&m(r,"class",l),p&256&&a!==(a=pe("col px-1 text-end"+(d[8][0]==d[21]?" bg-hl-focus":""))+" svelte-2pwvq4")&&m(n,"class",a),p&16&&o!==(o=`width: ${d[4]}px;`)&&m(n,"style",o),p&7583){h=d[3];let b;for(b=0;b<h.length;b+=1){const v=li(d,h,b);f[b]?f[b].p(v,p):(f[b]=fi(v),f[b].c(),f[b].m(t,c))}for(;b<f.length;b+=1)f[b].d(1);f.length=h.length}},d(d){d&&g(t),Et(f,d)}}}function ci(e){let t,n,r,i=e[21]>e[24]&&tc(e);return{c(){t=y("div"),i&&i.c(),this.h()},l(s){t=k(s,"DIV",{class:!0,style:!0});var l=x(t);i&&i.l(l),l.forEach(g),this.h()},h(){m(t,"class",n=pe("col px-1"+(e[8][0]==e[21]||e[8][1]==e[24]?" bg-hl-focus":""))+" svelte-2pwvq4"),m(t,"style",r=`width: ${e[4]}px;`)},m(s,l){L(s,t,l),i&&i.m(t,null)},p(s,l){s[21]>s[24]&&i.p(s,l),l&256&&n!==(n=pe("col px-1"+(s[8][0]==s[21]||s[8][1]==s[24]?" bg-hl-focus":""))+" svelte-2pwvq4")&&m(t,"class",n),l&16&&r!==(r=`width: ${s[4]}px;`)&&m(t,"style",r)},d(s){s&&g(t),i&&i.d()}}}function tc(e){let t,n,r,i;function s(){e[13].call(t,e[19],e[22])}function l(){return e[15](e[21],e[24])}function a(){return e[16](e[21],e[24])}return{c(){t=y("input"),this.h()},l(o){t=k(o,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0,min:!0,max:!0,step:!0,autocomplete:!0}),this.h()},h(){m(t,"type","number"),m(t,"class",n=pe("form-control form-control-sm"+(e[0][e[19].replace(/\s/gi,"-")+"_"+e[22].replace(/\s/gi,"-")]!==void 0?" border-dark":""))+" svelte-2pwvq4"),m(t,"name","answer-"+e[21]+e[24]),m(t,"placeholder","probability"),m(t,"min","0"),m(t,"max","1"),m(t,"step","0.01"),m(t,"autocomplete","off")},m(o,u){L(o,t,u),Me(t,e[0][e[19].replace(/\s/gi,"-")+"_"+e[22].replace(/\s/gi,"-")]),r||(i=[Z(t,"input",s),Z(t,"change",e[14]),Z(t,"focus",l),Z(t,"blur",a)],r=!0)},p(o,u){e=o,u&9&&n!==(n=pe("form-control form-control-sm"+(e[0][e[19].replace(/\s/gi,"-")+"_"+e[22].replace(/\s/gi,"-")]!==void 0?" border-dark":""))+" svelte-2pwvq4")&&m(t,"class",n),u&9&&Oe(t.value)!==e[0][e[19].replace(/\s/gi,"-")+"_"+e[22].replace(/\s/gi,"-")]&&Me(t,e[0][e[19].replace(/\s/gi,"-")+"_"+e[22].replace(/\s/gi,"-")])},d(o){o&&g(t),r=!1,vt(i)}}}function fi(e){let t,n=e[24]<e[3].length-1&&ci(e);return{c(){n&&n.c(),t=ge()},l(r){n&&n.l(r),t=ge()},m(r,i){n&&n.m(r,i),L(r,t,i)},p(r,i){r[24]<r[3].length-1?n?n.p(r,i):(n=ci(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&g(t)}}}function hi(e){let t,n=e[21]>0&&ec(e);return{c(){n&&n.c(),t=ge()},l(r){n&&n.l(r),t=ge()},m(r,i){n&&n.m(r,i),L(r,t,i)},p(r,i){r[21]>0&&n.p(r,i)},d(r){n&&n.d(r),r&&g(t)}}}function nc(e){let t,n;return{c(){t=y("div"),n=F("_"),this.h()},l(r){t=k(r,"DIV",{class:!0});var i=x(t);n=H(i,"_"),i.forEach(g),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-light text-center text-white")},m(r,i){L(r,t,i),_(t,n)},p:W,d(r){r&&g(t)}}}function rc(e){let t,n;return{c(){t=y("div"),n=F(Nt),this.h()},l(r){t=k(r,"DIV",{class:!0});var i=x(t);n=H(i,Nt),i.forEach(g),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-warning text-center")},m(r,i){L(r,t,i),_(t,n)},p:W,d(r){r&&g(t)}}}function ic(e){let t,n,r,i,s,l,a,o,u,c,h,f,d,p,b,v,q,N,S,A=e[3],T=[];for(let E=0;E<A.length;E+=1)T[E]=ui(ai(e,A,E));let D=e[3],O=[];for(let E=0;E<D.length;E+=1)O[E]=hi(si(e,D,E));function U(E,w){return E[5]?rc:nc}let M=U(e),P=M(e);return{c(){t=y("div"),n=y("div"),r=y("div"),i=y("div"),s=y("span"),a=z();for(let E=0;E<T.length;E+=1)T[E].c();o=z();for(let E=0;E<O.length;E+=1)O[E].c();u=z(),c=y("div"),h=y("label"),f=F("Sum"),d=z(),p=y("div"),b=y("input"),v=z(),P.c(),q=ge(),this.h()},l(E){t=k(E,"DIV",{class:!0,style:!0});var w=x(t);n=k(w,"DIV",{class:!0});var I=x(n);r=k(I,"DIV",{class:!0,style:!0});var j=x(r);i=k(j,"DIV",{class:!0,style:!0});var X=x(i);s=k(X,"SPAN",{class:!0}),x(s).forEach(g),X.forEach(g),a=B(j);for(let G=0;G<T.length;G+=1)T[G].l(j);j.forEach(g),o=B(I);for(let G=0;G<O.length;G+=1)O[G].l(I);I.forEach(g),u=B(w),c=k(w,"DIV",{class:!0,style:!0});var J=x(c);h=k(J,"LABEL",{for:!0,class:!0});var K=x(h);f=H(K,"Sum"),K.forEach(g),d=B(J),p=k(J,"DIV",{});var te=x(p);b=k(te,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0,autocomplete:!0}),te.forEach(g),J.forEach(g),w.forEach(g),v=B(E),P.l(E),q=ge(),this.h()},h(){m(s,"class","group-name-label me-3 svelte-2pwvq4"),m(i,"class","col px-1 text-end svelte-2pwvq4"),m(i,"style",l=`width: ${e[4]}px;`),m(r,"class","row align-items-end"),m(r,"style",`width: ${e[9]}px;`),m(n,"class","px-1 joint-table svelte-2pwvq4"),m(h,"for","answer-sum"),m(h,"class","text-center d-block text-bold"),b.disabled=!0,m(b,"type","number"),b.readOnly=!0,m(b,"class","form-control"),m(b,"name","answer-sum"),m(b,"placeholder","probability"),m(b,"autocomplete","off"),m(c,"class","ps-3"),ke(c,"width","100px"),m(t,"class","mt-5 p-3 response-form d-flex justify-content-center rounded-3 bg-light align-items-center svelte-2pwvq4"),m(t,"style",`width: ${nt.vis_area_width+nt.control_panel_width}px;`)},m(E,w){L(E,t,w),_(t,n),_(n,r),_(r,i),_(i,s),_(r,a);for(let I=0;I<T.length;I+=1)T[I]&&T[I].m(r,null);_(n,o);for(let I=0;I<O.length;I+=1)O[I]&&O[I].m(n,null);_(t,u),_(t,c),_(c,h),_(h,f),_(c,d),_(c,p),_(p,b),Me(b,e[6]),L(E,v,w),P.m(E,w),L(E,q,w),N||(S=Z(b,"input",e[17]),N=!0)},p(E,[w]){if(w&16&&l!==(l=`width: ${E[4]}px;`)&&m(i,"style",l),w&280){A=E[3];let I;for(I=0;I<A.length;I+=1){const j=ai(E,A,I);T[I]?T[I].p(j,w):(T[I]=ui(j),T[I].c(),T[I].m(r,null))}for(;I<T.length;I+=1)T[I].d(1);T.length=A.length}if(w&8095){D=E[3];let I;for(I=0;I<D.length;I+=1){const j=si(E,D,I);O[I]?O[I].p(j,w):(O[I]=hi(j),O[I].c(),O[I].m(n,null))}for(;I<O.length;I+=1)O[I].d(1);O.length=D.length}w&64&&Oe(b.value)!==E[6]&&Me(b,E[6]),M===(M=U(E))&&P?P.p(E,w):(P.d(1),P=M(E),P&&(P.c(),P.m(q.parentNode,q)))},i:W,o:W,d(E){E&&g(t),Et(T,E),Et(O,E),E&&g(v),P.d(E),E&&g(q),N=!1,S()}}}function sc(e,t,n){let{answer:r={},record_answer:i=()=>{},q_no:s,groups:l=[]}=t,a=1080,o=180,u=!1,c=0,h=0,f=!1;function d(){n(6,c=Object.keys(r).map(D=>r[D]).reduce((D,O)=>D+O,0)),c>.99999999&&c<1&&n(6,c=1),n(7,f=Object.keys(r).length===h&&l.length>0),c>1||f&&c!=1?n(5,u=!0):n(5,u=!1)}let p=[];function b(D,O){n(8,p=[D,O])}function v(){n(8,p=[])}gt(()=>{n(4,o=Math.floor(a/(l.length+1))),h=l.length*(l.length-1)/2,d()});function q(D,O){r[D.replace(/\s/gi,"-")+"_"+O.replace(/\s/gi,"-")]=Oe(this.value),n(0,r)}const N=D=>{d(),i(s,r,f)},S=(D,O)=>{b(D,O)},A=(D,O)=>{v()};function T(){c=Oe(this.value),n(6,c)}return e.$$set=D=>{"answer"in D&&n(0,r=D.answer),"record_answer"in D&&n(1,i=D.record_answer),"q_no"in D&&n(2,s=D.q_no),"groups"in D&&n(3,l=D.groups)},e.$$.update=()=>{e.$$.dirty&9&&(Object.keys(r)>0||l.length>0)&&(n(4,o=Math.floor(a/(l.length+1))),h=l.length*(l.length-1)/2,d())},[r,i,s,l,o,u,c,f,p,a,d,b,v,q,N,S,A,T]}class lc extends je{constructor(t){super(),Ue(this,t,sc,ic,Xe,{answer:0,record_answer:1,q_no:2,groups:3})}}function _i(e,t,n){const r=e.slice();return r[11]=t[n],r[12]=t,r[13]=n,r}function di(e){let t,n,r=e[11]+"",i,s,l,a,o,u,c;function h(){e[8].call(a,e[11])}return{c(){t=y("div"),n=y("label"),i=F(r),s=z(),l=y("div"),a=y("input"),this.h()},l(f){t=k(f,"DIV",{class:!0,style:!0});var d=x(t);n=k(d,"LABEL",{for:!0,class:!0});var p=x(n);i=H(p,r),p.forEach(g),s=B(d),l=k(d,"DIV",{});var b=x(l);a=k(b,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0,min:!0,max:!0,step:!0,autocomplete:!0}),b.forEach(g),d.forEach(g),this.h()},h(){m(n,"for","answer-"+e[13]),m(n,"class","text-center d-block group-label svelte-1w4g1iu"),m(a,"type","number"),m(a,"class",o=pe("form-control"+(e[0][e[11].replace(/\s/gi,"-")]!==void 0?" border-dark":""))+" svelte-1w4g1iu"),m(a,"name","answer-"+e[13]),m(a,"placeholder","probability"),m(a,"min","0"),m(a,"max","1"),m(a,"step","0.01"),m(a,"autocomplete","off"),m(t,"class","px-1"),ke(t,"width","200px")},m(f,d){L(f,t,d),_(t,n),_(n,i),_(t,s),_(t,l),_(l,a),Me(a,e[0][e[11].replace(/\s/gi,"-")]),u||(c=[Z(a,"input",h),Z(a,"change",e[9])],u=!0)},p(f,d){e=f,d&1&&o!==(o=pe("form-control"+(e[0][e[11].replace(/\s/gi,"-")]!==void 0?" border-dark":""))+" svelte-1w4g1iu")&&m(a,"class",o),d&65&&Oe(a.value)!==e[0][e[11].replace(/\s/gi,"-")]&&Me(a,e[0][e[11].replace(/\s/gi,"-")])},d(f){f&&g(t),u=!1,vt(c)}}}function ac(e){let t,n;return{c(){t=y("div"),n=F("_"),this.h()},l(r){t=k(r,"DIV",{class:!0});var i=x(t);n=H(i,"_"),i.forEach(g),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-light text-center text-white")},m(r,i){L(r,t,i),_(t,n)},p:W,d(r){r&&g(t)}}}function oc(e){let t,n;return{c(){t=y("div"),n=F(Nt),this.h()},l(r){t=k(r,"DIV",{class:!0});var i=x(t);n=H(i,Nt),i.forEach(g),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-warning text-center")},m(r,i){L(r,t,i),_(t,n)},p:W,d(r){r&&g(t)}}}function uc(e){let t,n,r,i,s,l,a,o,u,c,h,f,d=e[6],p=[];for(let N=0;N<d.length;N+=1)p[N]=di(_i(e,d,N));function b(N,S){return N[3]?oc:ac}let v=b(e),q=v(e);return{c(){t=y("div");for(let N=0;N<p.length;N+=1)p[N].c();n=z(),r=y("div"),i=y("label"),s=F("Sum"),l=z(),a=y("div"),o=y("input"),u=z(),q.c(),c=ge(),this.h()},l(N){t=k(N,"DIV",{class:!0,style:!0});var S=x(t);for(let O=0;O<p.length;O+=1)p[O].l(S);n=B(S),r=k(S,"DIV",{class:!0,style:!0});var A=x(r);i=k(A,"LABEL",{for:!0,class:!0});var T=x(i);s=H(T,"Sum"),T.forEach(g),l=B(A),a=k(A,"DIV",{});var D=x(a);o=k(D,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0}),D.forEach(g),A.forEach(g),S.forEach(g),u=B(N),q.l(N),c=ge(),this.h()},h(){m(i,"for","answer-sum"),m(i,"class","text-center d-block text-bold"),o.disabled=!0,m(o,"type","number"),o.readOnly=!0,m(o,"class","form-control form-control-sm"),m(o,"name","answer-sum"),m(o,"placeholder","number"),m(r,"class","px-1"),ke(r,"width","100px"),m(t,"class","mt-5 p-3 response-form d-flex justify-content-center rounded-3 bg-light svelte-1w4g1iu"),m(t,"style",`width: ${nt.vis_area_width+nt.control_panel_width}px;`)},m(N,S){L(N,t,S);for(let A=0;A<p.length;A+=1)p[A]&&p[A].m(t,null);_(t,n),_(t,r),_(r,i),_(i,s),_(r,l),_(r,a),_(a,o),Me(o,e[4]),L(N,u,S),q.m(N,S),L(N,c,S),h||(f=Z(o,"input",e[10]),h=!0)},p(N,[S]){if(S&231){d=N[6];let A;for(A=0;A<d.length;A+=1){const T=_i(N,d,A);p[A]?p[A].p(T,S):(p[A]=di(T),p[A].c(),p[A].m(t,n))}for(;A<p.length;A+=1)p[A].d(1);p.length=d.length}S&16&&Oe(o.value)!==N[4]&&Me(o,N[4]),v===(v=b(N))&&q?q.p(N,S):(q.d(1),q=v(N),q&&(q.c(),q.m(c.parentNode,c)))},i:W,o:W,d(N){N&&g(t),Et(p,N),N&&g(u),q.d(N),N&&g(c),h=!1,f()}}}function cc(e,t,n){let{answer:r={},record_answer:i=()=>{},q_no:s}=t,l=["Yes","No"],a=!1,o=0,u=!1;function c(){n(4,o=Object.keys(r).map(p=>r[p]).reduce((p,b)=>p+b,0)),o>.99999999&&o<1&&n(4,o=1),n(5,u=Object.keys(r).length===l.length&&l.length>0),o>1||u&&o!=1?n(3,a=!0):n(3,a=!1)}gt(()=>{c()});function h(p){r[p.replace(/\s/gi,"-")]=Oe(this.value),n(0,r)}const f=p=>{c(),i(s,r,u)};function d(){o=Oe(this.value),n(4,o)}return e.$$set=p=>{"answer"in p&&n(0,r=p.answer),"record_answer"in p&&n(1,i=p.record_answer),"q_no"in p&&n(2,s=p.q_no)},e.$$.update=()=>{e.$$.dirty&1&&(Object.keys(r)>0||l.length>0)&&c()},[r,i,s,a,o,u,l,c,h,f,d]}class fc extends je{constructor(t){super(),Ue(this,t,cc,uc,Xe,{answer:0,record_answer:1,q_no:2})}}function hc(e){let t,n,r,i,s,l;return{c(){t=y("div"),n=y("div"),i=z(),s=y("div"),this.h()},l(a){t=k(a,"DIV",{class:!0});var o=x(t);n=k(o,"DIV",{class:!0}),x(n).forEach(g),i=B(o),s=k(o,"DIV",{class:!0}),x(s).forEach(g),o.forEach(g),this.h()},h(){m(n,"class",r=pe("toggle-back "+(e[0]?"on":"off"))+" svelte-12ojuty"),m(s,"class",l=pe("toggle-dangle "+(e[0]?"on":"off"))+" svelte-12ojuty"),m(t,"class","toggle-wrap svelte-12ojuty")},m(a,o){L(a,t,o),_(t,n),_(t,i),_(t,s)},p(a,[o]){o&1&&r!==(r=pe("toggle-back "+(a[0]?"on":"off"))+" svelte-12ojuty")&&m(n,"class",r),o&1&&l!==(l=pe("toggle-dangle "+(a[0]?"on":"off"))+" svelte-12ojuty")&&m(s,"class",l)},i:W,o:W,d(a){a&&g(t)}}}function _c(e,t,n){let{truth:r}=t;return e.$$set=i=>{"truth"in i&&n(0,r=i.truth)},[r]}class mi extends je{constructor(t){super(),Ue(this,t,_c,hc,Xe,{truth:0})}}function dc(e){let t,n,r,i,s,l,a,o,u,c,h,f,d=qr(e[8][e[1]])+"",p,b,v,q,N,S,A,T,D,O,U,M,P,E,w,I,j;return q=new mi({props:{truth:e[9]!==!0}}),U=new mi({props:{truth:e[10]}}),{c(){t=y("div"),n=y("div"),r=y("h6"),i=F("Controls"),s=z(),l=y("div"),a=y("button"),o=F("Remeasure"),c=y("br"),h=z(),f=y("span"),p=z(),b=y("div"),v=y("div"),Se(q.$$.fragment),N=z(),S=y("div"),A=F(xr),T=z(),D=y("div"),O=y("div"),Se(U.$$.fragment),M=z(),P=y("div"),E=F(Ar),this.h()},l(X){t=k(X,"DIV",{style:!0});var J=x(t);n=k(J,"DIV",{class:!0});var K=x(n);r=k(K,"H6",{class:!0});var te=x(r);i=H(te,"Controls"),te.forEach(g),s=B(K),l=k(K,"DIV",{class:!0});var G=x(l);a=k(G,"BUTTON",{class:!0});var we=x(a);o=H(we,"Remeasure"),we.forEach(g),c=k(G,"BR",{}),h=B(G),f=k(G,"SPAN",{style:!0});var ne=x(f);ne.forEach(g),G.forEach(g),p=B(K),b=k(K,"DIV",{class:!0});var ie=x(b);v=k(ie,"DIV",{class:!0});var ve=x(v);De(q.$$.fragment,ve),ve.forEach(g),N=B(ie),S=k(ie,"DIV",{class:!0,style:!0});var ye=x(S);A=H(ye,xr),ye.forEach(g),ie.forEach(g),T=B(K),D=k(K,"DIV",{class:!0});var Ee=x(D);O=k(Ee,"DIV",{class:!0});var qe=x(O);De(U.$$.fragment,qe),qe.forEach(g),M=B(Ee),P=k(Ee,"DIV",{class:!0,style:!0});var Ie=x(P);E=H(Ie,Ar),Ie.forEach(g),Ee.forEach(g),K.forEach(g),J.forEach(g),this.h()},h(){m(r,"class","text-secondary"),m(a,"class","btn btn-secondary me-3 mb-2"),a.disabled=u=e[7]>=e[5],ke(f,"font-size","0.9rem"),ke(f,"display","inline"),m(l,"class","mt-3"),m(v,"class","d-flex align-items-center"),m(S,"class","ps-2"),ke(S,"line-height","100%"),m(b,"class","mt-3 d-flex inline-text-action svelte-15wqg3u"),m(O,"class","d-flex align-items-center"),m(P,"class","ps-2"),ke(P,"line-height","100%"),m(D,"class","mt-3 d-flex inline-text-action svelte-15wqg3u"),m(n,"class","bg-light p-3 rounded-3 ms-5 mt-5"),m(t,"style",`width: ${nt.control_panel_width}px;`)},m(X,J){L(X,t,J),_(t,n),_(n,r),_(r,i),_(n,s),_(n,l),_(l,a),_(a,o),_(l,c),_(l,h),_(l,f),f.innerHTML=d,_(n,p),_(n,b),_(b,v),Ve(q,v,null),_(b,N),_(b,S),_(S,A),_(n,T),_(n,D),_(D,O),Ve(U,O,null),_(D,M),_(D,P),_(P,E),w=!0,I||(j=[Z(a,"click",e[11]),Z(b,"click",e[12]),Z(D,"click",e[13])],I=!0)},p(X,[J]){(!w||J&160&&u!==(u=X[7]>=X[5]))&&(a.disabled=u),(!w||J&258)&&d!==(d=qr(X[8][X[1]])+"")&&(f.innerHTML=d);const K={};J&512&&(K.truth=X[9]!==!0),q.$set(K);const te={};J&1024&&(te.truth=X[10]),U.$set(te)},i(X){w||(le(q.$$.fragment,X),le(U.$$.fragment,X),w=!0)},o(X){he(q.$$.fragment,X),he(U.$$.fragment,X),w=!1},d(X){X&&g(t),Ce(q),Ce(U),I=!1,vt(j)}}}function mc(e,t,n){let r,i=W,s=()=>(i(),i=Ke(S,M=>n(7,r=M)),S),l,a=W,o=()=>(a(),a=Ke(N,M=>n(8,l=M)),N),u,c=W,h=()=>(c(),c=Ke(T,M=>n(9,u=M)),T),f,d=W,p=()=>(d(),d=Ke(q,M=>n(10,f=M)),q);e.$$.on_destroy.push(()=>i()),e.$$.on_destroy.push(()=>a()),e.$$.on_destroy.push(()=>c()),e.$$.on_destroy.push(()=>d());let{remeasure:b=()=>{},q_no:v,rescale_y_axis:q=_t(),remeasurement_detail:N,remeasurement:S,total_remeasurement:A,move_prev_error:T}=t;p(),o(),s(),h();const D=()=>{b(v)},O=()=>{T.set(u===!0?33:!0)},U=()=>{q.set(!f)};return e.$$set=M=>{"remeasure"in M&&n(0,b=M.remeasure),"q_no"in M&&n(1,v=M.q_no),"rescale_y_axis"in M&&p(n(2,q=M.rescale_y_axis)),"remeasurement_detail"in M&&o(n(3,N=M.remeasurement_detail)),"remeasurement"in M&&s(n(4,S=M.remeasurement)),"total_remeasurement"in M&&n(5,A=M.total_remeasurement),"move_prev_error"in M&&h(n(6,T=M.move_prev_error))},[b,v,q,N,S,A,T,r,l,u,f,D,O,U]}class pc extends je{constructor(t){super(),Ue(this,t,mc,dc,Xe,{remeasure:0,q_no:1,rescale_y_axis:2,remeasurement_detail:3,remeasurement:4,total_remeasurement:5,move_prev_error:6})}}function pi(e){let t,n,r,i,s,l,a,o,u,c,h,f;n=new ks({props:{q_no:e[5],question:e[15],response_type:e[16]}}),s=new Hu({props:{view_id:"dp-vis-"+e[4],dataset:e[1],q_no:e[4],debug_mode:e[3],spec:e[17],rescale_y_axis:e[14],remeasurement_detail:e[6],move_prev_error:e[9],remeasure_push:e[11]}}),a=new pc({props:{q_no:e[4],remeasure:e[2],rescale_y_axis:e[14],remeasurement_detail:e[6],remeasurement:e[7],total_remeasurement:e[8],move_prev_error:e[9]}});const d=[wc,bc,vc,gc],p=[];function b(v,q){return v[16]===ki?0:v[16]===Ln?1:v[16]===Ei?2:v[16]===Ni?3:-1}return~(u=b(e))&&(c=p[u]=d[u](e)),{c(){t=y("article"),Se(n.$$.fragment),r=z(),i=y("section"),Se(s.$$.fragment),l=z(),Se(a.$$.fragment),o=z(),c&&c.c(),this.h()},l(v){t=k(v,"ARTICLE",{class:!0,id:!0});var q=x(t);De(n.$$.fragment,q),r=B(q),i=k(q,"SECTION",{class:!0});var N=x(i);De(s.$$.fragment,N),l=B(N),De(a.$$.fragment,N),N.forEach(g),o=B(q),c&&c.l(q),q.forEach(g),this.h()},h(){m(i,"class","d-flex justify-content-center"),m(t,"class","q-item mb-5"),m(t,"id",h="q"+e[4])},m(v,q){L(v,t,q),Ve(n,t,null),_(t,r),_(t,i),Ve(s,i,null),_(i,l),Ve(a,i,null),_(t,o),~u&&p[u].m(t,null),f=!0},p(v,q){const N={};q&32&&(N.q_no=v[5]),n.$set(N);const S={};q&16&&(S.view_id="dp-vis-"+v[4]),q&2&&(S.dataset=v[1]),q&16&&(S.q_no=v[4]),q&8&&(S.debug_mode=v[3]),q&64&&(S.remeasurement_detail=v[6]),q&512&&(S.move_prev_error=v[9]),q&2048&&(S.remeasure_push=v[11]),s.$set(S);const A={};q&16&&(A.q_no=v[4]),q&4&&(A.remeasure=v[2]),q&64&&(A.remeasurement_detail=v[6]),q&128&&(A.remeasurement=v[7]),q&256&&(A.total_remeasurement=v[8]),q&512&&(A.move_prev_error=v[9]),a.$set(A),c&&c.p(v,q),(!f||q&16&&h!==(h="q"+v[4]))&&m(t,"id",h)},i(v){f||(le(n.$$.fragment,v),le(s.$$.fragment,v),le(a.$$.fragment,v),le(c),f=!0)},o(v){he(n.$$.fragment,v),he(s.$$.fragment,v),he(a.$$.fragment,v),he(c),f=!1},d(v){v&&g(t),Ce(n),Ce(s),Ce(a),~u&&p[u].d()}}}function gc(e){let t,n;return t=new fc({props:{record_answer:e[0],answer:e[12],q_no:e[4]}}),{c(){Se(t.$$.fragment)},l(r){De(t.$$.fragment,r)},m(r,i){Ve(t,r,i),n=!0},p(r,i){const s={};i&1&&(s.record_answer=r[0]),i&4096&&(s.answer=r[12]),i&16&&(s.q_no=r[4]),t.$set(s)},i(r){n||(le(t.$$.fragment,r),n=!0)},o(r){he(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function vc(e){let t,n;return t=new lc({props:{record_answer:e[0],answer:e[12],q_no:e[4],groups:e[13]}}),{c(){Se(t.$$.fragment)},l(r){De(t.$$.fragment,r)},m(r,i){Ve(t,r,i),n=!0},p(r,i){const s={};i&1&&(s.record_answer=r[0]),i&4096&&(s.answer=r[12]),i&16&&(s.q_no=r[4]),i&8192&&(s.groups=r[13]),t.$set(s)},i(r){n||(le(t.$$.fragment,r),n=!0)},o(r){he(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function bc(e){let t,n;return t=new $u({props:{record_answer:e[0],answer:e[12],q_no:e[4],groups:e[13]}}),{c(){Se(t.$$.fragment)},l(r){De(t.$$.fragment,r)},m(r,i){Ve(t,r,i),n=!0},p(r,i){const s={};i&1&&(s.record_answer=r[0]),i&4096&&(s.answer=r[12]),i&16&&(s.q_no=r[4]),i&8192&&(s.groups=r[13]),t.$set(s)},i(r){n||(le(t.$$.fragment,r),n=!0)},o(r){he(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function wc(e){let t,n;return t=new Qu({props:{record_answer:e[0],answer:e[12],q_no:e[4]}}),{c(){Se(t.$$.fragment)},l(r){De(t.$$.fragment,r)},m(r,i){Ve(t,r,i),n=!0},p(r,i){const s={};i&1&&(s.record_answer=r[0]),i&4096&&(s.answer=r[12]),i&16&&(s.q_no=r[4]),t.$set(s)},i(r){n||(le(t.$$.fragment,r),n=!0)},o(r){he(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function yc(e){let t,n,r=e[4]!==void 0&&pi(e);return{c(){r&&r.c(),t=ge()},l(i){r&&r.l(i),t=ge()},m(i,s){r&&r.m(i,s),L(i,t,s),n=!0},p(i,[s]){i[4]!==void 0?r?(r.p(i,s),s&16&&le(r,1)):(r=pi(i),r.c(),le(r,1),r.m(t.parentNode,t)):r&&(Qt(),he(r,1,1,()=>{r=null}),Wt())},i(i){n||(le(r),n=!0)},o(i){he(r),n=!1},d(i){r&&r.d(i),i&&g(t)}}}function kc(e,t,n){var M,P,E;let r,i=W,s=()=>(i(),i=Ke(v,w=>n(19,r=w)),v);e.$$.on_destroy.push(()=>i());let{record_answer:l=()=>{},dataset:a=[],remeasure:o=()=>{},debug_mode:u,q_no:c,q_index:h,remeasurement_detail:f,remeasurement:d,total_remeasurement:p,move_prev_error:b,answers:v,question_data:q,remeasure_push:N}=t;s();let S=_t(),A=((M=q[c])==null?void 0:M.question)||"No question",T=(P=q[c])==null?void 0:P.response_type,D=(E=q[c])==null?void 0:E.spec,O={},U=[];return gt(()=>{var w;if(n(12,O=r[c]||{}),[Ln,T].includes(T)&&((w=q[c])!=null&&w.group_by)){let I=q[c].group_by;n(13,U=ls(a.array(I)))}}),e.$$set=w=>{"record_answer"in w&&n(0,l=w.record_answer),"dataset"in w&&n(1,a=w.dataset),"remeasure"in w&&n(2,o=w.remeasure),"debug_mode"in w&&n(3,u=w.debug_mode),"q_no"in w&&n(4,c=w.q_no),"q_index"in w&&n(5,h=w.q_index),"remeasurement_detail"in w&&n(6,f=w.remeasurement_detail),"remeasurement"in w&&n(7,d=w.remeasurement),"total_remeasurement"in w&&n(8,p=w.total_remeasurement),"move_prev_error"in w&&n(9,b=w.move_prev_error),"answers"in w&&s(n(10,v=w.answers)),"question_data"in w&&n(18,q=w.question_data),"remeasure_push"in w&&n(11,N=w.remeasure_push)},[l,a,o,u,c,h,f,d,p,b,v,N,O,U,S,A,T,D,q]}class Ec extends je{constructor(t){super(),Ue(this,t,kc,yc,Xe,{record_answer:0,dataset:1,remeasure:2,debug_mode:3,q_no:4,q_index:5,remeasurement_detail:6,remeasurement:7,total_remeasurement:8,move_prev_error:9,answers:10,question_data:18,remeasure_push:11})}}class Nc extends je{constructor(t){super(),Ue(this,t,null,null,Xe,{})}}function qc(e){let t,n;return{c(){t=y("span"),n=F("..."),this.h()},l(r){t=k(r,"SPAN",{style:!0,class:!0});var i=x(t);n=H(i,"..."),i.forEach(g),this.h()},h(){ke(t,"font-weight","400"),m(t,"class","mt-2 text-white")},m(r,i){L(r,t,i),_(t,n)},p:W,d(r){r&&g(t)}}}function xc(e){let t,n;return{c(){t=y("span"),n=F(vr),this.h()},l(r){t=k(r,"SPAN",{style:!0,class:!0});var i=x(t);n=H(i,vr),i.forEach(g),this.h()},h(){ke(t,"font-weight","400"),m(t,"class","mt-2 text-danger")},m(r,i){L(r,t,i),_(t,n)},p:W,d(r){r&&g(t)}}}function Ac(e){let t,n,r,i,s,l,a,o,u,c,h,f,d,p,b,v;function q(A,T){return A[0]?xc:qc}let N=q(e),S=N(e);return{c(){t=y("h3"),n=F(gr),r=z(),i=y("br"),s=z(),S.c(),l=z(),a=y("div"),o=y("div"),u=F(e[2]),c=F(" / "),h=F(e[1]),f=z(),d=y("div"),p=y("div"),b=y("div"),this.h()},l(A){t=k(A,"H3",{class:!0});var T=x(t);n=H(T,gr),r=B(T),i=k(T,"BR",{}),s=B(T),S.l(T),T.forEach(g),l=B(A),a=k(A,"DIV",{class:!0});var D=x(a);o=k(D,"DIV",{class:!0});var O=x(o);u=H(O,e[2]),c=H(O," / "),h=H(O,e[1]),O.forEach(g),f=B(D),d=k(D,"DIV",{class:!0});var U=x(d);p=k(U,"DIV",{class:!0,role:!0,"aria-label":!0,"aria-valuenow":!0,"aria-valuemin":!0,"aria-valuemax":!0});var M=x(p);b=k(M,"DIV",{class:!0,style:!0}),x(b).forEach(g),M.forEach(g),U.forEach(g),D.forEach(g),this.h()},h(){m(t,"class","h6"),m(o,"class","val text-start svelte-wiwjz8"),m(b,"class","progress-bar bg-warning"),m(b,"style",v=`width: ${Math.round(e[2]/e[1]*100)}%`),m(p,"class","progress svelte-wiwjz8"),m(p,"role","progressbar"),m(p,"aria-label","Example 20px high"),m(p,"aria-valuenow","25"),m(p,"aria-valuemin","0"),m(p,"aria-valuemax","100"),m(d,"class","bar svelte-wiwjz8"),m(a,"class","progress-wrap d-flex pb-3 svelte-wiwjz8")},m(A,T){L(A,t,T),_(t,n),_(t,r),_(t,i),_(t,s),S.m(t,null),L(A,l,T),L(A,a,T),_(a,o),_(o,u),_(o,c),_(o,h),_(a,f),_(a,d),_(d,p),_(p,b)},p(A,[T]){N===(N=q(A))&&S?S.p(A,T):(S.d(1),S=N(A),S&&(S.c(),S.m(t,null))),T&4&&Ae(u,A[2]),T&2&&Ae(h,A[1]),T&6&&v!==(v=`width: ${Math.round(A[2]/A[1]*100)}%`)&&m(b,"style",v)},i:W,o:W,d(A){A&&g(t),S.d(),A&&g(l),A&&g(a)}}}function Ic(e,t,n){let{over_remeasure_budget:r=!1,base:i=0,count:s=1}=t;return e.$$set=l=>{"over_remeasure_budget"in l&&n(0,r=l.over_remeasure_budget),"base"in l&&n(1,i=l.base),"count"in l&&n(2,s=l.count)},[r,i,s]}class Tc extends je{constructor(t){super(),Ue(this,t,Ic,Ac,Xe,{over_remeasure_budget:0,base:1,count:2})}}function Mc(e){let t,n,r,i=(e[0]||"")+"",s,l,a,o,u,c,h,f,d,p=e[0]===""?"AC":"C",b,v,q,N,S,A,T,D,O,U,M,P,E,w,I,j,X,J,K,te,G,we,ne,ie,ve,ye,Ee,qe,Ie,Ne,Qe,de,ae,Pe,Re,oe,$,R,Q,_e,V,ee,ue,ce,fe,ze,be,Be,Fe,He,Ye,at,it;return{c(){t=y("div"),n=y("div"),r=y("div"),s=F(i),l=z(),a=y("div"),o=F("= "),u=F(e[1]),c=z(),h=y("div"),f=y("div"),d=y("button"),b=F(p),v=z(),q=y("button"),N=F("9"),S=z(),A=y("button"),T=F("8"),D=z(),O=y("button"),U=F("7"),M=z(),P=y("button"),E=F("6"),w=z(),I=y("button"),j=F("5"),X=z(),J=y("button"),K=F("4"),te=z(),G=y("button"),we=F("3"),ne=z(),ie=y("button"),ve=F("2"),ye=z(),Ee=y("button"),qe=F("1"),Ie=z(),Ne=y("button"),Qe=F("0"),de=z(),ae=y("button"),Pe=F("."),oe=z(),$=y("div"),R=y("button"),Q=F("+"),_e=z(),V=y("button"),ee=F("-"),ue=z(),ce=y("button"),fe=F("×"),ze=z(),be=y("button"),Be=F("/"),Fe=z(),He=y("button"),Ye=F("="),this.h()},l(Te){t=k(Te,"DIV",{id:!0,class:!0});var Le=x(t);n=k(Le,"DIV",{class:!0});var $e=x(n);r=k($e,"DIV",{class:!0});var xe=x(r);s=H(xe,i),xe.forEach(g),l=B($e),a=k($e,"DIV",{class:!0});var We=x(a);o=H(We,"= "),u=H(We,e[1]),We.forEach(g),$e.forEach(g),c=B(Le),h=k(Le,"DIV",{class:!0});var se=x(h);f=k(se,"DIV",{class:!0});var Y=x(f);d=k(Y,"BUTTON",{class:!0});var tn=x(d);b=H(tn,p),tn.forEach(g),v=B(Y),q=k(Y,"BUTTON",{class:!0});var It=x(q);N=H(It,"9"),It.forEach(g),S=B(Y),A=k(Y,"BUTTON",{class:!0});var Tt=x(A);T=H(Tt,"8"),Tt.forEach(g),D=B(Y),O=k(Y,"BUTTON",{class:!0});var Mt=x(O);U=H(Mt,"7"),Mt.forEach(g),M=B(Y),P=k(Y,"BUTTON",{class:!0});var bt=x(P);E=H(bt,"6"),bt.forEach(g),w=B(Y),I=k(Y,"BUTTON",{class:!0});var wt=x(I);j=H(wt,"5"),wt.forEach(g),X=B(Y),J=k(Y,"BUTTON",{class:!0});var St=x(J);K=H(St,"4"),St.forEach(g),te=B(Y),G=k(Y,"BUTTON",{class:!0});var Dt=x(G);we=H(Dt,"3"),Dt.forEach(g),ne=B(Y),ie=k(Y,"BUTTON",{class:!0});var Vt=x(ie);ve=H(Vt,"2"),Vt.forEach(g),ye=B(Y),Ee=k(Y,"BUTTON",{class:!0});var Ct=x(Ee);qe=H(Ct,"1"),Ct.forEach(g),Ie=B(Y),Ne=k(Y,"BUTTON",{class:!0});var Ot=x(Ne);Qe=H(Ot,"0"),Ot.forEach(g),de=B(Y),ae=k(Y,"BUTTON",{class:!0});var Pt=x(ae);Pe=H(Pt,"."),Pt.forEach(g),Y.forEach(g),oe=B(se),$=k(se,"DIV",{class:!0});var Je=x($);R=k(Je,"BUTTON",{class:!0});var Rt=x(R);Q=H(Rt,"+"),Rt.forEach(g),_e=B(Je),V=k(Je,"BUTTON",{class:!0});var zt=x(V);ee=H(zt,"-"),zt.forEach(g),ue=B(Je),ce=k(Je,"BUTTON",{class:!0});var Bt=x(ce);fe=H(Bt,"×"),Bt.forEach(g),ze=B(Je),be=k(Je,"BUTTON",{class:!0});var Ft=x(be);Be=H(Ft,"/"),Ft.forEach(g),Fe=B(Je),He=k(Je,"BUTTON",{class:!0});var Ht=x(He);Ye=H(Ht,"="),Ht.forEach(g),Je.forEach(g),se.forEach(g),Le.forEach(g),this.h()},h(){m(r,"class","current-input svelte-12xspqj"),m(a,"class","current-value svelte-12xspqj"),m(n,"class","current-form svelte-12xspqj"),m(d,"class","function C svelte-12xspqj"),m(q,"class","digit svelte-12xspqj"),m(A,"class","digit svelte-12xspqj"),m(O,"class","digit svelte-12xspqj"),m(P,"class","digit svelte-12xspqj"),m(I,"class","digit svelte-12xspqj"),m(J,"class","digit svelte-12xspqj"),m(G,"class","digit svelte-12xspqj"),m(ie,"class","digit svelte-12xspqj"),m(Ee,"class","digit svelte-12xspqj"),m(Ne,"class","digit zero svelte-12xspqj"),m(ae,"class","digit decimal svelte-12xspqj"),ae.disabled=Re=e[0].includes("."),m(f,"class","digits svelte-12xspqj"),m(R,"class","function svelte-12xspqj"),m(V,"class","function svelte-12xspqj"),m(ce,"class","function svelte-12xspqj"),m(be,"class","function svelte-12xspqj"),m(He,"class","function svelte-12xspqj"),m($,"class","functions"),m(h,"class","keypad svelte-12xspqj"),m(t,"id","calculator"),m(t,"class","p-1 svelte-12xspqj")},m(Te,Le){L(Te,t,Le),_(t,n),_(n,r),_(r,s),_(n,l),_(n,a),_(a,o),_(a,u),_(t,c),_(t,h),_(h,f),_(f,d),_(d,b),_(f,v),_(f,q),_(q,N),_(f,S),_(f,A),_(A,T),_(f,D),_(f,O),_(O,U),_(f,M),_(f,P),_(P,E),_(f,w),_(f,I),_(I,j),_(f,X),_(f,J),_(J,K),_(f,te),_(f,G),_(G,we),_(f,ne),_(f,ie),_(ie,ve),_(f,ye),_(f,Ee),_(Ee,qe),_(f,Ie),_(f,Ne),_(Ne,Qe),_(f,de),_(f,ae),_(ae,Pe),_(h,oe),_(h,$),_($,R),_(R,Q),_($,_e),_($,V),_(V,ee),_($,ue),_($,ce),_(ce,fe),_($,ze),_($,be),_(be,Be),_($,Fe),_($,He),_(He,Ye),at||(it=[Z(d,"click",e[8]),Z(q,"click",e[9]),Z(A,"click",e[10]),Z(O,"click",e[11]),Z(P,"click",e[12]),Z(I,"click",e[13]),Z(J,"click",e[14]),Z(G,"click",e[15]),Z(ie,"click",e[16]),Z(Ee,"click",e[17]),Z(Ne,"click",e[18]),Z(ae,"click",e[19]),Z(R,"click",e[20]),Z(V,"click",e[21]),Z(ce,"click",e[22]),Z(be,"click",e[23]),Z(He,"click",e[24])],at=!0)},p(Te,[Le]){Le&1&&i!==(i=(Te[0]||"")+"")&&Ae(s,i),Le&2&&Ae(u,Te[1]),Le&1&&p!==(p=Te[0]===""?"AC":"C")&&Ae(b,p),Le&1&&Re!==(Re=Te[0].includes("."))&&(ae.disabled=Re)},i:W,o:W,d(Te){Te&&g(t),at=!1,vt(it)}}}function Sc(e,t,n){let r,i,s=_t("");Gt(e,s,j=>n(1,i=j));let l=_t("");Gt(e,l,j=>n(0,r=j));let a=null;function o(j){l.update(X=>X+j)}function u(j){j!=="minus"?(a=j,h()):r==""?o("-"):(a=j,h())}function c(j,X){if(a==="plus")return(j||0)+(X||0);if(a==="minus")return(j||0)-(X||0);if(a==="times")return(j||1)*(X||1);if(a==="divides")return(j||1)/(X||1)}function h(){if(console.log(a,i,r),a&&i!==""){let j=c(parseFloat(i||void 0),parseFloat(r||void 0));s.set(j.toString()),l.set("")}else s.set(r),l.set("")}function f(){r===""?s.set(""):l.set("")}return[r,i,s,l,o,u,h,f,()=>f(),()=>o("9"),()=>o("8"),()=>o("7"),()=>o("6"),()=>o("5"),()=>o("4"),()=>o("3"),()=>o("2"),()=>o("1"),()=>o("0"),()=>o("."),()=>u("plus"),()=>u("minus"),()=>u("times"),()=>u("divides"),()=>h()]}class Dc extends je{constructor(t){super(),Ue(this,t,Sc,Mc,Xe,{})}}function Vc(e){let t,n,r,i;return{c(){t=y("div"),n=y("textarea"),this.h()},l(s){t=k(s,"DIV",{id:!0,class:!0});var l=x(t);n=k(l,"TEXTAREA",{class:!0}),x(n).forEach(g),l.forEach(g),this.h()},h(){n.value=e[0],m(n,"class","svelte-fzvz2e"),m(t,"id","note"),m(t,"class","p-1 svelte-fzvz2e")},m(s,l){L(s,t,l),_(t,n),r||(i=Z(n,"change",e[1]),r=!0)},p(s,[l]){l&1&&(n.value=s[0])},i:W,o:W,d(s){s&&g(t),r=!1,i()}}}function Cc(e,t,n){let r;return Gt(e,or,s=>n(0,r=s)),[r,s=>{or.update(l=>s.target.value)}]}class Oc extends je{constructor(t){super(),Ue(this,t,Cc,Vc,Xe,{})}}function gi(e,t,n){const r=e.slice();return r[42]=t[n],r[44]=n,r}function Pc(e){let t,n,r,i,s,l,a,o,u,c,h,f,d,p,b,v,q,N,S,A,T,D,O;i=new Tc({props:{over_remeasure_budget:e[13],count:e[18]||0,base:e[6]}}),a=new Nc({});let U=e[16],M=[];for(let w=0;w<U.length;w+=1)M[w]=bi(gi(e,U,w));const P=w=>he(M[w],1,1,()=>{M[w]=null});let E=e[12]&&wi();return{c(){t=y("section"),n=y("div"),r=y("div"),Se(i.$$.fragment),s=z(),l=y("div"),Se(a.$$.fragment),o=z(),u=y("a"),c=F("Open calculator & notes"),h=z(),f=y("section");for(let w=0;w<M.length;w+=1)M[w].c();d=z(),p=y("section"),b=y("div"),v=y("button"),q=F("Submit answers"),S=z(),A=y("div"),E&&E.c(),this.h()},l(w){t=k(w,"SECTION",{id:!0,class:!0,style:!0});var I=x(t);n=k(I,"DIV",{class:!0,style:!0});var j=x(n);r=k(j,"DIV",{class:!0});var X=x(r);De(i.$$.fragment,X),X.forEach(g),s=B(j),l=k(j,"DIV",{class:!0});var J=x(l);De(a.$$.fragment,J),o=B(J),u=k(J,"A",{style:!0});var K=x(u);c=H(K,"Open calculator & notes"),K.forEach(g),J.forEach(g),j.forEach(g),I.forEach(g),h=B(w),f=k(w,"SECTION",{id:!0,class:!0,style:!0});var te=x(f);for(let ve=0;ve<M.length;ve+=1)M[ve].l(te);te.forEach(g),d=B(w),p=k(w,"SECTION",{class:!0});var G=x(p);b=k(G,"DIV",{class:!0,style:!0});var we=x(b);v=k(we,"BUTTON",{class:!0});var ne=x(v);q=H(ne,"Submit answers"),ne.forEach(g),we.forEach(g),S=B(G),A=k(G,"DIV",{style:!0});var ie=x(A);E&&E.l(ie),ie.forEach(g),G.forEach(g),this.h()},h(){m(r,"class","col-9"),ke(u,"cursor","pointer"),m(l,"class","col-3 text-end p-4"),m(n,"class","row"),ke(n,"width","80vw"),ke(n,"margin-left","10vw"),m(t,"id","progress"),m(t,"class","container-fluid pt-4 position-fixed bg-white border-bottom"),ke(t,"z-index","4000"),ke(t,"top","0"),ke(t,"left","0"),m(f,"id","questions"),m(f,"class","container-fluid pt-3"),m(f,"style",`margin-top: ${nt.progress_bar_height}px;`),m(v,"class","btn btn-primary"),v.disabled=N=!e[11],m(b,"class","mb-3"),ke(b,"width","auto"),ke(b,"margin-left","auto"),ke(b,"margin-right","auto"),ke(A,"height","200px"),m(p,"class","container py-5 mb-1 text-center")},m(w,I){L(w,t,I),_(t,n),_(n,r),Ve(i,r,null),_(n,s),_(n,l),Ve(a,l,null),_(l,o),_(l,u),_(u,c),L(w,h,I),L(w,f,I);for(let j=0;j<M.length;j+=1)M[j]&&M[j].m(f,null);L(w,d,I),L(w,p,I),_(p,b),_(b,v),_(v,q),_(p,S),_(p,A),E&&E.m(A,null),T=!0,D||(O=[Z(u,"click",e[33]),Z(v,"click",e[34]),Z(b,"focus",e[35]),Z(b,"mouseover",e[36]),Z(b,"blur",e[37]),Z(b,"mouseout",e[38])],D=!0)},p(w,I){const j={};if(I[0]&8192&&(j.over_remeasure_budget=w[13]),I[0]&262144&&(j.count=w[18]||0),I[0]&64&&(j.base=w[6]),i.$set(j),I[0]&83969276){U=w[16];let X;for(X=0;X<U.length;X+=1){const J=gi(w,U,X);M[X]?(M[X].p(J,I),le(M[X],1)):(M[X]=bi(J),M[X].c(),le(M[X],1),M[X].m(f,null))}for(Qt(),X=U.length;X<M.length;X+=1)P(X);Wt()}(!T||I[0]&2048&&N!==(N=!w[11]))&&(v.disabled=N),w[12]?E?E.p(w,I):(E=wi(),E.c(),E.m(A,null)):E&&(E.d(1),E=null)},i(w){if(!T){le(i.$$.fragment,w),le(a.$$.fragment,w);for(let I=0;I<U.length;I+=1)le(M[I]);T=!0}},o(w){he(i.$$.fragment,w),he(a.$$.fragment,w),M=M.filter(Boolean);for(let I=0;I<M.length;I+=1)he(M[I]);T=!1},d(w){w&&g(t),Ce(i),Ce(a),w&&g(h),w&&g(f),Et(M,w),w&&g(d),w&&g(p),E&&E.d(),D=!1,vt(O)}}}function Rc(e){let t,n;function r(l,a){return a[0]&33024&&(n=null),n==null&&(n=!!_s(l[8],l[15])),n?Fc:Bc}let i=r(e,[-1,-1]),s=i(e);return{c(){t=y("section"),s.c(),this.h()},l(l){t=k(l,"SECTION",{class:!0});var a=x(t);s.l(a),a.forEach(g),this.h()},h(){m(t,"class","container-fluid pt-5 text-center")},m(l,a){L(l,t,a),s.m(t,null)},p(l,a){i===(i=r(l,a))&&s?s.p(l,a):(s.d(1),s=i(l),s&&(s.c(),s.m(t,null)))},i:W,o:W,d(l){l&&g(t),s.d()}}}function zc(e){let t,n,r=hr(e[9])+"",i,s,l,a,o,u;return{c(){t=y("section"),n=y("h3"),i=F(r),s=z(),l=y("button"),a=F("Continue"),this.h()},l(c){t=k(c,"SECTION",{class:!0});var h=x(t);n=k(h,"H3",{class:!0});var f=x(n);i=H(f,r),f.forEach(g),s=B(h),l=k(h,"BUTTON",{class:!0});var d=x(l);a=H(d,"Continue"),d.forEach(g),h.forEach(g),this.h()},h(){m(n,"class","h6"),m(l,"class","btn btn-primary mt-5"),m(t,"class","container-fluid pt-5 text-center")},m(c,h){L(c,t,h),_(t,n),_(n,i),_(t,s),_(t,l),_(l,a),o||(u=Z(l,"click",e[32]),o=!0)},p(c,h){h[0]&512&&r!==(r=hr(c[9])+"")&&Ae(i,r)},i:W,o:W,d(c){c&&g(t),o=!1,u()}}}function vi(e){let t,n;return t=new Ec({props:{q_no:e[42],q_index:e[44]+1,record_answer:e[24],dataset:e[14][`q${e[42]}`],remeasure:e[26],answers:e[2],question_data:e[10],debug_mode:ds,remeasurement_detail:e[4],remeasurement:e[5],total_remeasurement:e[6],move_prev_error:e[7],remeasure_push:e[3]}}),{c(){Se(t.$$.fragment)},l(r){De(t.$$.fragment,r)},m(r,i){Ve(t,r,i),n=!0},p(r,i){const s={};i[0]&65536&&(s.q_no=r[42]),i[0]&81920&&(s.dataset=r[14][`q${r[42]}`]),i[0]&4&&(s.answers=r[2]),i[0]&1024&&(s.question_data=r[10]),i[0]&16&&(s.remeasurement_detail=r[4]),i[0]&32&&(s.remeasurement=r[5]),i[0]&64&&(s.total_remeasurement=r[6]),i[0]&128&&(s.move_prev_error=r[7]),i[0]&8&&(s.remeasure_push=r[3]),t.$set(s)},i(r){n||(le(t.$$.fragment,r),n=!0)},o(r){he(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function bi(e){let t,n,r=e[14][`q${e[42]}`]&&vi(e);return{c(){r&&r.c(),t=ge()},l(i){r&&r.l(i),t=ge()},m(i,s){r&&r.m(i,s),L(i,t,s),n=!0},p(i,s){i[14][`q${i[42]}`]?r?(r.p(i,s),s[0]&81920&&le(r,1)):(r=vi(i),r.c(),le(r,1),r.m(t.parentNode,t)):r&&(Qt(),he(r,1,1,()=>{r=null}),Wt())},i(i){n||(le(r),n=!0)},o(i){he(r),n=!1},d(i){r&&r.d(i),i&&g(t)}}}function wi(e){let t,n;return{c(){t=y("p"),n=F(pr),this.h()},l(r){t=k(r,"P",{class:!0});var i=x(t);n=H(i,pr),i.forEach(g),this.h()},h(){m(t,"class","text-danger")},m(r,i){L(r,t,i),_(t,n)},p:W,d(r){r&&g(t)}}}function Bc(e){let t,n=_r(e[9])+"",r,i,s,l,a,o,u,c;return{c(){t=y("h3"),r=F(n),i=z(),s=y("p"),l=F(dr),a=z(),o=y("a"),u=F("Continue"),this.h()},l(h){t=k(h,"H3",{class:!0});var f=x(t);r=H(f,n),f.forEach(g),i=B(h),s=k(h,"P",{});var d=x(s);l=H(d,dr),d.forEach(g),a=B(h),o=k(h,"A",{class:!0,href:!0});var p=x(o);u=H(p,"Continue"),p.forEach(g),this.h()},h(){m(t,"class","h6"),m(o,"class","btn btn-primary mt-5"),m(o,"href",c=`${cr(e[8],e[15])}`)},m(h,f){L(h,t,f),_(t,r),L(h,i,f),L(h,s,f),_(s,l),L(h,a,f),L(h,o,f),_(o,u)},p(h,f){f[0]&512&&n!==(n=_r(h[9])+"")&&Ae(r,n),f[0]&33024&&c!==(c=`${cr(h[8],h[15])}`)&&m(o,"href",c)},d(h){h&&g(t),h&&g(i),h&&g(s),h&&g(a),h&&g(o)}}}function Fc(e){let t,n,r,i,s;return{c(){t=y("h3"),n=F(mr),r=z(),i=y("a"),s=F("Go back to the main page"),this.h()},l(l){t=k(l,"H3",{class:!0});var a=x(t);n=H(a,mr),a.forEach(g),r=B(l),i=k(l,"A",{class:!0,href:!0});var o=x(i);s=H(o,"Go back to the main page"),o.forEach(g),this.h()},h(){m(t,"class","h6"),m(i,"class","btn btn-primary mt-5"),m(i,"href","/")},m(l,a){L(l,t,a),_(t,n),L(l,r,a),L(l,i,a),_(i,s)},p:W,d(l){l&&g(t),l&&g(r),l&&g(i)}}}function yi(e){let t,n,r,i,s,l,a,o,u,c,h,f,d,p,b,v,q,N,S,A;return a=new Oc({}),d=new Dc({}),{c(){t=y("section"),n=y("div"),r=y("div"),i=y("h6"),s=F("Notes"),l=z(),Se(a.$$.fragment),o=z(),u=y("div"),c=y("h6"),h=F("Calculator"),f=z(),Se(d.$$.fragment),p=z(),b=y("div"),v=y("button"),q=F("Close"),this.h()},l(T){t=k(T,"SECTION",{id:!0,class:!0});var D=x(t);n=k(D,"DIV",{class:!0});var O=x(n);r=k(O,"DIV",{class:!0});var U=x(r);i=k(U,"H6",{});var M=x(i);s=H(M,"Notes"),M.forEach(g),l=B(U),De(a.$$.fragment,U),U.forEach(g),o=B(O),u=k(O,"DIV",{});var P=x(u);c=k(P,"H6",{});var E=x(c);h=H(E,"Calculator"),E.forEach(g),f=B(P),De(d.$$.fragment,P),P.forEach(g),O.forEach(g),p=B(D),b=k(D,"DIV",{class:!0});var w=x(b);v=k(w,"BUTTON",{class:!0});var I=x(v);q=H(I,"Close"),I.forEach(g),w.forEach(g),D.forEach(g),this.h()},h(){m(r,"class","me-3"),m(n,"class","calculator-note-wrap svelte-pc36ep"),m(v,"class","btn btn-secondary"),m(b,"class","text-center mt-3"),m(t,"id","calculator-float"),m(t,"class","svelte-pc36ep")},m(T,D){L(T,t,D),_(t,n),_(n,r),_(r,i),_(i,s),_(r,l),Ve(a,r,null),_(n,o),_(n,u),_(u,c),_(c,h),_(u,f),Ve(d,u,null),_(t,p),_(t,b),_(b,v),_(v,q),N=!0,S||(A=Z(v,"click",e[39]),S=!0)},p:W,i(T){N||(le(a.$$.fragment,T),le(d.$$.fragment,T),N=!0)},o(T){he(a.$$.fragment,T),he(d.$$.fragment,T),N=!1},d(T){T&&g(t),Ce(a),Ce(d),S=!1,A()}}}function Hc(e){let t,n,r,i,s,l,a,o,u,c;document.title=t=e[9]+" | "+rn;const h=[zc,Rc,Pc],f=[];function d(b,v){return b[21]==0?0:b[21]==-1?1:2}s=d(e),l=f[s]=h[s](e);let p=e[17]&&yi(e);return{c(){n=y("meta"),i=z(),l.c(),a=z(),p&&p.c(),o=z(),u=ge(),this.h()},l(b){const v=rs("svelte-14w7d69",document.head);n=k(v,"META",{name:!0,content:!0}),v.forEach(g),i=B(b),l.l(b),a=B(b),p&&p.l(b),o=B(b),u=ge(),this.h()},h(){m(n,"name","description"),m(n,"content",r=rn+" "+e[9])},m(b,v){_(document.head,n),L(b,i,v),f[s].m(b,v),L(b,a,v),p&&p.m(b,v),L(b,o,v),L(b,u,v),c=!0},p(b,v){(!c||v[0]&512)&&t!==(t=b[9]+" | "+rn)&&(document.title=t),(!c||v[0]&512&&r!==(r=rn+" "+b[9]))&&m(n,"content",r);let q=s;s=d(b),s===q?f[s].p(b,v):(Qt(),he(f[q],1,1,()=>{f[q]=null}),Wt(),l=f[s],l?l.p(b,v):(l=f[s]=h[s](b),l.c()),le(l,1),l.m(a.parentNode,a)),b[17]?p?(p.p(b,v),v[0]&131072&&le(p,1)):(p=yi(b),p.c(),le(p,1),p.m(o.parentNode,o)):p&&(Qt(),he(p,1,1,()=>{p=null}),Wt())},i(b){c||(le(l),le(p),c=!0)},o(b){he(l),he(p),c=!1},d(b){g(n),b&&g(i),f[s].d(b),b&&g(a),p&&p.d(b),b&&g(o),b&&g(u)}}}function Lc(e,t,n){let r,i=W,s=()=>(i(),i=Ke(U,V=>n(18,r=V)),U),l,a=W,o=()=>(a(),a=Ke(S,V=>n(19,l=V)),S),u,c=W,h=()=>(c(),c=Ke(O,V=>n(20,u=V)),O),f,d=W,p=()=>(d(),d=Ke(N,V=>n(21,f=V)),N),b,v=W,q=()=>(v(),v=Ke(A,V=>n(22,b=V)),A);e.$$.on_destroy.push(()=>i()),e.$$.on_destroy.push(()=>a()),e.$$.on_destroy.push(()=>c()),e.$$.on_destroy.push(()=>d()),e.$$.on_destroy.push(()=>v());let{question_no:N,user_id:S,answers:A,total_questions:T,remeasure_push:D,remeasurement_detail:O,remeasurement:U,total_remeasurement:M,move_prev_error:P,phase:E,phaseName:w,question_data:I,bins:j}=t;p(),o(),q(),h(),s();function X(V){N.set(V)}let J=!1,K=!1;function te(V,ee){A.update(ue=>(ue[V]=ee,ue))}function G(){(ur(E)||confirm("Your answers will be final."))&&X(-1)}let we=r>=M;function ne(V){r<M&&(U.update(ee=>ee+1),O.update(ee=>(ee[V]===void 0&&(ee[V]=0),ee[V]+=1,ee)),D.set({question:V,count:u[V]}),n(13,we=r>=M))}let ie={},ve=[],ye=[];async function Ee(){let V=await os();S.set(V==null?void 0:V.Pid),n(15,ve=(V==null?void 0:V.order_2)||[]),n(16,ye=(V==null?void 0:V[us[E]])||[1]),U.set(0),N.set(0),O.update(ee=>{let ue={};return ye.forEach(ce=>{ue[ce]=0}),ue}),A.set({})}async function qe(){let ee=await(await cs("data-tutorial-2.csv")).text();return fs(ee)}async function Ie(){Object.keys(I).forEach(V=>{let ee=`q${V}`,ue=`q${ms[E]+parseInt(V)}`;ur(E)?qe().then(ce=>{n(14,ie[ee]=ce,ie)}):hs(E,l,ue).then(ce=>{n(14,ie[ee]=ce,ie)})})}let Ne=!1;function Qe(){n(17,Ne=!0)}function de(){n(17,Ne=!1)}gt(()=>{P.set(!0),A.subscribe(V=>{n(11,J=as(V,I,T,j))}),Ee().then(()=>{Ie()}),n(13,we=r>=M)});const ae=()=>{X(1)},Pe=()=>{Qe()},Re=()=>{G()},oe=()=>{n(12,K=!J)},$=()=>{n(12,K=!J)},R=()=>{n(12,K=!1)},Q=()=>{n(12,K=!1)},_e=()=>{de()};return e.$$set=V=>{"question_no"in V&&p(n(0,N=V.question_no)),"user_id"in V&&o(n(1,S=V.user_id)),"answers"in V&&q(n(2,A=V.answers)),"total_questions"in V&&n(29,T=V.total_questions),"remeasure_push"in V&&n(3,D=V.remeasure_push),"remeasurement_detail"in V&&h(n(4,O=V.remeasurement_detail)),"remeasurement"in V&&s(n(5,U=V.remeasurement)),"total_remeasurement"in V&&n(6,M=V.total_remeasurement),"move_prev_error"in V&&n(7,P=V.move_prev_error),"phase"in V&&n(8,E=V.phase),"phaseName"in V&&n(9,w=V.phaseName),"question_data"in V&&n(10,I=V.question_data),"bins"in V&&n(30,j=V.bins)},[N,S,A,D,O,U,M,P,E,w,I,J,K,we,ie,ve,ye,Ne,r,l,u,f,b,X,te,G,ne,Qe,de,T,j,qe,ae,Pe,Re,oe,$,R,Q,_e]}class Yc extends je{constructor(t){super(),Ue(this,t,Lc,Hc,Xe,{question_no:0,user_id:1,answers:2,total_questions:29,remeasure_push:3,remeasurement_detail:4,remeasurement:5,total_remeasurement:6,move_prev_error:7,phase:8,phaseName:9,question_data:10,bins:30,get_training_data:31},null,[-1,-1])}get get_training_data(){return this.$$.ctx[31]}}export{Yc as P};
