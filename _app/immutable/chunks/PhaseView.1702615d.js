import{S as Xe,i as Ye,s as Ge,k,q as F,a as P,l as E,m as q,r as H,h as p,c as z,n as m,b as U,G as _,u as Ve,H as J,e as ye,M as ee,y as Pe,z as ze,A as Be,g as se,d as he,B as Fe,I as Wt,o as vt,Q as Ke,R as we,T as Re,U as He,O as ht,p as Ne,N as qt,v as kt,f as Et,J as is}from"./index.fc46900e.js";import{w as ss,e as ls,I as Ei,D as Ln,J as Ni,B as qi,o as ft,u as as,d as or,f as os,S as us,i as ur,h as cs,j as fs,k as hs,l as _s,m as ds,n as ms,p as ps,q as cr,r as gs}from"./ScoringRule.469c5461.js";import{w as dt}from"./index.12ece268.js";function fr(e){return ss(e,{escape:!0,toString(){ls("Escaped values can not be serialized.")}})}const rn="Differential Privacy Study";function hr(e){return`Click the "Continue" button to start ${e}.`}function _r(e){return`You completed ${e} of the study.`}const dr='Click the "Continue" button to proceed.',mr="You completed the main task, and we will move on to the interview.",pr="There are either missing answers or your answers fall out of the acceptable ranges.",gr="The number of remeasurements used so far",vr="You have reached the remeasurement budget",At="Please make sure the probabilities you entered sum to 1.",br="Please make sure the lower bound is less than or equals to the upper bound.",wr="Please make sure the numbers you enter are at least 0 and less than or equal to 1,000.",yr="Please report your answer in terms of an interval in which you are 95% confident the true answer falls.",kr="Please report your answer in terms of a probability for each bin/group.",Er="Please report your answer in terms of a probability for each pair of bins/groups.",Nr="Please report your answer in terms of probabilities for Yes and No.";function qr(e){return`You have spent <strong class="text-danger">${e||0}</strong> remeasure${e>1?"s":""} on this question.`}const Ar="Center the previous errors around the previous noisy estimates",xr="Rescale the Y axis for the current view";function vs(e){let t;return{c(){t=F(Nr)},l(n){t=H(n,Nr)},m(n,r){U(n,t,r)},p:J,d(n){n&&p(t)}}}function bs(e){let t;return{c(){t=F(Er)},l(n){t=H(n,Er)},m(n,r){U(n,t,r)},p:J,d(n){n&&p(t)}}}function ws(e){let t;return{c(){t=F(kr)},l(n){t=H(n,kr)},m(n,r){U(n,t,r)},p:J,d(n){n&&p(t)}}}function ys(e){let t;return{c(){t=F(yr)},l(n){t=H(n,yr)},m(n,r){U(n,t,r)},p:J,d(n){n&&p(t)}}}function ks(e){let t,n,r,i,s,l,a;function o(f,h){if(f[2]===Ei)return ys;if(f[2]===Ln)return ws;if(f[2]===Ni)return bs;if(f[2]===qi)return vs}let u=o(e),c=u&&u(e);return{c(){t=k("h3"),n=F("Q"),r=F(e[0]),i=F(". "),s=F(e[1]),l=P(),a=k("p"),c&&c.c(),this.h()},l(f){t=E(f,"H3",{class:!0});var h=q(t);n=H(h,"Q"),r=H(h,e[0]),i=H(h,". "),s=H(h,e[1]),h.forEach(p),l=z(f),a=E(f,"P",{class:!0});var d=q(a);c&&c.l(d),d.forEach(p),this.h()},h(){m(t,"class","text-center mb-1"),m(a,"class","text-center mb-5")},m(f,h){U(f,t,h),_(t,n),_(t,r),_(t,i),_(t,s),U(f,l,h),U(f,a,h),c&&c.m(a,null)},p(f,[h]){h&1&&Ve(r,f[0]),h&2&&Ve(s,f[1]),u===(u=o(f))&&c?c.p(f,h):(c&&c.d(1),c=u&&u(f),c&&(c.c(),c.m(a,null)))},i:J,o:J,d(f){f&&p(t),f&&p(l),f&&p(a),c&&c.d()}}}function Es(e,t,n){let{q_no:r,question:i,response_type:s}=t;return e.$$set=l=>{"q_no"in l&&n(0,r=l.q_no),"question"in l&&n(1,i=l.question),"response_type"in l&&n(2,s=l.response_type)},[r,i,s]}class Ns extends Xe{constructor(t){super(),Ye(this,t,Es,ks,Ge,{q_no:0,question:1,response_type:2})}}function un(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qs(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ai(e){let t,n,r;e.length!==2?(t=un,n=(a,o)=>un(e(a),o),r=(a,o)=>e(a)-o):(t=e===un||e===qs?e:As,n=e,r=e);function i(a,o,u=0,c=a.length){if(u<c){if(t(o,o)!==0)return c;do{const f=u+c>>>1;n(a[f],o)<0?u=f+1:c=f}while(u<c)}return u}function s(a,o,u=0,c=a.length){if(u<c){if(t(o,o)!==0)return c;do{const f=u+c>>>1;n(a[f],o)<=0?u=f+1:c=f}while(u<c)}return u}function l(a,o,u=0,c=a.length){const f=i(a,o,u,c-1);return f>u&&r(a[f-1],o)>-r(a[f],o)?f-1:f}return{left:i,center:l,right:s}}function As(){return 0}function xs(e){return e===null?NaN:+e}const Is=Ai(un),Ts=Is.right;Ai(xs).center;const Ms=Ts;function xn(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class Ir extends Map{constructor(t,n=Vs){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Tr(this,t))}has(t){return super.has(Tr(this,t))}set(t,n){return super.set(Ss(this,t),n)}delete(t){return super.delete(Ds(this,t))}}function Tr({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Ss({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Ds({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Vs(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Cs=Math.sqrt(50),Os=Math.sqrt(10),Rs=Math.sqrt(2);function dn(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=Cs?10:s>=Os?5:s>=Rs?2:1;let a,o,u;return i<0?(u=Math.pow(10,-i)/l,a=Math.round(e*u),o=Math.round(t*u),a/u<e&&++a,o/u>t&&--o,u=-u):(u=Math.pow(10,i)*l,a=Math.round(e/u),o=Math.round(t/u),a*u<e&&++a,o*u>t&&--o),o<a&&.5<=n&&n<2?dn(e,t,n*2):[a,o,u]}function Ps(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?dn(t,e,n):dn(e,t,n);if(!(s>=i))return[];const a=s-i+1,o=new Array(a);if(r)if(l<0)for(let u=0;u<a;++u)o[u]=(s-u)/-l;else for(let u=0;u<a;++u)o[u]=(s-u)*l;else if(l<0)for(let u=0;u<a;++u)o[u]=(i+u)/-l;else for(let u=0;u<a;++u)o[u]=(i+u)*l;return o}function Dn(e,t,n){return t=+t,e=+e,n=+n,dn(e,t,n)[2]}function zs(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Dn(t,e,n):Dn(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function In(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Bs(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Fs(e){return e}var Tn=1,cn=2,Vn=3,Xt=4,Mr=1e-6;function Hs(e){return"translate("+e+",0)"}function Ls(e){return"translate(0,"+e+")"}function Us(e){return t=>+e(t)}function js(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Xs(){return!this.__axis}function Un(e,t){var n=[],r=null,i=null,s=6,l=6,a=3,o=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===Tn||e===Xt?-1:1,c=e===Xt||e===cn?"x":"y",f=e===Tn||e===Vn?Hs:Ls;function h(d){var g=r??(t.ticks?t.ticks.apply(t,n):t.domain()),w=i??(t.tickFormat?t.tickFormat.apply(t,n):Fs),v=Math.max(s,0)+a,b=t.range(),y=+b[0]+o,I=+b[b.length-1]+o,x=(t.bandwidth?js:Us)(t.copy(),o),T=d.selection?d.selection():d,S=T.selectAll(".domain").data([null]),V=T.selectAll(".tick").data(g,t).order(),X=V.exit(),D=V.enter().append("g").attr("class","tick"),R=V.select("line"),A=V.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),V=V.merge(D),R=R.merge(D.append("line").attr("stroke","currentColor").attr(c+"2",u*s)),A=A.merge(D.append("text").attr("fill","currentColor").attr(c,u*v).attr("dy",e===Tn?"0em":e===Vn?"0.71em":"0.32em")),d!==T&&(S=S.transition(d),V=V.transition(d),R=R.transition(d),A=A.transition(d),X=X.transition(d).attr("opacity",Mr).attr("transform",function(N){return isFinite(N=x(N))?f(N+o):this.getAttribute("transform")}),D.attr("opacity",Mr).attr("transform",function(N){var M=this.parentNode.__axis;return f((M&&isFinite(M=M(N))?M:x(N))+o)})),X.remove(),S.attr("d",e===Xt||e===cn?l?"M"+u*l+","+y+"H"+o+"V"+I+"H"+u*l:"M"+o+","+y+"V"+I:l?"M"+y+","+u*l+"V"+o+"H"+I+"V"+u*l:"M"+y+","+o+"H"+I),V.attr("opacity",1).attr("transform",function(N){return f(x(N)+o)}),R.attr(c+"2",u*s),A.attr(c,u*v).text(w),T.filter(Xs).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===cn?"start":e===Xt?"end":"middle"),T.each(function(){this.__axis=x})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(s=l=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(l=+d,h):l},h.tickPadding=function(d){return arguments.length?(a=+d,h):a},h.offset=function(d){return arguments.length?(o=+d,h):o},h}function Ys(e){return Un(cn,e)}function Gs(e){return Un(Vn,e)}function Qs(e){return Un(Xt,e)}var Ws={value:()=>{}};function xi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new fn(n)}function fn(e){this._=e}function Js(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}fn.prototype=xi.prototype={constructor:fn,on:function(e,t){var n=this._,r=Js(e+"",n),i,s=-1,l=r.length;if(arguments.length<2){for(;++s<l;)if((i=(e=r[s]).type)&&(i=Ks(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<l;)if(i=(e=r[s]).type)n[i]=Sr(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Sr(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new fn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Ks(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Sr(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ws,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Cn="http://www.w3.org/1999/xhtml";const Dr={svg:"http://www.w3.org/2000/svg",xhtml:Cn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Dr.hasOwnProperty(t)?{space:Dr[t],local:e}:e}function Zs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Cn&&t.documentElement.namespaceURI===Cn?t.createElement(e):t.createElementNS(n,e)}}function $s(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ii(e){var t=Nn(e);return(t.local?$s:Zs)(t)}function el(){}function jn(e){return e==null?el:function(){return this.querySelector(e)}}function tl(e){typeof e!="function"&&(e=jn(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],l=s.length,a=r[i]=new Array(l),o,u,c=0;c<l;++c)(o=s[c])&&(u=e.call(o,o.__data__,c,s))&&("__data__"in o&&(u.__data__=o.__data__),a[c]=u);return new Ze(r,this._parents)}function nl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function rl(){return[]}function Ti(e){return e==null?rl:function(){return this.querySelectorAll(e)}}function il(e){return function(){return nl(e.apply(this,arguments))}}function sl(e){typeof e=="function"?e=il(e):e=Ti(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var l=t[s],a=l.length,o,u=0;u<a;++u)(o=l[u])&&(r.push(e.call(o,o.__data__,u,l)),i.push(o));return new Ze(r,i)}function Mi(e){return function(){return this.matches(e)}}function Si(e){return function(t){return t.matches(e)}}var ll=Array.prototype.find;function al(e){return function(){return ll.call(this.children,e)}}function ol(){return this.firstElementChild}function ul(e){return this.select(e==null?ol:al(typeof e=="function"?e:Si(e)))}var cl=Array.prototype.filter;function fl(){return Array.from(this.children)}function hl(e){return function(){return cl.call(this.children,e)}}function _l(e){return this.selectAll(e==null?fl:hl(typeof e=="function"?e:Si(e)))}function dl(e){typeof e!="function"&&(e=Mi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],l=s.length,a=r[i]=[],o,u=0;u<l;++u)(o=s[u])&&e.call(o,o.__data__,u,s)&&a.push(o);return new Ze(r,this._parents)}function Di(e){return new Array(e.length)}function ml(){return new Ze(this._enter||this._groups.map(Di),this._parents)}function mn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}mn.prototype={constructor:mn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function pl(e){return function(){return e}}function gl(e,t,n,r,i,s){for(var l=0,a,o=t.length,u=s.length;l<u;++l)(a=t[l])?(a.__data__=s[l],r[l]=a):n[l]=new mn(e,s[l]);for(;l<o;++l)(a=t[l])&&(i[l]=a)}function vl(e,t,n,r,i,s,l){var a,o,u=new Map,c=t.length,f=s.length,h=new Array(c),d;for(a=0;a<c;++a)(o=t[a])&&(h[a]=d=l.call(o,o.__data__,a,t)+"",u.has(d)?i[a]=o:u.set(d,o));for(a=0;a<f;++a)d=l.call(e,s[a],a,s)+"",(o=u.get(d))?(r[a]=o,o.__data__=s[a],u.delete(d)):n[a]=new mn(e,s[a]);for(a=0;a<c;++a)(o=t[a])&&u.get(h[a])===o&&(i[a]=o)}function bl(e){return e.__data__}function wl(e,t){if(!arguments.length)return Array.from(this,bl);var n=t?vl:gl,r=this._parents,i=this._groups;typeof e!="function"&&(e=pl(e));for(var s=i.length,l=new Array(s),a=new Array(s),o=new Array(s),u=0;u<s;++u){var c=r[u],f=i[u],h=f.length,d=yl(e.call(c,c&&c.__data__,u,r)),g=d.length,w=a[u]=new Array(g),v=l[u]=new Array(g),b=o[u]=new Array(h);n(c,f,w,v,b,d,t);for(var y=0,I=0,x,T;y<g;++y)if(x=w[y]){for(y>=I&&(I=y+1);!(T=v[I])&&++I<g;);x._next=T||null}}return l=new Ze(l,r),l._enter=a,l._exit=o,l}function yl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kl(){return new Ze(this._exit||this._groups.map(Di),this._parents)}function El(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Nl(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,l=Math.min(i,s),a=new Array(i),o=0;o<l;++o)for(var u=n[o],c=r[o],f=u.length,h=a[o]=new Array(f),d,g=0;g<f;++g)(d=u[g]||c[g])&&(h[g]=d);for(;o<i;++o)a[o]=n[o];return new Ze(a,this._parents)}function ql(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],l;--i>=0;)(l=r[i])&&(s&&l.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(l,s),s=l);return this}function Al(e){e||(e=xl);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var l=n[s],a=l.length,o=i[s]=new Array(a),u,c=0;c<a;++c)(u=l[c])&&(o[c]=u);o.sort(t)}return new Ze(i,this._parents).order()}function xl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Il(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Tl(){return Array.from(this)}function Ml(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var l=r[i];if(l)return l}return null}function Sl(){let e=0;for(const t of this)++e;return e}function Dl(){return!this.node()}function Vl(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,l=i.length,a;s<l;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Cl(e){return function(){this.removeAttribute(e)}}function Ol(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Rl(e,t){return function(){this.setAttribute(e,t)}}function Pl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function zl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Bl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Fl(e,t){var n=Nn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ol:Cl:typeof t=="function"?n.local?Bl:zl:n.local?Pl:Rl)(n,t))}function Vi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Hl(e){return function(){this.style.removeProperty(e)}}function Ll(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ul(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function jl(e,t,n){return arguments.length>1?this.each((t==null?Hl:typeof t=="function"?Ul:Ll)(e,t,n??"")):xt(this.node(),e)}function xt(e,t){return e.style.getPropertyValue(t)||Vi(e).getComputedStyle(e,null).getPropertyValue(t)}function Xl(e){return function(){delete this[e]}}function Yl(e,t){return function(){this[e]=t}}function Gl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ql(e,t){return arguments.length>1?this.each((t==null?Xl:typeof t=="function"?Gl:Yl)(e,t)):this.node()[e]}function Ci(e){return e.trim().split(/^|\s+/)}function Xn(e){return e.classList||new Oi(e)}function Oi(e){this._node=e,this._names=Ci(e.getAttribute("class")||"")}Oi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ri(e,t){for(var n=Xn(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Pi(e,t){for(var n=Xn(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Wl(e){return function(){Ri(this,e)}}function Jl(e){return function(){Pi(this,e)}}function Kl(e,t){return function(){(t.apply(this,arguments)?Ri:Pi)(this,e)}}function Zl(e,t){var n=Ci(e+"");if(arguments.length<2){for(var r=Xn(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Kl:t?Wl:Jl)(n,t))}function $l(){this.textContent=""}function ea(e){return function(){this.textContent=e}}function ta(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function na(e){return arguments.length?this.each(e==null?$l:(typeof e=="function"?ta:ea)(e)):this.node().textContent}function ra(){this.innerHTML=""}function ia(e){return function(){this.innerHTML=e}}function sa(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function la(e){return arguments.length?this.each(e==null?ra:(typeof e=="function"?sa:ia)(e)):this.node().innerHTML}function aa(){this.nextSibling&&this.parentNode.appendChild(this)}function oa(){return this.each(aa)}function ua(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ca(){return this.each(ua)}function fa(e){var t=typeof e=="function"?e:Ii(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ha(){return null}function _a(e,t){var n=typeof e=="function"?e:Ii(e),r=t==null?ha:typeof t=="function"?t:jn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function da(){var e=this.parentNode;e&&e.removeChild(this)}function ma(){return this.each(da)}function pa(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ga(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function va(e){return this.select(e?ga:pa)}function ba(e){return arguments.length?this.property("__data__",e):this.node().__data__}function wa(e){return function(t){e.call(this,t,this.__data__)}}function ya(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ka(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Ea(e,t,n){return function(){var r=this.__on,i,s=wa(t);if(r){for(var l=0,a=r.length;l<a;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Na(e,t,n){var r=ya(e+""),i,s=r.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var o=0,u=a.length,c;o<u;++o)for(i=0,c=a[o];i<s;++i)if((l=r[i]).type===c.type&&l.name===c.name)return c.value}return}for(a=t?Ea:ka,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function zi(e,t,n){var r=Vi(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function qa(e,t){return function(){return zi(this,e,t)}}function Aa(e,t){return function(){return zi(this,e,t.apply(this,arguments))}}function xa(e,t){return this.each((typeof t=="function"?Aa:qa)(e,t))}function*Ia(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,l;i<s;++i)(l=r[i])&&(yield l)}var Bi=[null];function Ze(e,t){this._groups=e,this._parents=t}function $t(){return new Ze([[document.documentElement]],Bi)}function Ta(){return this}Ze.prototype=$t.prototype={constructor:Ze,select:tl,selectAll:sl,selectChild:ul,selectChildren:_l,filter:dl,data:wl,enter:ml,exit:kl,join:El,merge:Nl,selection:Ta,order:ql,sort:Al,call:Il,nodes:Tl,node:Ml,size:Sl,empty:Dl,each:Vl,attr:Fl,style:jl,property:Ql,classed:Zl,text:na,html:la,raise:oa,lower:ca,append:fa,insert:_a,remove:ma,clone:va,datum:ba,on:Na,dispatch:xa,[Symbol.iterator]:Ia};function Vr(e){return typeof e=="string"?new Ze([[document.querySelector(e)]],[document.documentElement]):new Ze([[e]],Bi)}function Yn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fi(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function en(){}var Jt=.7,pn=1/Jt,Nt="\\s*([+-]?\\d+)\\s*",Kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",st="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ma=/^#([0-9a-f]{3,8})$/,Sa=new RegExp(`^rgb\\(${Nt},${Nt},${Nt}\\)$`),Da=new RegExp(`^rgb\\(${st},${st},${st}\\)$`),Va=new RegExp(`^rgba\\(${Nt},${Nt},${Nt},${Kt}\\)$`),Ca=new RegExp(`^rgba\\(${st},${st},${st},${Kt}\\)$`),Oa=new RegExp(`^hsl\\(${Kt},${st},${st}\\)$`),Ra=new RegExp(`^hsla\\(${Kt},${st},${st},${Kt}\\)$`),Cr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yn(en,pt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Or,formatHex:Or,formatHex8:Pa,formatHsl:za,formatRgb:Rr,toString:Rr});function Or(){return this.rgb().formatHex()}function Pa(){return this.rgb().formatHex8()}function za(){return Hi(this).formatHsl()}function Rr(){return this.rgb().formatRgb()}function pt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ma.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Pr(t):n===3?new je(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?sn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?sn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Sa.exec(e))?new je(t[1],t[2],t[3],1):(t=Da.exec(e))?new je(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Va.exec(e))?sn(t[1],t[2],t[3],t[4]):(t=Ca.exec(e))?sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Oa.exec(e))?Fr(t[1],t[2]/100,t[3]/100,1):(t=Ra.exec(e))?Fr(t[1],t[2]/100,t[3]/100,t[4]):Cr.hasOwnProperty(e)?Pr(Cr[e]):e==="transparent"?new je(NaN,NaN,NaN,0):null}function Pr(e){return new je(e>>16&255,e>>8&255,e&255,1)}function sn(e,t,n,r){return r<=0&&(e=t=n=NaN),new je(e,t,n,r)}function Ba(e){return e instanceof en||(e=pt(e)),e?(e=e.rgb(),new je(e.r,e.g,e.b,e.opacity)):new je}function On(e,t,n,r){return arguments.length===1?Ba(e):new je(e,t,n,r??1)}function je(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Yn(je,On,Fi(en,{brighter(e){return e=e==null?pn:Math.pow(pn,e),new je(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jt:Math.pow(Jt,e),new je(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new je(mt(this.r),mt(this.g),mt(this.b),gn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zr,formatHex:zr,formatHex8:Fa,formatRgb:Br,toString:Br}));function zr(){return`#${_t(this.r)}${_t(this.g)}${_t(this.b)}`}function Fa(){return`#${_t(this.r)}${_t(this.g)}${_t(this.b)}${_t((isNaN(this.opacity)?1:this.opacity)*255)}`}function Br(){const e=gn(this.opacity);return`${e===1?"rgb(":"rgba("}${mt(this.r)}, ${mt(this.g)}, ${mt(this.b)}${e===1?")":`, ${e})`}`}function gn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function mt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _t(e){return e=mt(e),(e<16?"0":"")+e.toString(16)}function Fr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tt(e,t,n,r)}function Hi(e){if(e instanceof tt)return new tt(e.h,e.s,e.l,e.opacity);if(e instanceof en||(e=pt(e)),!e)return new tt;if(e instanceof tt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,a=s-i,o=(s+i)/2;return a?(t===s?l=(n-r)/a+(n<r)*6:n===s?l=(r-t)/a+2:l=(t-n)/a+4,a/=o<.5?s+i:2-s-i,l*=60):a=o>0&&o<1?0:l,new tt(l,a,o,e.opacity)}function Ha(e,t,n,r){return arguments.length===1?Hi(e):new tt(e,t,n,r??1)}function tt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Yn(tt,Ha,Fi(en,{brighter(e){return e=e==null?pn:Math.pow(pn,e),new tt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jt:Math.pow(Jt,e),new tt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new je(Mn(e>=240?e-240:e+120,i,r),Mn(e,i,r),Mn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new tt(Hr(this.h),ln(this.s),ln(this.l),gn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gn(this.opacity);return`${e===1?"hsl(":"hsla("}${Hr(this.h)}, ${ln(this.s)*100}%, ${ln(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Hr(e){return e=(e||0)%360,e<0?e+360:e}function ln(e){return Math.max(0,Math.min(1,e||0))}function Mn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Gn=e=>()=>e;function La(e,t){return function(n){return e+n*t}}function Ua(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ja(e){return(e=+e)==1?Li:function(t,n){return n-t?Ua(t,n,e):Gn(isNaN(t)?n:t)}}function Li(e,t){var n=t-e;return n?La(e,n):Gn(isNaN(e)?t:e)}const vn=function e(t){var n=ja(t);function r(i,s){var l=n((i=On(i)).r,(s=On(s)).r),a=n(i.g,s.g),o=n(i.b,s.b),u=Li(i.opacity,s.opacity);return function(c){return i.r=l(c),i.g=a(c),i.b=o(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function Xa(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Ya(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ga(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=Qn(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(a){for(l=0;l<r;++l)s[l]=i[l](a);return s}}function Qa(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function et(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Wa(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Qn(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Rn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sn=new RegExp(Rn.source,"g");function Ja(e){return function(){return e}}function Ka(e){return function(t){return e(t)+""}}function Ui(e,t){var n=Rn.lastIndex=Sn.lastIndex=0,r,i,s,l=-1,a=[],o=[];for(e=e+"",t=t+"";(r=Rn.exec(e))&&(i=Sn.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[l]?a[l]+=s:a[++l]=s),(r=r[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,o.push({i:l,x:et(r,i)})),n=Sn.lastIndex;return n<t.length&&(s=t.slice(n),a[l]?a[l]+=s:a[++l]=s),a.length<2?o[0]?Ka(o[0].x):Ja(t):(t=o.length,function(u){for(var c=0,f;c<t;++c)a[(f=o[c]).i]=f.x(u);return a.join("")})}function Qn(e,t){var n=typeof t,r;return t==null||n==="boolean"?Gn(t):(n==="number"?et:n==="string"?(r=pt(t))?(t=r,vn):Ui:t instanceof pt?vn:t instanceof Date?Qa:Ya(t)?Xa:Array.isArray(t)?Ga:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Wa:et)(e,t)}function Za(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Lr=180/Math.PI,Pn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ji(e,t,n,r,i,s){var l,a,o;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(o=e*n+t*r)&&(n-=e*o,r-=t*o),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,o/=a),e*r<t*n&&(e=-e,t=-t,o=-o,l=-l),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Lr,skewX:Math.atan(o)*Lr,scaleX:l,scaleY:a}}var an;function $a(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Pn:ji(t.a,t.b,t.c,t.d,t.e,t.f)}function eo(e){return e==null||(an||(an=document.createElementNS("http://www.w3.org/2000/svg","g")),an.setAttribute("transform",e),!(e=an.transform.baseVal.consolidate()))?Pn:(e=e.matrix,ji(e.a,e.b,e.c,e.d,e.e,e.f))}function Xi(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,f,h,d,g){if(u!==f||c!==h){var w=d.push("translate(",null,t,null,n);g.push({i:w-4,x:et(u,f)},{i:w-2,x:et(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function l(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:et(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,h){u!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:et(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function o(u,c,f,h,d,g){if(u!==f||c!==h){var w=d.push(i(d)+"scale(",null,",",null,")");g.push({i:w-4,x:et(u,f)},{i:w-2,x:et(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,f,h),l(u.rotate,c.rotate,f,h),a(u.skewX,c.skewX,f,h),o(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(d){for(var g=-1,w=h.length,v;++g<w;)f[(v=h[g]).i]=v.x(d);return f.join("")}}}var to=Xi($a,"px, ","px)","deg)"),no=Xi(eo,", ",")",")"),It=0,Yt=0,jt=0,Yi=1e3,bn,Gt,wn=0,gt=0,qn=0,Zt=typeof performance=="object"&&performance.now?performance:Date,Gi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Wn(){return gt||(Gi(ro),gt=Zt.now()+qn)}function ro(){gt=0}function yn(){this._call=this._time=this._next=null}yn.prototype=Qi.prototype={constructor:yn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Wn():+n)+(t==null?0:+t),!this._next&&Gt!==this&&(Gt?Gt._next=this:bn=this,Gt=this),this._call=e,this._time=n,zn()},stop:function(){this._call&&(this._call=null,this._time=1/0,zn())}};function Qi(e,t,n){var r=new yn;return r.restart(e,t,n),r}function io(){Wn(),++It;for(var e=bn,t;e;)(t=gt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--It}function Ur(){gt=(wn=Zt.now())+qn,It=Yt=0;try{io()}finally{It=0,lo(),gt=0}}function so(){var e=Zt.now(),t=e-wn;t>Yi&&(qn-=t,wn=e)}function lo(){for(var e,t=bn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:bn=n);Gt=e,zn(r)}function zn(e){if(!It){Yt&&(Yt=clearTimeout(Yt));var t=e-gt;t>24?(e<1/0&&(Yt=setTimeout(Ur,e-Zt.now()-qn)),jt&&(jt=clearInterval(jt))):(jt||(wn=Zt.now(),jt=setInterval(so,Yi)),It=1,Gi(Ur))}}function jr(e,t,n){var r=new yn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var ao=xi("start","end","cancel","interrupt"),oo=[],Wi=0,Xr=1,Bn=2,hn=3,Yr=4,Fn=5,_n=6;function An(e,t,n,r,i,s){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;uo(e,n,{name:t,index:r,group:i,on:ao,tween:oo,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Wi})}function Jn(e,t){var n=rt(e,t);if(n.state>Wi)throw new Error("too late; already scheduled");return n}function lt(e,t){var n=rt(e,t);if(n.state>hn)throw new Error("too late; already running");return n}function rt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function uo(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Qi(s,0,n.time);function s(u){n.state=Xr,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var c,f,h,d;if(n.state!==Xr)return o();for(c in r)if(d=r[c],d.name===n.name){if(d.state===hn)return jr(l);d.state===Yr?(d.state=_n,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=_n,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(jr(function(){n.state===hn&&(n.state=Yr,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Bn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Bn){for(n.state=hn,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(o),n.state=Fn,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===Fn&&(n.on.call("end",e,e.__data__,n.index,n.group),o())}function o(){n.state=_n,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function co(e,t){var n=e.__transition,r,i,s=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){s=!1;continue}i=r.state>Bn&&r.state<Fn,r.state=_n,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}s&&delete e.__transition}}function fo(e){return this.each(function(){co(this,e)})}function ho(e,t){var n,r;return function(){var i=lt(this,e),s=i.tween;if(s!==n){r=n=s;for(var l=0,a=r.length;l<a;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function _o(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=lt(this,e),l=s.tween;if(l!==r){i=(r=l).slice();for(var a={name:t,value:n},o=0,u=i.length;o<u;++o)if(i[o].name===t){i[o]=a;break}o===u&&i.push(a)}s.tween=i}}function mo(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=rt(this.node(),n).tween,i=0,s=r.length,l;i<s;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?ho:_o)(n,e,t))}function Kn(e,t,n){var r=e._id;return e.each(function(){var i=lt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return rt(i,r).value[t]}}function Ji(e,t){var n;return(typeof t=="number"?et:t instanceof pt?vn:(n=pt(t))?(t=n,vn):Ui)(e,t)}function po(e){return function(){this.removeAttribute(e)}}function go(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vo(e,t,n){var r,i=n+"",s;return function(){var l=this.getAttribute(e);return l===i?null:l===r?s:s=t(r=l,n)}}function bo(e,t,n){var r,i=n+"",s;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?s:s=t(r=l,n)}}function wo(e,t,n){var r,i,s;return function(){var l,a=n(this),o;return a==null?void this.removeAttribute(e):(l=this.getAttribute(e),o=a+"",l===o?null:l===r&&o===i?s:(i=o,s=t(r=l,a)))}}function yo(e,t,n){var r,i,s;return function(){var l,a=n(this),o;return a==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),o=a+"",l===o?null:l===r&&o===i?s:(i=o,s=t(r=l,a)))}}function ko(e,t){var n=Nn(e),r=n==="transform"?no:Ji;return this.attrTween(e,typeof t=="function"?(n.local?yo:wo)(n,r,Kn(this,"attr."+e,t)):t==null?(n.local?go:po)(n):(n.local?bo:vo)(n,r,t))}function Eo(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function No(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function qo(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&No(e,s)),n}return i._value=t,i}function Ao(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Eo(e,s)),n}return i._value=t,i}function xo(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Nn(e);return this.tween(n,(r.local?qo:Ao)(r,t))}function Io(e,t){return function(){Jn(this,e).delay=+t.apply(this,arguments)}}function To(e,t){return t=+t,function(){Jn(this,e).delay=t}}function Mo(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Io:To)(t,e)):rt(this.node(),t).delay}function So(e,t){return function(){lt(this,e).duration=+t.apply(this,arguments)}}function Do(e,t){return t=+t,function(){lt(this,e).duration=t}}function Vo(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?So:Do)(t,e)):rt(this.node(),t).duration}function Co(e,t){if(typeof t!="function")throw new Error;return function(){lt(this,e).ease=t}}function Oo(e){var t=this._id;return arguments.length?this.each(Co(t,e)):rt(this.node(),t).ease}function Ro(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;lt(this,e).ease=n}}function Po(e){if(typeof e!="function")throw new Error;return this.each(Ro(this._id,e))}function zo(e){typeof e!="function"&&(e=Mi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],l=s.length,a=r[i]=[],o,u=0;u<l;++u)(o=s[u])&&e.call(o,o.__data__,u,s)&&a.push(o);return new ut(r,this._parents,this._name,this._id)}function Bo(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),l=new Array(r),a=0;a<s;++a)for(var o=t[a],u=n[a],c=o.length,f=l[a]=new Array(c),h,d=0;d<c;++d)(h=o[d]||u[d])&&(f[d]=h);for(;a<r;++a)l[a]=t[a];return new ut(l,this._parents,this._name,this._id)}function Fo(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ho(e,t,n){var r,i,s=Fo(t)?Jn:lt;return function(){var l=s(this,e),a=l.on;a!==r&&(i=(r=a).copy()).on(t,n),l.on=i}}function Lo(e,t){var n=this._id;return arguments.length<2?rt(this.node(),n).on.on(e):this.each(Ho(n,e,t))}function Uo(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function jo(){return this.on("end.remove",Uo(this._id))}function Xo(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jn(e));for(var r=this._groups,i=r.length,s=new Array(i),l=0;l<i;++l)for(var a=r[l],o=a.length,u=s[l]=new Array(o),c,f,h=0;h<o;++h)(c=a[h])&&(f=e.call(c,c.__data__,h,a))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,An(u[h],t,n,h,u,rt(c,n)));return new ut(s,this._parents,t,n)}function Yo(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ti(e));for(var r=this._groups,i=r.length,s=[],l=[],a=0;a<i;++a)for(var o=r[a],u=o.length,c,f=0;f<u;++f)if(c=o[f]){for(var h=e.call(c,c.__data__,f,o),d,g=rt(c,n),w=0,v=h.length;w<v;++w)(d=h[w])&&An(d,t,n,w,h,g);s.push(h),l.push(c)}return new ut(s,l,t,n)}var Go=$t.prototype.constructor;function Qo(){return new Go(this._groups,this._parents)}function Wo(e,t){var n,r,i;return function(){var s=xt(this,e),l=(this.style.removeProperty(e),xt(this,e));return s===l?null:s===n&&l===r?i:i=t(n=s,r=l)}}function Ki(e){return function(){this.style.removeProperty(e)}}function Jo(e,t,n){var r,i=n+"",s;return function(){var l=xt(this,e);return l===i?null:l===r?s:s=t(r=l,n)}}function Ko(e,t,n){var r,i,s;return function(){var l=xt(this,e),a=n(this),o=a+"";return a==null&&(o=a=(this.style.removeProperty(e),xt(this,e))),l===o?null:l===r&&o===i?s:(i=o,s=t(r=l,a))}}function Zo(e,t){var n,r,i,s="style."+t,l="end."+s,a;return function(){var o=lt(this,e),u=o.on,c=o.value[s]==null?a||(a=Ki(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(l,i=c),o.on=r}}function $o(e,t,n){var r=(e+="")=="transform"?to:Ji;return t==null?this.styleTween(e,Wo(e,r)).on("end.style."+e,Ki(e)):typeof t=="function"?this.styleTween(e,Ko(e,r,Kn(this,"style."+e,t))).each(Zo(this._id,e)):this.styleTween(e,Jo(e,r,t),n).on("end.style."+e,null)}function eu(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function tu(e,t,n){var r,i;function s(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&eu(e,l,n)),r}return s._value=t,s}function nu(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,tu(e,t,n??""))}function ru(e){return function(){this.textContent=e}}function iu(e){return function(){var t=e(this);this.textContent=t??""}}function su(e){return this.tween("text",typeof e=="function"?iu(Kn(this,"text",e)):ru(e==null?"":e+""))}function lu(e){return function(t){this.textContent=e.call(this,t)}}function au(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&lu(i)),t}return r._value=e,r}function ou(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,au(e))}function uu(){for(var e=this._name,t=this._id,n=Zi(),r=this._groups,i=r.length,s=0;s<i;++s)for(var l=r[s],a=l.length,o,u=0;u<a;++u)if(o=l[u]){var c=rt(o,t);An(o,e,n,u,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ut(r,this._parents,e,n)}function cu(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,l){var a={value:l},o={value:function(){--i===0&&s()}};n.each(function(){var u=lt(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(o)),u.on=t}),i===0&&s()})}var fu=0;function ut(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Zi(){return++fu}var ot=$t.prototype;ut.prototype={constructor:ut,select:Xo,selectAll:Yo,selectChild:ot.selectChild,selectChildren:ot.selectChildren,filter:zo,merge:Bo,selection:Qo,transition:uu,call:ot.call,nodes:ot.nodes,node:ot.node,size:ot.size,empty:ot.empty,each:ot.each,on:Lo,attr:ko,attrTween:xo,style:$o,styleTween:nu,text:su,textTween:ou,remove:jo,tween:mo,delay:Mo,duration:Vo,ease:Oo,easeVarying:Po,end:cu,[Symbol.iterator]:ot[Symbol.iterator]};function hu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _u={time:null,delay:0,duration:250,ease:hu};function du(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function mu(e){var t,n;e instanceof ut?(t=e._id,e=e._name):(t=Zi(),(n=_u).time=Wn(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var l=r[s],a=l.length,o,u=0;u<a;++u)(o=l[u])&&An(o,e,t,u,l,n||du(o,t));return new ut(r,this._parents,e,t)}$t.prototype.interrupt=fo;$t.prototype.transition=mu;function pu(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function kn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Tt(e){return e=kn(Math.abs(e)),e?e[1]:NaN}function gu(e,t){return function(n,r){for(var i=n.length,s=[],l=0,a=e[0],o=0;i>0&&a>0&&(o+a+1>r&&(a=Math.max(1,r-o)),s.push(n.substring(i-=a,i+a)),!((o+=a+1)>r));)a=e[l=(l+1)%e.length];return s.reverse().join(t)}}function vu(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var bu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function En(e){if(!(t=bu.exec(e)))throw new Error("invalid format: "+e);var t;return new Zn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}En.prototype=Zn.prototype;function Zn(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Zn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wu(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var $i;function yu(e,t){var n=kn(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-($i=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+kn(e,Math.max(0,t+s-1))[0]}function Gr(e,t){var n=kn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Qr={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:pu,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Gr(e*100,t),r:Gr,s:yu,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Wr(e){return e}var Jr=Array.prototype.map,Kr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ku(e){var t=e.grouping===void 0||e.thousands===void 0?Wr:gu(Jr.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Wr:vu(Jr.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",o=e.nan===void 0?"NaN":e.nan+"";function u(f){f=En(f);var h=f.fill,d=f.align,g=f.sign,w=f.symbol,v=f.zero,b=f.width,y=f.comma,I=f.precision,x=f.trim,T=f.type;T==="n"?(y=!0,T="g"):Qr[T]||(I===void 0&&(I=12),x=!0,T="g"),(v||h==="0"&&d==="=")&&(v=!0,h="0",d="=");var S=w==="$"?n:w==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",V=w==="$"?r:/[%p]/.test(T)?l:"",X=Qr[T],D=/[defgprs%]/.test(T);I=I===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function R(A){var N=S,M=V,j,O,Y;if(T==="c")M=X(A)+M,A="";else{A=+A;var W=A<0||1/A<0;if(A=isNaN(A)?o:X(Math.abs(A),I),x&&(A=wu(A)),W&&+A==0&&g!=="+"&&(W=!1),N=(W?g==="("?g:a:g==="-"||g==="("?"":g)+N,M=(T==="s"?Kr[8+$i/3]:"")+M+(W&&g==="("?")":""),D){for(j=-1,O=A.length;++j<O;)if(Y=A.charCodeAt(j),48>Y||Y>57){M=(Y===46?i+A.slice(j+1):A.slice(j))+M,A=A.slice(0,j);break}}}y&&!v&&(A=t(A,1/0));var Z=N.length+A.length+M.length,G=Z<b?new Array(b-Z+1).join(h):"";switch(y&&v&&(A=t(G+A,G.length?b-M.length:1/0),G=""),d){case"<":A=N+A+M+G;break;case"=":A=N+G+A+M;break;case"^":A=G.slice(0,Z=G.length>>1)+N+A+M+G.slice(Z);break;default:A=G+N+A+M;break}return s(A)}return R.toString=function(){return f+""},R}function c(f,h){var d=u((f=En(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Tt(h)/3)))*3,w=Math.pow(10,-g),v=Kr[8+g/3];return function(b){return d(w*b)+v}}return{format:u,formatPrefix:c}}var on,$n,es;Eu({thousands:",",grouping:[3],currency:["$",""]});function Eu(e){return on=ku(e),$n=on.format,es=on.formatPrefix,on}function Nu(e){return Math.max(0,-Tt(Math.abs(e)))}function qu(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Tt(t)/3)))*3-Tt(Math.abs(e)))}function Au(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Tt(t)-Tt(e))+1}function er(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Zr=Symbol("implicit");function ts(){var e=new Ir,t=[],n=[],r=Zr;function i(s){let l=e.get(s);if(l===void 0){if(r!==Zr)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Ir;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return ts(t,n).unknown(r)},er.apply(i,arguments),i}function ns(){var e=ts().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,a=!1,o=0,u=0,c=.5;delete e.unknown;function f(){var h=t().length,d=i<r,g=d?i:r,w=d?r:i;s=(w-g)/Math.max(1,h-o+u*2),a&&(s=Math.floor(s)),g+=(w-g-s*(h-o))*c,l=s*(1-o),a&&(g=Math.round(g),l=Math.round(l));var v=Bs(h).map(function(b){return g+s*b});return n(d?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(h){return arguments.length?(a=!!h,f()):a},e.padding=function(h){return arguments.length?(o=Math.min(1,u=+h),f()):o},e.paddingInner=function(h){return arguments.length?(o=Math.min(1,h),f()):o},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},e.copy=function(){return ns(t(),[r,i]).round(a).paddingInner(o).paddingOuter(u).align(c)},er.apply(f(),arguments)}function xu(e){return function(){return e}}function Iu(e){return+e}var $r=[0,1];function yt(e){return e}function Hn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:xu(isNaN(t)?NaN:.5)}function Tu(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Mu(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=Hn(i,r),s=n(l,s)):(r=Hn(r,i),s=n(s,l)),function(a){return s(r(a))}}function Su(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=Hn(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(a){var o=Ms(e,a,1,r)-1;return s[o](i[o](a))}}function Du(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Vu(){var e=$r,t=$r,n=Qn,r,i,s,l=yt,a,o,u;function c(){var h=Math.min(e.length,t.length);return l!==yt&&(l=Tu(e[0],e[h-1])),a=h>2?Su:Mu,o=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(o||(o=a(e.map(r),t,n)))(r(l(h)))}return f.invert=function(h){return l(i((u||(u=a(t,e.map(r),et)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Iu),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=Za,c()},f.clamp=function(h){return arguments.length?(l=h?!0:yt,c()):l!==yt},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return r=h,i=d,c()}}function Cu(){return Vu()(yt,yt)}function Ou(e,t,n,r){var i=zs(e,t,n),s;switch(r=En(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=qu(i,l))&&(r.precision=s),es(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Au(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Nu(i))&&(r.precision=s-(r.type==="%")*2);break}}return $n(r)}function Ru(e){var t=e.domain;return e.ticks=function(n){var r=t();return Ps(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Ou(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],a=r[s],o,u,c=10;for(a<l&&(u=l,l=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=Dn(l,a,n),u===o)return r[i]=l,r[s]=a,t(r);if(u>0)l=Math.floor(l/u)*u,a=Math.ceil(a/u)*u;else if(u<0)l=Math.ceil(l*u)/u,a=Math.floor(a*u)/u;else break;o=u}return e},e}function rs(){var e=Cu();return e.copy=function(){return Du(e,rs())},er.apply(e,arguments),Ru(e)}function Qt(e,t,n){this.k=e,this.x=t,this.y=n}Qt.prototype={constructor:Qt,scale:function(e){return e===1?this:new Qt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Qt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Qt.prototype;const nt={vis_area_width:1025,control_panel_width:350,progress_bar_height:140};function Pu(e){let t;return{c(){t=F("Not filtered")},l(n){t=H(n,"Not filtered")},m(n,r){U(n,t,r)},p:J,d(n){n&&p(t)}}}function zu(e){var u;let t,n=((u=e[0][e[1]])==null?void 0:u.join(", "))+"",r,i,s,l,a,o;return{c(){t=F("Filtered by: "),r=F(n),i=P(),s=k("span"),l=F("Clear filters"),this.h()},l(c){t=H(c,"Filtered by: "),r=H(c,n),i=z(c),s=E(c,"SPAN",{class:!0});var f=q(s);l=H(f,"Clear filters"),f.forEach(p),this.h()},h(){m(s,"class","ms-2 inline-text-action svelte-8bydak")},m(c,f){U(c,t,f),U(c,r,f),U(c,i,f),U(c,s,f),_(s,l),a||(o=ee(s,"click",e[3]),a=!0)},p(c,f){var h;f&3&&n!==(n=((h=c[0][c[1]])==null?void 0:h.join(", "))+"")&&Ve(r,n)},d(c){c&&p(t),c&&p(r),c&&p(i),c&&p(s),a=!1,o()}}}function Bu(e){let t;function n(s,l){var a;return((a=s[0][s[1]])==null?void 0:a.length)>0?zu:Pu}let r=n(e),i=r(e);return{c(){i.c(),t=ye()},l(s){i.l(s),t=ye()},m(s,l){i.m(s,l),U(s,t,l)},p(s,[l]){r===(r=n(s))&&i?i.p(s,l):(i.d(1),i=r(s),i&&(i.c(),i.m(t.parentNode,t)))},i:J,o:J,d(s){i.d(s),s&&p(t)}}}function Fu(e,t,n){let{cross_selections:r={},by_field:i="",clear_selection:s=()=>{}}=t;const l=()=>{s(i)};return e.$$set=a=>{"cross_selections"in a&&n(0,r=a.cross_selections),"by_field"in a&&n(1,i=a.by_field),"clear_selection"in a&&n(2,s=a.clear_selection)},[r,i,s,l]}class ei extends Xe{constructor(t){super(),Ye(this,t,Fu,Bu,Ge,{cross_selections:0,by_field:1,clear_selection:2})}}function ti(e){let t,n,r,i,s=e[5][0].key+"",l,a,o=e[5][0].value+"",u,c,f,h,d,g,w,v,b,y,I,x,T,S,V,X,D,R,A,N=e[5][1].value+"",M,j,O,Y=e[5][2].value+"",W,Z,G,qe,ne,ie,pe=e[5][3].value+"",ge,ke,Ae,Ie=e[5][4].value+"",Te,Qe;return{c(){t=k("div"),n=k("div"),r=k("div"),i=k("strong"),l=F(s),a=F(`:
        `),u=F(o),c=P(),f=k("table"),h=k("thead"),d=k("tr"),g=k("td"),w=P(),v=k("th"),b=F("Noisy Count"),y=P(),I=k("th"),x=F("Error Estimate"),T=P(),S=k("tbody"),V=k("tr"),X=k("th"),D=F("Current"),R=P(),A=k("td"),M=F(N),j=P(),O=k("td"),W=P(),Z=k("tr"),G=k("th"),qe=F("Prev"),ne=P(),ie=k("td"),ge=F(pe),ke=P(),Ae=k("td"),this.h()},l(de){t=E(de,"DIV",{id:!0,class:!0,style:!0});var le=q(t);n=E(le,"DIV",{});var Ce=q(n);r=E(Ce,"DIV",{});var Se=q(r);i=E(Se,"STRONG",{});var oe=q(i);l=H(oe,s),oe.forEach(p),a=H(Se,`:
        `),u=H(Se,o),Se.forEach(p),c=z(Ce),f=E(Ce,"TABLE",{class:!0});var te=q(f);h=E(te,"THEAD",{});var L=q(h);d=E(L,"TR",{});var K=q(d);g=E(K,"TD",{}),q(g).forEach(p),w=z(K),v=E(K,"TH",{});var _e=q(v);b=H(_e,"Noisy Count"),_e.forEach(p),y=z(K),I=E(K,"TH",{});var $=q(I);x=H($,"Error Estimate"),$.forEach(p),K.forEach(p),L.forEach(p),T=z(te),S=E(te,"TBODY",{});var fe=q(S);V=E(fe,"TR",{});var ve=q(V);X=E(ve,"TH",{});var me=q(X);D=H(me,"Current"),me.forEach(p),R=z(ve),A=E(ve,"TD",{});var ue=q(A);M=H(ue,N),ue.forEach(p),j=z(ve),O=E(ve,"TD",{});var De=q(O);De.forEach(p),ve.forEach(p),W=z(fe),Z=E(fe,"TR",{});var B=q(Z);G=E(B,"TH",{});var ce=q(G);qe=H(ce,"Prev"),ce.forEach(p),ne=z(B),ie=E(B,"TD",{});var Ee=q(ie);ge=H(Ee,pe),Ee.forEach(p),ke=z(B),Ae=E(B,"TD",{});var xe=q(Ae);xe.forEach(p),B.forEach(p),fe.forEach(p),te.forEach(p),Ce.forEach(p),le.forEach(p),this.h()},h(){m(f,"class","table"),m(t,"id",Te=e[0]+"-tooltip"),m(t,"class","vis-tooltip bg-white border rounded-3 p-2 svelte-4hkoxq"),m(t,"style",Qe=`left: ${e[7]||50}px; top: ${(e[8]||50)+75}px;`)},m(de,le){U(de,t,le),_(t,n),_(n,r),_(r,i),_(i,l),_(r,a),_(r,u),_(n,c),_(n,f),_(f,h),_(h,d),_(d,g),_(d,w),_(d,v),_(v,b),_(d,y),_(d,I),_(I,x),_(f,T),_(f,S),_(S,V),_(V,X),_(X,D),_(V,R),_(V,A),_(A,M),_(V,j),_(V,O),O.innerHTML=Y,_(S,W),_(S,Z),_(Z,G),_(G,qe),_(Z,ne),_(Z,ie),_(ie,ge),_(Z,ke),_(Z,Ae),Ae.innerHTML=Ie},p(de,le){le[0]&32&&s!==(s=de[5][0].key+"")&&Ve(l,s),le[0]&32&&o!==(o=de[5][0].value+"")&&Ve(u,o),le[0]&32&&N!==(N=de[5][1].value+"")&&Ve(M,N),le[0]&32&&Y!==(Y=de[5][2].value+"")&&(O.innerHTML=Y),le[0]&32&&pe!==(pe=de[5][3].value+"")&&Ve(ge,pe),le[0]&32&&Ie!==(Ie=de[5][4].value+"")&&(Ae.innerHTML=Ie),le[0]&1&&Te!==(Te=de[0]+"-tooltip")&&m(t,"id",Te),le[0]&384&&Qe!==(Qe=`left: ${de[7]||50}px; top: ${(de[8]||50)+75}px;`)&&m(t,"style",Qe)},d(de){de&&p(t)}}}function Hu(e){var V,X;let t,n,r,i,s,l,a,o,u,c,f,h,d,g,w,v,b,y,I,x,T;i=new ei({props:{cross_selections:e[9],by_field:(V=e[1])==null?void 0:V.right_x,clear_selection:e[13]}}),o=new ei({props:{cross_selections:e[9],by_field:(X=e[1])==null?void 0:X.left_x,clear_selection:e[13]}});let S=e[6]&&ti(e);return{c(){t=k("div"),n=k("div"),r=k("div"),Pe(i.$$.fragment),l=P(),a=k("div"),Pe(o.$$.fragment),c=P(),f=k("div"),h=k("div"),w=P(),v=k("div"),I=P(),S&&S.c(),x=ye(),this.h()},l(D){t=E(D,"DIV",{style:!0});var R=q(t);n=E(R,"DIV",{class:!0});var A=q(n);r=E(A,"DIV",{class:!0,style:!0});var N=q(r);ze(i.$$.fragment,N),N.forEach(p),l=z(A),a=E(A,"DIV",{class:!0,style:!0});var M=q(a);ze(o.$$.fragment,M),M.forEach(p),A.forEach(p),c=z(R),f=E(R,"DIV",{id:!0,class:!0});var j=q(f);h=E(j,"DIV",{id:!0,style:!0}),q(h).forEach(p),w=z(j),v=E(j,"DIV",{id:!0,style:!0}),q(v).forEach(p),j.forEach(p),R.forEach(p),I=z(D),S&&S.l(D),x=ye(),this.h()},h(){var D,R,A,N;m(r,"class","filter-message svelte-4hkoxq"),m(r,"style",s=`width: ${((D=e[1])==null?void 0:D.width)||e[10]}px;`),m(a,"class","filter-message svelte-4hkoxq"),m(a,"style",u=`width: ${((R=e[1])==null?void 0:R.width)||e[10]}px;`),m(n,"class","d-flex justify-content-between divided"),m(h,"id",d=e[0]+"-left"),m(h,"style",g=`width: ${((A=e[1])==null?void 0:A.width)||e[10]}px;`),m(v,"id",b=e[0]+"-right"),m(v,"style",y=`width: ${((N=e[1])==null?void 0:N.width)||e[10]}px;`),m(f,"id",e[0]),m(f,"class","d-flex justify-content-between divided"),m(t,"style",`width: ${nt.vis_area_width}px;`)},m(D,R){U(D,t,R),_(t,n),_(n,r),Be(i,r,null),_(n,l),_(n,a),Be(o,a,null),_(t,c),_(t,f),_(f,h),_(f,w),_(f,v),U(D,I,R),S&&S.m(D,R),U(D,x,R),T=!0},p(D,R){var M,j,O,Y,W,Z;const A={};R[0]&512&&(A.cross_selections=D[9]),R[0]&2&&(A.by_field=(M=D[1])==null?void 0:M.right_x),i.$set(A),(!T||R[0]&2&&s!==(s=`width: ${((j=D[1])==null?void 0:j.width)||D[10]}px;`))&&m(r,"style",s);const N={};R[0]&512&&(N.cross_selections=D[9]),R[0]&2&&(N.by_field=(O=D[1])==null?void 0:O.left_x),o.$set(N),(!T||R[0]&2&&u!==(u=`width: ${((Y=D[1])==null?void 0:Y.width)||D[10]}px;`))&&m(a,"style",u),(!T||R[0]&1&&d!==(d=D[0]+"-left"))&&m(h,"id",d),(!T||R[0]&2&&g!==(g=`width: ${((W=D[1])==null?void 0:W.width)||D[10]}px;`))&&m(h,"style",g),(!T||R[0]&1&&b!==(b=D[0]+"-right"))&&m(v,"id",b),(!T||R[0]&2&&y!==(y=`width: ${((Z=D[1])==null?void 0:Z.width)||D[10]}px;`))&&m(v,"style",y),(!T||R[0]&1)&&m(f,"id",D[0]),D[6]?S?S.p(D,R):(S=ti(D),S.c(),S.m(x.parentNode,x)):S&&(S.d(1),S=null)},i(D){T||(se(i.$$.fragment,D),se(o.$$.fragment,D),T=!0)},o(D){he(i.$$.fragment,D),he(o.$$.fragment,D),T=!1},d(D){D&&p(t),Fe(i),Fe(o),D&&p(I),S&&S.d(D),D&&p(x)}}}function ni(e){return e[0]>0&&e[1]>0?e[0]=0:e[0]<0&&e[1]<0&&(e[1]=0),e}function Lu(e,t,n){let r,i,s=J,l=()=>(s(),s=Ke(I,L=>n(21,i=L)),I),a,o=J,u=()=>(o(),o=Ke(T,L=>n(22,a=L)),T),c,f,h=J,d=()=>(h(),h=Ke(S,L=>n(24,f=L)),S);e.$$.on_destroy.push(()=>s()),e.$$.on_destroy.push(()=>o()),e.$$.on_destroy.push(()=>h());let{view_id:g="vis",dataset:w=[],spec:v={},q_no:b,debug_mode:y,rescale_y_axis:I=dt(!1),remeasure_push:x,remeasurement_detail:T,move_prev_error:S}=t;l(),u(),d();let V=500,X=400,D="#4C7FFF",R="#925af2",A=.7,N=.8,M="black",j="gray",O=3,Y=[1,1],W=4.5,Z=12,G=40,qe=80,ne=25,ie=dt({});Wt(e,ie,L=>n(9,r=L));let pe=!0,ge=dt(!0);Wt(e,ge,L=>n(23,c=L));function ke(L,K){ie.update(_e=>(_e[L]||(_e[L]=[]),_e[L].includes(K)?_e[L]=_e[L].filter($=>$!==K):_e[L].push(K),_e))}function Ae(L){L?ie.update(K=>(K[L]=[],K)):ie.set({})}async function Ie(L,K,_e,$,fe,ve){let me=L.groupby([K,"nth_remeasure"]).rollup({[_e+"_agg"]:ft.sum(_e),[fe+"_agg"]:ft.sum(fe),[$+"_agg"]:ft.sum($),[ve+"_agg"]:ft.sum(ve)}),ue=xn(me.array(_e+"_agg")),De=In(me.array(fe+"_agg"));ue[0]-=De,ue[1]+=De,ue=ni(ue);let B=K==v.left_x?v.right_x:v.left_x,ce=r[B],Ee=L.transform(it=>it.filter(fr(Oe=>Oe.nth_remeasure==a[b])),it=>it.filter(fr(Oe=>ce&&(ce==null?void 0:ce.length)>0?ce.includes(Oe[B]):!0))).groupby(K).rollup({[_e+"_agg"]:ft.sum(_e),[$+"_agg"]:ft.sum($),[fe+"_agg"]:ft.sum(fe),[ve+"_agg"]:ft.sum(ve)}),xe=Ee.array(K),Ue=a[b]>0?xn(Ee.array($+"_agg")):xn(Ee.array(_e+"_agg")),at=a[b]>0?In(Ee.array(ve+"_agg")):In(Ee.array(fe+"_agg"));return Ue[0]-=at,Ue[1]+=at,Ue=ni(Ue),a[b]==0&&pe&&(Ue[0]=ue[0],Ue[1]=ue[1]),{aggregated:Ee,dimension_band:xe,measure_range:ue,measure_range_spot:Ue}}async function Te(L,K,_e,$,fe,ve,me,ue){let De=(v==null?void 0:v.height)||X,B=(v==null?void 0:v.width)||V,ce=(v==null?void 0:v.bar_color)||D,Ee=(v==null?void 0:v.bar_opacity)||A,xe=(v==null?void 0:v.bar_bandwidth)||N,Ue=(v==null?void 0:v.curr_error_color)||M,at=(v==null?void 0:v.curr_error_width)||O,it=(v==null?void 0:v.prev_error_color)||j,Oe=(v==null?void 0:v.prev_error_dash)||Y,Le=(v==null?void 0:v.error_point_radius)||W,$e=(v==null?void 0:v.axis_font_size)||Z,Me=Vr(L+" svg.chart");if(!Me.node()){let re=Vr(L);re.empty(),Me=re.append("svg").attr("class","chart"),Me.attr("width",B).attr("height",De).attr("viewBox",`0 0 ${B} ${De}`)}let We=await Ie(w,K,$,fe,me,ue),ae=ns().domain(We.dimension_band).range([0,B-G-ne*2]),Q=rs().domain(i?We.measure_range_spot:We.measure_range).nice().range([De-qe-ne*2,0]),tn=Gs(ae),Mt=Qs(Q),St=Ys(Q).tickSize(B-ne*2-G).tickFormat(""),Dt=Me.append("g").attr("transform",`translate(${G+ne}, ${De-qe-ne})`).call(tn);Dt.selectAll("text").style("text-anchor","start").attr("transform","rotate(45)").style("font-family","'Source Sans', 'Open Sans', sans-serif").style("font-size",$e),Me.append("g").attr("transform",`translate(${(G+ne+B)/2}, ${De-$e*1.1})`).append("text").text(_e).style("text-anchor","middle").style("font-size",$e*1.1).style("font-weight","bold");let bt=Me.append("g").attr("transform",`translate(${G+ne}, ${ne})`).call(Mt);bt.selectAll("text").style("font-family","'Source Sans', 'Open Sans', sans-serif").style("font-size",$e);let wt=Me.append("g").attr("class","y-grid").attr("transform",`translate(${G+ne}, ${ne})`).call(St).call(re=>re.selectAll(".domain").remove());wt.selectAll("line").style("opacity",.2),Me.append("g").attr("transform",`translate(${ne}, ${(De-qe)/2})`).append("text").text(ve).style("text-anchor","middle").attr("transform","rotate(-90)").style("font-size",$e*1.1).style("font-weight","bold");let Vt=Me.append("g").attr("class","bars").attr("transform",`translate(${G+ne}, ${ne})`),Ct=re=>{re.append("rect").attr("fill",C=>{var be;return(be=r[K])!=null&&be.includes(C[K])?R:ce}).attr("opacity",Ee).attr("x",C=>ae(C[K])+(1-xe)/2*ae.bandwidth()).attr("y",C=>C[$+"_agg"]<0?Q(0):Q(C[$+"_agg"])).attr("height",C=>Math.abs(Q(0)-Q(C[$+"_agg"]))).attr("width",ae.bandwidth()*xe)},Ot=re=>{re.attr("fill",C=>{var be;return(be=r[K])!=null&&be.includes(C[K])?R:ce}).attr("x",C=>ae(C[K])+(1-xe)/2*ae.bandwidth()).attr("y",C=>C[$+"_agg"]<0?Q(0):Q(C[$+"_agg"])).attr("height",C=>Math.abs(Q(0)-Q(C[$+"_agg"])))};Vt.selectAll("rect").data(We.aggregated).join(Ct,Ot);let Rt=Me.append("g").attr("class","prev_errors").attr("transform",`translate(${G+ne}, ${ne})`),Pt=re=>{re.append("line").attr("stroke",it).attr("stroke-width",at).attr("stroke-dasharray",Oe.join(" ")).style("opacity",()=>a[b]==0?0:1).attr("transform",`translate(${ae.bandwidth()*(f===!0||c?.5:.75)}, 0)`).attr("x1",C=>ae(C[K])).attr("x2",C=>ae(C[K])).attr("y1",C=>Q(f===!0||c?C[$+"_agg"]-C[ue+"_agg"]:C[fe+"_agg"]-C[ue+"_agg"])).attr("y2",C=>Q(f===!0||c?C[$+"_agg"]+C[ue+"_agg"]:C[fe+"_agg"]+C[ue+"_agg"]))},zt=re=>{re.style("opacity",()=>a[b]==0?0:1).attr("transform",`translate(${ae.bandwidth()*(f===!0||c?.5:.75)}, 0)`).attr("x1",C=>ae(C[K])).attr("x2",C=>ae(C[K])).attr("y1",C=>Q(f===!0||c?C[$+"_agg"]-C[ue+"_agg"]:C[fe+"_agg"]-C[ue+"_agg"])).attr("y2",C=>Q(f===!0||c?C[$+"_agg"]+C[ue+"_agg"]:C[fe+"_agg"]+C[ue+"_agg"]))};Rt.selectAll("line").data(We.aggregated).join(Pt,zt);let Je=Me.append("g").attr("class","prev_error_points").attr("transform",`translate(${G+ne}, ${ne})`),Bt=re=>{re.append("circle").attr("fill",()=>a[b]==0?"transparent":it).attr("transform",`translate(${ae.bandwidth()*(f===!0||c?.5:.75)}, 0)`).attr("cx",C=>ae(C[K])).attr("cy",C=>Q(f===!0||c?C[$+"_agg"]:C[fe+"_agg"])).attr("r",()=>f===!0||c?1:Le)},Ft=re=>{re.attr("fill",()=>a[b]==0?"transparent":it).attr("transform",`translate(${ae.bandwidth()*(f===!0||c?.5:.75)}, 0)`).attr("cx",C=>ae(C[K])).attr("cy",C=>Q(f===!0||c?C[$+"_agg"]:C[fe+"_agg"])).attr("r",()=>f===!0||c?1:Le)};Je.selectAll("circle").data(We.aggregated).join(Bt,Ft);let Ht=Me.append("g").attr("class","curr_errors").attr("transform",`translate(${G+ne}, ${ne})`),Lt=re=>{re.append("line").attr("stroke",Ue).attr("stroke-width",at).attr("transform",`translate(${ae.bandwidth()/2}, 0)`).attr("x1",C=>ae(C[K])).attr("x2",C=>ae(C[K])).attr("y1",C=>Q(C[$+"_agg"]-C[me+"_agg"])).attr("y2",C=>Q(C[$+"_agg"]+C[me+"_agg"]))},Ut=re=>{re.attr("x1",C=>ae(C[K])).attr("x2",C=>ae(C[K])).attr("y1",C=>Q(C[$+"_agg"]-C[me+"_agg"])).attr("y2",C=>Q(C[$+"_agg"]+C[me+"_agg"]))};Ht.selectAll("line").data(We.aggregated).join(Lt,Ut);let tr=Me.append("g").attr("class","curr_error_points").attr("transform",`translate(${G+ne}, ${ne})`),nr=re=>{re.append("circle").attr("fill",Ue).attr("transform",`translate(${ae.bandwidth()/2}, 0)`).attr("cx",C=>ae(C[K])).attr("cy",C=>Q(C[$+"_agg"])).attr("r",Le)},rr=re=>{re.attr("cx",C=>ae(C[K])).attr("cy",C=>Q(C[$+"_agg"]))};tr.selectAll("circle").data(We.aggregated).join(nr,rr);let ir=Me.append("g").attr("class","wraps").attr("transform",`translate(${G+ne}, ${ne})`),nn=15,ct=$n(",.2f"),sr=re=>{re.append("rect").attr("fill","transparent").attr("stroke",()=>y?"blue":"transparent").attr("stroke-width",()=>y?3:0).attr("x",C=>ae(C[K])).attr("y",C=>(C[$+"_agg"]<0?Q(0):Q(C[$+"_agg"]))-nn).attr("height",C=>Math.abs(Q(0)-Q(C[$+"_agg"]))+nn*2).attr("width",ae.bandwidth()).on("mouseover",(C,be)=>{let ar=a[b]==0;n(6,le=!0),n(7,Ce=C.clientX+5),n(8,Se=C.clientY+5),n(5,de=[{key:_e,value:be[K]},{key:ve,value:ct(be[$+"_agg"])},{key:ve+" Error Est.",value:`±${ct(be[me+"_agg"])}<br /><small>[${ct(be[$+"_agg"]-be[me+"_agg"])}, ${ct(be[$+"_agg"]+be[me+"_agg"])}]</small>`},{key:"Prev. "+ve,value:ar?"NA":ct(be[fe+"_agg"])},{key:"Prev. "+ve+" Error Est.",value:ar?"NA":`±${ct(be[ue+"_agg"])}<br /><small>[${ct(be[fe+"_agg"]-be[ue+"_agg"])}, ${ct(be[fe+"_agg"]+be[ue+"_agg"])}]</small>`}])}).on("mousemove",C=>{n(6,le=!0),C.clientX<window.innerWidth*.75?n(7,Ce=C.clientX+5):n(7,Ce=C.clientX+-355),n(8,Se=C.clientY+5)}).on("mouseout",C=>{n(6,le=!1)}).on("click",(C,be)=>{ke(K,be[K])})},lr=re=>{re.attr("x",C=>ae(C[K])).attr("y",C=>(C[$+"_agg"]<0?Q(0):Q(C[$+"_agg"]))-nn).attr("height",C=>Math.abs(Q(0)-Q(C[$+"_agg"]))+nn*2)};return ir.selectAll("rect").data(We.aggregated).join(sr,lr),{node:Me,update:async()=>{let re=await Ie(w,K,$,fe,me,ue);i?Q.domain(re.measure_range_spot).nice():Q.domain(re.measure_range).nice(),wt.transition().call(St).call(C=>C.selectAll(".domain").remove()),wt.selectAll("line").style("opacity",.2),bt.transition().call(Mt),bt.selectAll("text").style("font-family","'Source Sans', 'Open Sans', sans-serif").style("font-size",$e),Dt.selectAll("text").style("font-weight",C=>{var be;return(be=r[K])!=null&&be.includes(C)?"bold":"normal"}),Vt.selectAll("rect").data(re.aggregated).join(Ct,Ot),Ht.selectAll("line").data(re.aggregated).join(Lt,Ut),tr.selectAll("circle").data(re.aggregated).join(nr,rr),Rt.selectAll("line").data(re.aggregated).join(Pt,zt),Je.selectAll("circle").data(re.aggregated).join(Bt,Ft),ir.selectAll("rect").data(re.aggregated).join(sr,lr)},update_prev_error:async()=>{}}}function Qe(L){Te("#"+g+"-left",L.left_x,L.left_x_title,L.y,L.y_prev,L.y_title,L.y_error_size,L.y_error_size_prev).then(K=>{oe=K}),Te("#"+g+"-right",L.right_x,L.right_x_title,L.y,L.y_prev,L.y_title,L.y_error_size,L.y_error_size_prev).then(K=>{te=K})}let de=[],le=!1,Ce,Se,oe,te;return vt(()=>{v&&Qe(v),x.subscribe(L=>{(L==null?void 0:L.question)==b&&(oe&&v&&(oe==null||oe.update()),te&&v&&(te==null||te.update()))}),ie.subscribe(L=>{oe&&v&&(oe==null||oe.update()),te&&v&&(te==null||te.update()),L?pe=Object.keys(L).every(K=>L[K].length==0):pe=!0}),S.subscribe(L=>{oe&&v&&(oe==null||oe.update()),te&&v&&(te==null||te.update()),L==33?ge.set(!1):L&&ge.set(!0)}),ge.subscribe(L=>{oe&&v&&(oe==null||oe.update()),te&&v&&(te==null||te.update())}),I.subscribe(L=>{oe&&v&&(oe==null||oe.update()),te&&v&&(te==null||te.update())})}),e.$$set=L=>{"view_id"in L&&n(0,g=L.view_id),"dataset"in L&&n(14,w=L.dataset),"spec"in L&&n(1,v=L.spec),"q_no"in L&&n(15,b=L.q_no),"debug_mode"in L&&n(16,y=L.debug_mode),"rescale_y_axis"in L&&l(n(2,I=L.rescale_y_axis)),"remeasure_push"in L&&n(17,x=L.remeasure_push),"remeasurement_detail"in L&&u(n(3,T=L.remeasurement_detail)),"move_prev_error"in L&&d(n(4,S=L.move_prev_error))},[g,v,I,T,S,de,le,Ce,Se,r,V,ie,ge,Ae,w,b,y,x]}class Uu extends Xe{constructor(t){super(),Ye(this,t,Lu,Hu,Ge,{view_id:0,dataset:14,spec:1,q_no:15,debug_mode:16,rescale_y_axis:2,remeasure_push:17,remeasurement_detail:3,move_prev_error:4},null,[-1,-1])}}function ju(e){let t,n;return{c(){t=k("div"),n=F("_"),this.h()},l(r){t=E(r,"DIV",{class:!0});var i=q(t);n=H(i,"_"),i.forEach(p),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-light text-center text-white")},m(r,i){U(r,t,i),_(t,n)},p:J,d(r){r&&p(t)}}}function Xu(e){let t,n;return{c(){t=k("div"),n=F(br),this.h()},l(r){t=E(r,"DIV",{class:!0});var i=q(t);n=H(i,br),i.forEach(p),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-warning text-center")},m(r,i){U(r,t,i),_(t,n)},p:J,d(r){r&&p(t)}}}function Yu(e){let t,n;return{c(){t=k("div"),n=F("_"),this.h()},l(r){t=E(r,"DIV",{class:!0});var i=q(t);n=H(i,"_"),i.forEach(p),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-light text-center text-white")},m(r,i){U(r,t,i),_(t,n)},p:J,d(r){r&&p(t)}}}function Gu(e){let t,n;return{c(){t=k("div"),n=F(wr),this.h()},l(r){t=E(r,"DIV",{class:!0});var i=q(t);n=H(i,wr),i.forEach(p),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-warning text-center")},m(r,i){U(r,t,i),_(t,n)},p:J,d(r){r&&p(t)}}}function Qu(e){let t,n,r,i,s,l,a,o,u,c,f,h,d,g,w,v,b,y,I,x,T;function S(N,M){return N[3]?Xu:ju}let V=S(e),X=V(e);function D(N,M){return N[4]?Gu:Yu}let R=D(e),A=R(e);return{c(){t=k("div"),n=k("div"),r=k("label"),i=F("Lower bound"),s=P(),l=k("div"),a=k("input"),u=P(),c=k("div"),f=k("label"),h=F("Upper bound"),d=P(),g=k("div"),w=k("input"),b=P(),X.c(),y=P(),A.c(),I=ye(),this.h()},l(N){t=E(N,"DIV",{class:!0,style:!0});var M=q(t);n=E(M,"DIV",{class:!0});var j=q(n);r=E(j,"LABEL",{for:!0,class:!0});var O=q(r);i=H(O,"Lower bound"),O.forEach(p),s=z(j),l=E(j,"DIV",{class:!0});var Y=q(l);a=E(Y,"INPUT",{type:!0,class:!0,name:!0,min:!0,max:!0,placeholder:!0,autocomplete:!0}),Y.forEach(p),j.forEach(p),u=z(M),c=E(M,"DIV",{class:!0});var W=q(c);f=E(W,"LABEL",{for:!0,class:!0});var Z=q(f);h=H(Z,"Upper bound"),Z.forEach(p),d=z(W),g=E(W,"DIV",{class:!0});var G=q(g);w=E(G,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0,min:!0,max:!0,autocomplete:!0}),G.forEach(p),W.forEach(p),M.forEach(p),b=z(N),X.l(N),y=z(N),A.l(N),I=ye(),this.h()},h(){m(r,"for","answer-1"),m(r,"class","col-5 col-form-label text-end"),m(a,"type","number"),m(a,"class",o=we("form-control"+(e[0].lower!==void 0?" border-dark":""))+" svelte-9herw1"),m(a,"name","answer"),m(a,"min","0"),m(a,"max","1000"),m(a,"placeholder","number"),m(a,"autocomplete","off"),m(l,"class","col-7"),m(n,"class","col-auto row"),m(f,"for","answer-2"),m(f,"class","col-5 col-form-label text-end"),m(w,"type","number"),m(w,"class",v=we("form-control"+(e[0].upper!==void 0?" border-dark":""))+" svelte-9herw1"),m(w,"name","answer"),m(w,"placeholder","number"),m(w,"min","0"),m(w,"max","1000"),m(w,"autocomplete","off"),m(g,"class","col-7"),m(c,"class","col-auto row"),m(t,"class","mt-5 p-3 response-form row justify-content-center rounded-3 bg-light svelte-9herw1"),m(t,"style",`width: ${nt.vis_area_width+nt.control_panel_width}px;`)},m(N,M){U(N,t,M),_(t,n),_(n,r),_(r,i),_(n,s),_(n,l),_(l,a),Re(a,e[0].lower),_(t,u),_(t,c),_(c,f),_(f,h),_(c,d),_(c,g),_(g,w),Re(w,e[0].upper),U(N,b,M),X.m(N,M),U(N,y,M),A.m(N,M),U(N,I,M),x||(T=[ee(a,"input",e[7]),ee(a,"change",e[8]),ee(w,"input",e[9]),ee(w,"change",e[10])],x=!0)},p(N,[M]){M&1&&o!==(o=we("form-control"+(N[0].lower!==void 0?" border-dark":""))+" svelte-9herw1")&&m(a,"class",o),M&1&&He(a.value)!==N[0].lower&&Re(a,N[0].lower),M&1&&v!==(v=we("form-control"+(N[0].upper!==void 0?" border-dark":""))+" svelte-9herw1")&&m(w,"class",v),M&1&&He(w.value)!==N[0].upper&&Re(w,N[0].upper),V===(V=S(N))&&X?X.p(N,M):(X.d(1),X=V(N),X&&(X.c(),X.m(y.parentNode,y))),R===(R=D(N))&&A?A.p(N,M):(A.d(1),A=R(N),A&&(A.c(),A.m(I.parentNode,I)))},i:J,o:J,d(N){N&&p(t),N&&p(b),X.d(N),N&&p(y),A.d(N),N&&p(I),x=!1,ht(T)}}}function Wu(e,t,n){let{answer:r={},record_answer:i=()=>{},q_no:s}=t,l=!1,a=!1,o=!1;function u(){n(5,o=Object.keys(r||2).length==2),o&&r.lower>r.upper?n(3,l=!0):n(3,l=!1),r.lower<0||r.lower>1e3||r.upper<0||r.upper>1e3?n(4,a=!0):n(4,a=!1)}vt(()=>{u()});function c(){r.lower=He(this.value),n(0,r)}const f=g=>{u(),i(s,r,o)};function h(){r.upper=He(this.value),n(0,r)}const d=g=>{u(),i(s,r,o)};return e.$$set=g=>{"answer"in g&&n(0,r=g.answer),"record_answer"in g&&n(1,i=g.record_answer),"q_no"in g&&n(2,s=g.q_no)},e.$$.update=()=>{var g;e.$$.dirty&1&&((g=Object.keys(r||{}))==null?void 0:g.length)==2&&u()},[r,i,s,l,a,o,u,c,f,h,d]}class Ju extends Xe{constructor(t){super(),Ye(this,t,Wu,Qu,Ge,{answer:0,record_answer:1,q_no:2})}}function ri(e,t,n){const r=e.slice();return r[11]=t[n],r[12]=t,r[13]=n,r}function ii(e){let t,n,r=e[11]+"",i,s,l,a,o,u,c;function f(){e[8].call(a,e[11])}return{c(){t=k("div"),n=k("label"),i=F(r),s=P(),l=k("div"),a=k("input"),this.h()},l(h){t=E(h,"DIV",{class:!0,style:!0});var d=q(t);n=E(d,"LABEL",{for:!0,class:!0});var g=q(n);i=H(g,r),g.forEach(p),s=z(d),l=E(d,"DIV",{});var w=q(l);a=E(w,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0,min:!0,max:!0,step:!0,autocomplete:!0}),w.forEach(p),d.forEach(p),this.h()},h(){m(n,"for","answer-"+e[13]),m(n,"class","text-center d-block group-label svelte-1w4g1iu"),m(a,"type","number"),m(a,"class",o=we("form-control"+(e[0][e[11].replace(/\s/gi,"-")]!==void 0?" border-dark":""))+" svelte-1w4g1iu"),m(a,"name","answer-"+e[13]),m(a,"placeholder","probability"),m(a,"min","0"),m(a,"max","1"),m(a,"step","0.01"),m(a,"autocomplete","off"),m(t,"class","px-1"),Ne(t,"width","200px")},m(h,d){U(h,t,d),_(t,n),_(n,i),_(t,s),_(t,l),_(l,a),Re(a,e[0][e[11].replace(/\s/gi,"-")]),u||(c=[ee(a,"input",f),ee(a,"change",e[9])],u=!0)},p(h,d){e=h,d&8&&r!==(r=e[11]+"")&&Ve(i,r),d&9&&o!==(o=we("form-control"+(e[0][e[11].replace(/\s/gi,"-")]!==void 0?" border-dark":""))+" svelte-1w4g1iu")&&m(a,"class",o),d&9&&He(a.value)!==e[0][e[11].replace(/\s/gi,"-")]&&Re(a,e[0][e[11].replace(/\s/gi,"-")])},d(h){h&&p(t),u=!1,ht(c)}}}function Ku(e){let t,n;return{c(){t=k("div"),n=F("_"),this.h()},l(r){t=E(r,"DIV",{class:!0});var i=q(t);n=H(i,"_"),i.forEach(p),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-light text-center text-white")},m(r,i){U(r,t,i),_(t,n)},p:J,d(r){r&&p(t)}}}function Zu(e){let t,n;return{c(){t=k("div"),n=F(At),this.h()},l(r){t=E(r,"DIV",{class:!0});var i=q(t);n=H(i,At),i.forEach(p),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-warning text-center")},m(r,i){U(r,t,i),_(t,n)},p:J,d(r){r&&p(t)}}}function $u(e){let t,n,r,i,s,l,a,o,u,c,f,h,d=e[3],g=[];for(let y=0;y<d.length;y+=1)g[y]=ii(ri(e,d,y));function w(y,I){return y[4]?Zu:Ku}let v=w(e),b=v(e);return{c(){t=k("div");for(let y=0;y<g.length;y+=1)g[y].c();n=P(),r=k("div"),i=k("label"),s=F("Sum"),l=P(),a=k("div"),o=k("input"),u=P(),b.c(),c=ye(),this.h()},l(y){t=E(y,"DIV",{class:!0,style:!0});var I=q(t);for(let V=0;V<g.length;V+=1)g[V].l(I);n=z(I),r=E(I,"DIV",{class:!0,style:!0});var x=q(r);i=E(x,"LABEL",{for:!0,class:!0});var T=q(i);s=H(T,"Sum"),T.forEach(p),l=z(x),a=E(x,"DIV",{});var S=q(a);o=E(S,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0}),S.forEach(p),x.forEach(p),I.forEach(p),u=z(y),b.l(y),c=ye(),this.h()},h(){m(i,"for","answer-sum"),m(i,"class","text-center d-block text-bold"),o.disabled=!0,m(o,"type","number"),o.readOnly=!0,m(o,"class","form-control form-control-sm"),m(o,"name","answer-sum"),m(o,"placeholder","number"),m(r,"class","px-1"),Ne(r,"width","100px"),m(t,"class","mt-5 p-3 response-form d-flex justify-content-center rounded-3 bg-light svelte-1w4g1iu"),m(t,"style",`width: ${nt.vis_area_width+nt.control_panel_width}px;`)},m(y,I){U(y,t,I);for(let x=0;x<g.length;x+=1)g[x]&&g[x].m(t,null);_(t,n),_(t,r),_(r,i),_(i,s),_(r,l),_(r,a),_(a,o),Re(o,e[5]),U(y,u,I),b.m(y,I),U(y,c,I),f||(h=ee(o,"input",e[10]),f=!0)},p(y,[I]){if(I&207){d=y[3];let x;for(x=0;x<d.length;x+=1){const T=ri(y,d,x);g[x]?g[x].p(T,I):(g[x]=ii(T),g[x].c(),g[x].m(t,n))}for(;x<g.length;x+=1)g[x].d(1);g.length=d.length}I&32&&He(o.value)!==y[5]&&Re(o,y[5]),v===(v=w(y))&&b?b.p(y,I):(b.d(1),b=v(y),b&&(b.c(),b.m(c.parentNode,c)))},i:J,o:J,d(y){y&&p(t),qt(g,y),y&&p(u),b.d(y),y&&p(c),f=!1,h()}}}function ec(e,t,n){let{answer:r={},record_answer:i=()=>{},q_no:s,groups:l=[]}=t,a=!1,o=0,u=!1;function c(){n(5,o=Object.keys(r).map(g=>r[g]).reduce((g,w)=>g+w,0)),o>.99999999&&o<1&&n(5,o=1),n(6,u=Object.keys(r).length===l.length&&l.length>0),o>1||u&&o!=1?n(4,a=!0):n(4,a=!1)}vt(()=>{c()});function f(g){r[g.replace(/\s/gi,"-")]=He(this.value),n(0,r)}const h=g=>{c(),i(s,r,u)};function d(){o=He(this.value),n(5,o)}return e.$$set=g=>{"answer"in g&&n(0,r=g.answer),"record_answer"in g&&n(1,i=g.record_answer),"q_no"in g&&n(2,s=g.q_no),"groups"in g&&n(3,l=g.groups)},e.$$.update=()=>{e.$$.dirty&9&&(Object.keys(r)>0||l.length>0)&&c()},[r,i,s,l,a,o,u,c,f,h,d]}class tc extends Xe{constructor(t){super(),Ye(this,t,ec,$u,Ge,{answer:0,record_answer:1,q_no:2,groups:3})}}function si(e,t,n){const r=e.slice();return r[19]=t[n],r[20]=t,r[21]=n,r}function li(e,t,n){const r=e.slice();return r[22]=t[n],r[23]=t,r[24]=n,r}function ai(e,t,n){const r=e.slice();return r[25]=t[n],r[24]=n,r}function oi(e){let t,n,r=e[25]+"",i,s,l,a,o;return{c(){t=k("div"),n=k("span"),i=F(r),l=P(),this.h()},l(u){t=E(u,"DIV",{class:!0,style:!0});var c=q(t);n=E(c,"SPAN",{class:!0});var f=q(n);i=H(f,r),f.forEach(p),l=z(c),c.forEach(p),this.h()},h(){m(n,"class",s=we("group-label "+(e[8][1]==e[24]?"focus":""))+" svelte-2pwvq4"),m(t,"class",a=we("col px-1 text-center"+(e[8][1]==e[24]?" bg-hl-focus":""))+" svelte-2pwvq4"),m(t,"style",o=`width: ${e[4]}px;`)},m(u,c){U(u,t,c),_(t,n),_(n,i),_(t,l)},p(u,c){c&8&&r!==(r=u[25]+"")&&Ve(i,r),c&256&&s!==(s=we("group-label "+(u[8][1]==u[24]?"focus":""))+" svelte-2pwvq4")&&m(n,"class",s),c&256&&a!==(a=we("col px-1 text-center"+(u[8][1]==u[24]?" bg-hl-focus":""))+" svelte-2pwvq4")&&m(t,"class",a),c&16&&o!==(o=`width: ${u[4]}px;`)&&m(t,"style",o)},d(u){u&&p(t)}}}function ui(e){let t,n=e[24]<e[3].length-1&&oi(e);return{c(){n&&n.c(),t=ye()},l(r){n&&n.l(r),t=ye()},m(r,i){n&&n.m(r,i),U(r,t,i)},p(r,i){r[24]<r[3].length-1?n?n.p(r,i):(n=oi(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&p(t)}}}function nc(e){let t,n,r,i=e[19]+"",s,l,a,o,u,c,f=e[3],h=[];for(let d=0;d<f.length;d+=1)h[d]=fi(li(e,f,d));return{c(){t=k("div"),n=k("div"),r=k("span"),s=F(i),u=P();for(let d=0;d<h.length;d+=1)h[d].c();c=P(),this.h()},l(d){t=E(d,"DIV",{class:!0,style:!0});var g=q(t);n=E(g,"DIV",{class:!0,style:!0});var w=q(n);r=E(w,"SPAN",{class:!0});var v=q(r);s=H(v,i),v.forEach(p),w.forEach(p),u=z(g);for(let b=0;b<h.length;b+=1)h[b].l(g);c=z(g),g.forEach(p),this.h()},h(){m(r,"class",l=we("group-label me-3 "+(e[8][0]==e[21]?"focus":""))+" svelte-2pwvq4"),m(n,"class",a=we("col px-1 text-end"+(e[8][0]==e[21]?" bg-hl-focus":""))+" svelte-2pwvq4"),m(n,"style",o=`width: ${e[4]}px;`),m(t,"class","row align-items-center"),m(t,"style",`width: ${e[9]}px;`)},m(d,g){U(d,t,g),_(t,n),_(n,r),_(r,s),_(t,u);for(let w=0;w<h.length;w+=1)h[w]&&h[w].m(t,null);_(t,c)},p(d,g){if(g&8&&i!==(i=d[19]+"")&&Ve(s,i),g&256&&l!==(l=we("group-label me-3 "+(d[8][0]==d[21]?"focus":""))+" svelte-2pwvq4")&&m(r,"class",l),g&256&&a!==(a=we("col px-1 text-end"+(d[8][0]==d[21]?" bg-hl-focus":""))+" svelte-2pwvq4")&&m(n,"class",a),g&16&&o!==(o=`width: ${d[4]}px;`)&&m(n,"style",o),g&7583){f=d[3];let w;for(w=0;w<f.length;w+=1){const v=li(d,f,w);h[w]?h[w].p(v,g):(h[w]=fi(v),h[w].c(),h[w].m(t,c))}for(;w<h.length;w+=1)h[w].d(1);h.length=f.length}},d(d){d&&p(t),qt(h,d)}}}function ci(e){let t,n,r,i=e[21]>e[24]&&rc(e);return{c(){t=k("div"),i&&i.c(),this.h()},l(s){t=E(s,"DIV",{class:!0,style:!0});var l=q(t);i&&i.l(l),l.forEach(p),this.h()},h(){m(t,"class",n=we("col px-1"+(e[8][0]==e[21]||e[8][1]==e[24]?" bg-hl-focus":""))+" svelte-2pwvq4"),m(t,"style",r=`width: ${e[4]}px;`)},m(s,l){U(s,t,l),i&&i.m(t,null)},p(s,l){s[21]>s[24]&&i.p(s,l),l&256&&n!==(n=we("col px-1"+(s[8][0]==s[21]||s[8][1]==s[24]?" bg-hl-focus":""))+" svelte-2pwvq4")&&m(t,"class",n),l&16&&r!==(r=`width: ${s[4]}px;`)&&m(t,"style",r)},d(s){s&&p(t),i&&i.d()}}}function rc(e){let t,n,r,i;function s(){e[13].call(t,e[19],e[22])}function l(){return e[15](e[21],e[24])}function a(){return e[16](e[21],e[24])}return{c(){t=k("input"),this.h()},l(o){t=E(o,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0,min:!0,max:!0,step:!0,autocomplete:!0}),this.h()},h(){m(t,"type","number"),m(t,"class",n=we("form-control form-control-sm"+(e[0][e[19].replace(/\s/gi,"-")+"_"+e[22].replace(/\s/gi,"-")]!==void 0?" border-dark":""))+" svelte-2pwvq4"),m(t,"name","answer-"+e[21]+e[24]),m(t,"placeholder","probability"),m(t,"min","0"),m(t,"max","1"),m(t,"step","0.01"),m(t,"autocomplete","off")},m(o,u){U(o,t,u),Re(t,e[0][e[19].replace(/\s/gi,"-")+"_"+e[22].replace(/\s/gi,"-")]),r||(i=[ee(t,"input",s),ee(t,"change",e[14]),ee(t,"focus",l),ee(t,"blur",a)],r=!0)},p(o,u){e=o,u&9&&n!==(n=we("form-control form-control-sm"+(e[0][e[19].replace(/\s/gi,"-")+"_"+e[22].replace(/\s/gi,"-")]!==void 0?" border-dark":""))+" svelte-2pwvq4")&&m(t,"class",n),u&9&&He(t.value)!==e[0][e[19].replace(/\s/gi,"-")+"_"+e[22].replace(/\s/gi,"-")]&&Re(t,e[0][e[19].replace(/\s/gi,"-")+"_"+e[22].replace(/\s/gi,"-")])},d(o){o&&p(t),r=!1,ht(i)}}}function fi(e){let t,n=e[24]<e[3].length-1&&ci(e);return{c(){n&&n.c(),t=ye()},l(r){n&&n.l(r),t=ye()},m(r,i){n&&n.m(r,i),U(r,t,i)},p(r,i){r[24]<r[3].length-1?n?n.p(r,i):(n=ci(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&p(t)}}}function hi(e){let t,n=e[21]>0&&nc(e);return{c(){n&&n.c(),t=ye()},l(r){n&&n.l(r),t=ye()},m(r,i){n&&n.m(r,i),U(r,t,i)},p(r,i){r[21]>0&&n.p(r,i)},d(r){n&&n.d(r),r&&p(t)}}}function ic(e){let t,n;return{c(){t=k("div"),n=F("_"),this.h()},l(r){t=E(r,"DIV",{class:!0});var i=q(t);n=H(i,"_"),i.forEach(p),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-light text-center text-white")},m(r,i){U(r,t,i),_(t,n)},p:J,d(r){r&&p(t)}}}function sc(e){let t,n;return{c(){t=k("div"),n=F(At),this.h()},l(r){t=E(r,"DIV",{class:!0});var i=q(t);n=H(i,At),i.forEach(p),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-warning text-center")},m(r,i){U(r,t,i),_(t,n)},p:J,d(r){r&&p(t)}}}function lc(e){let t,n,r,i,s,l,a,o,u,c,f,h,d,g,w,v,b,y,I,x=e[3],T=[];for(let A=0;A<x.length;A+=1)T[A]=ui(ai(e,x,A));let S=e[3],V=[];for(let A=0;A<S.length;A+=1)V[A]=hi(si(e,S,A));function X(A,N){return A[5]?sc:ic}let D=X(e),R=D(e);return{c(){t=k("div"),n=k("div"),r=k("div"),i=k("div"),s=k("span"),a=P();for(let A=0;A<T.length;A+=1)T[A].c();o=P();for(let A=0;A<V.length;A+=1)V[A].c();u=P(),c=k("div"),f=k("label"),h=F("Sum"),d=P(),g=k("div"),w=k("input"),v=P(),R.c(),b=ye(),this.h()},l(A){t=E(A,"DIV",{class:!0,style:!0});var N=q(t);n=E(N,"DIV",{class:!0});var M=q(n);r=E(M,"DIV",{class:!0,style:!0});var j=q(r);i=E(j,"DIV",{class:!0,style:!0});var O=q(i);s=E(O,"SPAN",{class:!0}),q(s).forEach(p),O.forEach(p),a=z(j);for(let G=0;G<T.length;G+=1)T[G].l(j);j.forEach(p),o=z(M);for(let G=0;G<V.length;G+=1)V[G].l(M);M.forEach(p),u=z(N),c=E(N,"DIV",{class:!0,style:!0});var Y=q(c);f=E(Y,"LABEL",{for:!0,class:!0});var W=q(f);h=H(W,"Sum"),W.forEach(p),d=z(Y),g=E(Y,"DIV",{});var Z=q(g);w=E(Z,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0,autocomplete:!0}),Z.forEach(p),Y.forEach(p),N.forEach(p),v=z(A),R.l(A),b=ye(),this.h()},h(){m(s,"class","group-name-label me-3 svelte-2pwvq4"),m(i,"class","col px-1 text-end svelte-2pwvq4"),m(i,"style",l=`width: ${e[4]}px;`),m(r,"class","row align-items-end"),m(r,"style",`width: ${e[9]}px;`),m(n,"class","px-1 joint-table svelte-2pwvq4"),m(f,"for","answer-sum"),m(f,"class","text-center d-block text-bold"),w.disabled=!0,m(w,"type","number"),w.readOnly=!0,m(w,"class","form-control"),m(w,"name","answer-sum"),m(w,"placeholder","probability"),m(w,"autocomplete","off"),m(c,"class","ps-3"),Ne(c,"width","100px"),m(t,"class","mt-5 p-3 response-form d-flex justify-content-center rounded-3 bg-light align-items-center svelte-2pwvq4"),m(t,"style",`width: ${nt.vis_area_width+nt.control_panel_width}px;`)},m(A,N){U(A,t,N),_(t,n),_(n,r),_(r,i),_(i,s),_(r,a);for(let M=0;M<T.length;M+=1)T[M]&&T[M].m(r,null);_(n,o);for(let M=0;M<V.length;M+=1)V[M]&&V[M].m(n,null);_(t,u),_(t,c),_(c,f),_(f,h),_(c,d),_(c,g),_(g,w),Re(w,e[6]),U(A,v,N),R.m(A,N),U(A,b,N),y||(I=ee(w,"input",e[17]),y=!0)},p(A,[N]){if(N&16&&l!==(l=`width: ${A[4]}px;`)&&m(i,"style",l),N&280){x=A[3];let M;for(M=0;M<x.length;M+=1){const j=ai(A,x,M);T[M]?T[M].p(j,N):(T[M]=ui(j),T[M].c(),T[M].m(r,null))}for(;M<T.length;M+=1)T[M].d(1);T.length=x.length}if(N&8095){S=A[3];let M;for(M=0;M<S.length;M+=1){const j=si(A,S,M);V[M]?V[M].p(j,N):(V[M]=hi(j),V[M].c(),V[M].m(n,null))}for(;M<V.length;M+=1)V[M].d(1);V.length=S.length}N&64&&He(w.value)!==A[6]&&Re(w,A[6]),D===(D=X(A))&&R?R.p(A,N):(R.d(1),R=D(A),R&&(R.c(),R.m(b.parentNode,b)))},i:J,o:J,d(A){A&&p(t),qt(T,A),qt(V,A),A&&p(v),R.d(A),A&&p(b),y=!1,I()}}}function ac(e,t,n){let{answer:r={},record_answer:i=()=>{},q_no:s,groups:l=[]}=t,a=1080,o=180,u=!1,c=0,f=0,h=!1;function d(){n(6,c=Object.keys(r).map(S=>r[S]).reduce((S,V)=>S+V,0)),c>.99999999&&c<1&&n(6,c=1),n(7,h=Object.keys(r).length===f&&l.length>0),c>1||h&&c!=1?n(5,u=!0):n(5,u=!1)}let g=[];function w(S,V){n(8,g=[S,V])}function v(){n(8,g=[])}vt(()=>{n(4,o=Math.floor(a/(l.length+1))),f=l.length*(l.length-1)/2,d()});function b(S,V){r[S.replace(/\s/gi,"-")+"_"+V.replace(/\s/gi,"-")]=He(this.value),n(0,r)}const y=S=>{d(),i(s,r,h)},I=(S,V)=>{w(S,V)},x=(S,V)=>{v()};function T(){c=He(this.value),n(6,c)}return e.$$set=S=>{"answer"in S&&n(0,r=S.answer),"record_answer"in S&&n(1,i=S.record_answer),"q_no"in S&&n(2,s=S.q_no),"groups"in S&&n(3,l=S.groups)},e.$$.update=()=>{e.$$.dirty&9&&(Object.keys(r)>0||l.length>0)&&(n(4,o=Math.floor(a/(l.length+1))),f=l.length*(l.length-1)/2,d())},[r,i,s,l,o,u,c,h,g,a,d,w,v,b,y,I,x,T]}class oc extends Xe{constructor(t){super(),Ye(this,t,ac,lc,Ge,{answer:0,record_answer:1,q_no:2,groups:3})}}function _i(e,t,n){const r=e.slice();return r[11]=t[n],r[12]=t,r[13]=n,r}function di(e){let t,n,r=e[11]+"",i,s,l,a,o,u,c;function f(){e[8].call(a,e[11])}return{c(){t=k("div"),n=k("label"),i=F(r),s=P(),l=k("div"),a=k("input"),this.h()},l(h){t=E(h,"DIV",{class:!0,style:!0});var d=q(t);n=E(d,"LABEL",{for:!0,class:!0});var g=q(n);i=H(g,r),g.forEach(p),s=z(d),l=E(d,"DIV",{});var w=q(l);a=E(w,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0,min:!0,max:!0,step:!0,autocomplete:!0}),w.forEach(p),d.forEach(p),this.h()},h(){m(n,"for","answer-"+e[13]),m(n,"class","text-center d-block group-label svelte-1w4g1iu"),m(a,"type","number"),m(a,"class",o=we("form-control"+(e[0][e[11].replace(/\s/gi,"-")]!==void 0?" border-dark":""))+" svelte-1w4g1iu"),m(a,"name","answer-"+e[13]),m(a,"placeholder","probability"),m(a,"min","0"),m(a,"max","1"),m(a,"step","0.01"),m(a,"autocomplete","off"),m(t,"class","px-1"),Ne(t,"width","200px")},m(h,d){U(h,t,d),_(t,n),_(n,i),_(t,s),_(t,l),_(l,a),Re(a,e[0][e[11].replace(/\s/gi,"-")]),u||(c=[ee(a,"input",f),ee(a,"change",e[9])],u=!0)},p(h,d){e=h,d&1&&o!==(o=we("form-control"+(e[0][e[11].replace(/\s/gi,"-")]!==void 0?" border-dark":""))+" svelte-1w4g1iu")&&m(a,"class",o),d&65&&He(a.value)!==e[0][e[11].replace(/\s/gi,"-")]&&Re(a,e[0][e[11].replace(/\s/gi,"-")])},d(h){h&&p(t),u=!1,ht(c)}}}function uc(e){let t,n;return{c(){t=k("div"),n=F("_"),this.h()},l(r){t=E(r,"DIV",{class:!0});var i=q(t);n=H(i,"_"),i.forEach(p),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-light text-center text-white")},m(r,i){U(r,t,i),_(t,n)},p:J,d(r){r&&p(t)}}}function cc(e){let t,n;return{c(){t=k("div"),n=F(At),this.h()},l(r){t=E(r,"DIV",{class:!0});var i=q(t);n=H(i,At),i.forEach(p),this.h()},h(){m(t,"class","mt-3 p-2 alert alert-warning text-center")},m(r,i){U(r,t,i),_(t,n)},p:J,d(r){r&&p(t)}}}function fc(e){let t,n,r,i,s,l,a,o,u,c,f,h,d=e[6],g=[];for(let y=0;y<d.length;y+=1)g[y]=di(_i(e,d,y));function w(y,I){return y[3]?cc:uc}let v=w(e),b=v(e);return{c(){t=k("div");for(let y=0;y<g.length;y+=1)g[y].c();n=P(),r=k("div"),i=k("label"),s=F("Sum"),l=P(),a=k("div"),o=k("input"),u=P(),b.c(),c=ye(),this.h()},l(y){t=E(y,"DIV",{class:!0,style:!0});var I=q(t);for(let V=0;V<g.length;V+=1)g[V].l(I);n=z(I),r=E(I,"DIV",{class:!0,style:!0});var x=q(r);i=E(x,"LABEL",{for:!0,class:!0});var T=q(i);s=H(T,"Sum"),T.forEach(p),l=z(x),a=E(x,"DIV",{});var S=q(a);o=E(S,"INPUT",{type:!0,class:!0,name:!0,placeholder:!0}),S.forEach(p),x.forEach(p),I.forEach(p),u=z(y),b.l(y),c=ye(),this.h()},h(){m(i,"for","answer-sum"),m(i,"class","text-center d-block text-bold"),o.disabled=!0,m(o,"type","number"),o.readOnly=!0,m(o,"class","form-control form-control-sm"),m(o,"name","answer-sum"),m(o,"placeholder","number"),m(r,"class","px-1"),Ne(r,"width","100px"),m(t,"class","mt-5 p-3 response-form d-flex justify-content-center rounded-3 bg-light svelte-1w4g1iu"),m(t,"style",`width: ${nt.vis_area_width+nt.control_panel_width}px;`)},m(y,I){U(y,t,I);for(let x=0;x<g.length;x+=1)g[x]&&g[x].m(t,null);_(t,n),_(t,r),_(r,i),_(i,s),_(r,l),_(r,a),_(a,o),Re(o,e[4]),U(y,u,I),b.m(y,I),U(y,c,I),f||(h=ee(o,"input",e[10]),f=!0)},p(y,[I]){if(I&231){d=y[6];let x;for(x=0;x<d.length;x+=1){const T=_i(y,d,x);g[x]?g[x].p(T,I):(g[x]=di(T),g[x].c(),g[x].m(t,n))}for(;x<g.length;x+=1)g[x].d(1);g.length=d.length}I&16&&He(o.value)!==y[4]&&Re(o,y[4]),v===(v=w(y))&&b?b.p(y,I):(b.d(1),b=v(y),b&&(b.c(),b.m(c.parentNode,c)))},i:J,o:J,d(y){y&&p(t),qt(g,y),y&&p(u),b.d(y),y&&p(c),f=!1,h()}}}function hc(e,t,n){let{answer:r={},record_answer:i=()=>{},q_no:s}=t,l=["Yes","No"],a=!1,o=0,u=!1;function c(){n(4,o=Object.keys(r).map(g=>r[g]).reduce((g,w)=>g+w,0)),o>.99999999&&o<1&&n(4,o=1),n(5,u=Object.keys(r).length===l.length&&l.length>0),o>1||u&&o!=1?n(3,a=!0):n(3,a=!1)}vt(()=>{c()});function f(g){r[g.replace(/\s/gi,"-")]=He(this.value),n(0,r)}const h=g=>{c(),i(s,r,u)};function d(){o=He(this.value),n(4,o)}return e.$$set=g=>{"answer"in g&&n(0,r=g.answer),"record_answer"in g&&n(1,i=g.record_answer),"q_no"in g&&n(2,s=g.q_no)},e.$$.update=()=>{e.$$.dirty&1&&(Object.keys(r)>0||l.length>0)&&c()},[r,i,s,a,o,u,l,c,f,h,d]}class _c extends Xe{constructor(t){super(),Ye(this,t,hc,fc,Ge,{answer:0,record_answer:1,q_no:2})}}function dc(e){let t,n,r,i,s,l;return{c(){t=k("div"),n=k("div"),i=P(),s=k("div"),this.h()},l(a){t=E(a,"DIV",{class:!0});var o=q(t);n=E(o,"DIV",{class:!0}),q(n).forEach(p),i=z(o),s=E(o,"DIV",{class:!0}),q(s).forEach(p),o.forEach(p),this.h()},h(){m(n,"class",r=we("toggle-back "+(e[0]?"on":"off"))+" svelte-12ojuty"),m(s,"class",l=we("toggle-dangle "+(e[0]?"on":"off"))+" svelte-12ojuty"),m(t,"class","toggle-wrap svelte-12ojuty")},m(a,o){U(a,t,o),_(t,n),_(t,i),_(t,s)},p(a,[o]){o&1&&r!==(r=we("toggle-back "+(a[0]?"on":"off"))+" svelte-12ojuty")&&m(n,"class",r),o&1&&l!==(l=we("toggle-dangle "+(a[0]?"on":"off"))+" svelte-12ojuty")&&m(s,"class",l)},i:J,o:J,d(a){a&&p(t)}}}function mc(e,t,n){let{truth:r}=t;return e.$$set=i=>{"truth"in i&&n(0,r=i.truth)},[r]}class mi extends Xe{constructor(t){super(),Ye(this,t,mc,dc,Ge,{truth:0})}}function pc(e){let t,n,r,i,s,l,a,o,u,c,f,h,d=qr(e[8][e[1]])+"",g,w,v,b,y,I,x,T,S,V,X,D,R,A,N,M,j;return b=new mi({props:{truth:e[9]!==!0}}),X=new mi({props:{truth:e[10]}}),{c(){t=k("div"),n=k("div"),r=k("h6"),i=F("Controls"),s=P(),l=k("div"),a=k("button"),o=F("Remeasure"),c=k("br"),f=P(),h=k("span"),g=P(),w=k("div"),v=k("div"),Pe(b.$$.fragment),y=P(),I=k("div"),x=F(Ar),T=P(),S=k("div"),V=k("div"),Pe(X.$$.fragment),D=P(),R=k("div"),A=F(xr),this.h()},l(O){t=E(O,"DIV",{style:!0});var Y=q(t);n=E(Y,"DIV",{class:!0});var W=q(n);r=E(W,"H6",{class:!0});var Z=q(r);i=H(Z,"Controls"),Z.forEach(p),s=z(W),l=E(W,"DIV",{class:!0});var G=q(l);a=E(G,"BUTTON",{class:!0});var qe=q(a);o=H(qe,"Remeasure"),qe.forEach(p),c=E(G,"BR",{}),f=z(G),h=E(G,"SPAN",{style:!0});var ne=q(h);ne.forEach(p),G.forEach(p),g=z(W),w=E(W,"DIV",{class:!0});var ie=q(w);v=E(ie,"DIV",{class:!0});var pe=q(v);ze(b.$$.fragment,pe),pe.forEach(p),y=z(ie),I=E(ie,"DIV",{class:!0,style:!0});var ge=q(I);x=H(ge,Ar),ge.forEach(p),ie.forEach(p),T=z(W),S=E(W,"DIV",{class:!0});var ke=q(S);V=E(ke,"DIV",{class:!0});var Ae=q(V);ze(X.$$.fragment,Ae),Ae.forEach(p),D=z(ke),R=E(ke,"DIV",{class:!0,style:!0});var Ie=q(R);A=H(Ie,xr),Ie.forEach(p),ke.forEach(p),W.forEach(p),Y.forEach(p),this.h()},h(){m(r,"class","text-secondary"),m(a,"class","btn btn-secondary me-3 mb-2"),a.disabled=u=e[7]>=e[5],Ne(h,"font-size","0.9rem"),Ne(h,"display","inline"),m(l,"class","mt-3"),m(v,"class","d-flex align-items-center"),m(I,"class","ps-2"),Ne(I,"line-height","100%"),m(w,"class","mt-3 d-flex inline-text-action svelte-15wqg3u"),m(V,"class","d-flex align-items-center"),m(R,"class","ps-2"),Ne(R,"line-height","100%"),m(S,"class","mt-3 d-flex inline-text-action svelte-15wqg3u"),m(n,"class","bg-light p-3 rounded-3 ms-5 mt-5"),m(t,"style",`width: ${nt.control_panel_width}px;`)},m(O,Y){U(O,t,Y),_(t,n),_(n,r),_(r,i),_(n,s),_(n,l),_(l,a),_(a,o),_(l,c),_(l,f),_(l,h),h.innerHTML=d,_(n,g),_(n,w),_(w,v),Be(b,v,null),_(w,y),_(w,I),_(I,x),_(n,T),_(n,S),_(S,V),Be(X,V,null),_(S,D),_(S,R),_(R,A),N=!0,M||(j=[ee(a,"click",e[11]),ee(w,"click",e[12]),ee(S,"click",e[13])],M=!0)},p(O,[Y]){(!N||Y&160&&u!==(u=O[7]>=O[5]))&&(a.disabled=u),(!N||Y&258)&&d!==(d=qr(O[8][O[1]])+"")&&(h.innerHTML=d);const W={};Y&512&&(W.truth=O[9]!==!0),b.$set(W);const Z={};Y&1024&&(Z.truth=O[10]),X.$set(Z)},i(O){N||(se(b.$$.fragment,O),se(X.$$.fragment,O),N=!0)},o(O){he(b.$$.fragment,O),he(X.$$.fragment,O),N=!1},d(O){O&&p(t),Fe(b),Fe(X),M=!1,ht(j)}}}function gc(e,t,n){let r,i=J,s=()=>(i(),i=Ke(I,D=>n(7,r=D)),I),l,a=J,o=()=>(a(),a=Ke(y,D=>n(8,l=D)),y),u,c=J,f=()=>(c(),c=Ke(T,D=>n(9,u=D)),T),h,d=J,g=()=>(d(),d=Ke(b,D=>n(10,h=D)),b);e.$$.on_destroy.push(()=>i()),e.$$.on_destroy.push(()=>a()),e.$$.on_destroy.push(()=>c()),e.$$.on_destroy.push(()=>d());let{remeasure:w=()=>{},q_no:v,rescale_y_axis:b=dt(),remeasurement_detail:y,remeasurement:I,total_remeasurement:x,move_prev_error:T}=t;g(),o(),s(),f();const S=()=>{w(v)},V=()=>{T.set(u===!0?33:!0)},X=()=>{b.set(!h)};return e.$$set=D=>{"remeasure"in D&&n(0,w=D.remeasure),"q_no"in D&&n(1,v=D.q_no),"rescale_y_axis"in D&&g(n(2,b=D.rescale_y_axis)),"remeasurement_detail"in D&&o(n(3,y=D.remeasurement_detail)),"remeasurement"in D&&s(n(4,I=D.remeasurement)),"total_remeasurement"in D&&n(5,x=D.total_remeasurement),"move_prev_error"in D&&f(n(6,T=D.move_prev_error))},[w,v,b,y,I,x,T,r,l,u,h,S,V,X]}class vc extends Xe{constructor(t){super(),Ye(this,t,gc,pc,Ge,{remeasure:0,q_no:1,rescale_y_axis:2,remeasurement_detail:3,remeasurement:4,total_remeasurement:5,move_prev_error:6})}}function pi(e){let t,n,r,i,s,l,a,o,u,c,f,h;n=new Ns({props:{q_no:e[5],question:e[15],response_type:e[16]}}),s=new Uu({props:{view_id:"dp-vis-"+e[4],dataset:e[1],q_no:e[4],debug_mode:e[3],spec:e[17],rescale_y_axis:e[14],remeasurement_detail:e[6],move_prev_error:e[9],remeasure_push:e[11]}}),a=new vc({props:{q_no:e[4],remeasure:e[2],rescale_y_axis:e[14],remeasurement_detail:e[6],remeasurement:e[7],total_remeasurement:e[8],move_prev_error:e[9]}});const d=[kc,yc,wc,bc],g=[];function w(v,b){return v[16]===Ei?0:v[16]===Ln?1:v[16]===Ni?2:v[16]===qi?3:-1}return~(u=w(e))&&(c=g[u]=d[u](e)),{c(){t=k("article"),Pe(n.$$.fragment),r=P(),i=k("section"),Pe(s.$$.fragment),l=P(),Pe(a.$$.fragment),o=P(),c&&c.c(),this.h()},l(v){t=E(v,"ARTICLE",{class:!0,id:!0});var b=q(t);ze(n.$$.fragment,b),r=z(b),i=E(b,"SECTION",{class:!0});var y=q(i);ze(s.$$.fragment,y),l=z(y),ze(a.$$.fragment,y),y.forEach(p),o=z(b),c&&c.l(b),b.forEach(p),this.h()},h(){m(i,"class","d-flex justify-content-center"),m(t,"class","q-item mb-5"),m(t,"id",f="q"+e[4])},m(v,b){U(v,t,b),Be(n,t,null),_(t,r),_(t,i),Be(s,i,null),_(i,l),Be(a,i,null),_(t,o),~u&&g[u].m(t,null),h=!0},p(v,b){const y={};b&32&&(y.q_no=v[5]),n.$set(y);const I={};b&16&&(I.view_id="dp-vis-"+v[4]),b&2&&(I.dataset=v[1]),b&16&&(I.q_no=v[4]),b&8&&(I.debug_mode=v[3]),b&64&&(I.remeasurement_detail=v[6]),b&512&&(I.move_prev_error=v[9]),b&2048&&(I.remeasure_push=v[11]),s.$set(I);const x={};b&16&&(x.q_no=v[4]),b&4&&(x.remeasure=v[2]),b&64&&(x.remeasurement_detail=v[6]),b&128&&(x.remeasurement=v[7]),b&256&&(x.total_remeasurement=v[8]),b&512&&(x.move_prev_error=v[9]),a.$set(x),c&&c.p(v,b),(!h||b&16&&f!==(f="q"+v[4]))&&m(t,"id",f)},i(v){h||(se(n.$$.fragment,v),se(s.$$.fragment,v),se(a.$$.fragment,v),se(c),h=!0)},o(v){he(n.$$.fragment,v),he(s.$$.fragment,v),he(a.$$.fragment,v),he(c),h=!1},d(v){v&&p(t),Fe(n),Fe(s),Fe(a),~u&&g[u].d()}}}function bc(e){let t,n;return t=new _c({props:{record_answer:e[0],answer:e[12],q_no:e[4]}}),{c(){Pe(t.$$.fragment)},l(r){ze(t.$$.fragment,r)},m(r,i){Be(t,r,i),n=!0},p(r,i){const s={};i&1&&(s.record_answer=r[0]),i&4096&&(s.answer=r[12]),i&16&&(s.q_no=r[4]),t.$set(s)},i(r){n||(se(t.$$.fragment,r),n=!0)},o(r){he(t.$$.fragment,r),n=!1},d(r){Fe(t,r)}}}function wc(e){let t,n;return t=new oc({props:{record_answer:e[0],answer:e[12],q_no:e[4],groups:e[13]}}),{c(){Pe(t.$$.fragment)},l(r){ze(t.$$.fragment,r)},m(r,i){Be(t,r,i),n=!0},p(r,i){const s={};i&1&&(s.record_answer=r[0]),i&4096&&(s.answer=r[12]),i&16&&(s.q_no=r[4]),i&8192&&(s.groups=r[13]),t.$set(s)},i(r){n||(se(t.$$.fragment,r),n=!0)},o(r){he(t.$$.fragment,r),n=!1},d(r){Fe(t,r)}}}function yc(e){let t,n;return t=new tc({props:{record_answer:e[0],answer:e[12],q_no:e[4],groups:e[13]}}),{c(){Pe(t.$$.fragment)},l(r){ze(t.$$.fragment,r)},m(r,i){Be(t,r,i),n=!0},p(r,i){const s={};i&1&&(s.record_answer=r[0]),i&4096&&(s.answer=r[12]),i&16&&(s.q_no=r[4]),i&8192&&(s.groups=r[13]),t.$set(s)},i(r){n||(se(t.$$.fragment,r),n=!0)},o(r){he(t.$$.fragment,r),n=!1},d(r){Fe(t,r)}}}function kc(e){let t,n;return t=new Ju({props:{record_answer:e[0],answer:e[12],q_no:e[4]}}),{c(){Pe(t.$$.fragment)},l(r){ze(t.$$.fragment,r)},m(r,i){Be(t,r,i),n=!0},p(r,i){const s={};i&1&&(s.record_answer=r[0]),i&4096&&(s.answer=r[12]),i&16&&(s.q_no=r[4]),t.$set(s)},i(r){n||(se(t.$$.fragment,r),n=!0)},o(r){he(t.$$.fragment,r),n=!1},d(r){Fe(t,r)}}}function Ec(e){let t,n,r=e[4]!==void 0&&pi(e);return{c(){r&&r.c(),t=ye()},l(i){r&&r.l(i),t=ye()},m(i,s){r&&r.m(i,s),U(i,t,s),n=!0},p(i,[s]){i[4]!==void 0?r?(r.p(i,s),s&16&&se(r,1)):(r=pi(i),r.c(),se(r,1),r.m(t.parentNode,t)):r&&(kt(),he(r,1,1,()=>{r=null}),Et())},i(i){n||(se(r),n=!0)},o(i){he(r),n=!1},d(i){r&&r.d(i),i&&p(t)}}}function Nc(e,t,n){var D,R,A;let r,i=J,s=()=>(i(),i=Ke(v,N=>n(19,r=N)),v);e.$$.on_destroy.push(()=>i());let{record_answer:l=()=>{},dataset:a=[],remeasure:o=()=>{},debug_mode:u,q_no:c,q_index:f,remeasurement_detail:h,remeasurement:d,total_remeasurement:g,move_prev_error:w,answers:v,question_data:b,remeasure_push:y}=t;s();let I=dt(),x=((D=b[c])==null?void 0:D.question)||"No question",T=(R=b[c])==null?void 0:R.response_type,S=(A=b[c])==null?void 0:A.spec,V={},X=[];return vt(()=>{var N;if(n(12,V=r[c]||{}),[Ln,T].includes(T)&&((N=b[c])!=null&&N.group_by)){let M=b[c].group_by;n(13,X=as(a.array(M)))}}),e.$$set=N=>{"record_answer"in N&&n(0,l=N.record_answer),"dataset"in N&&n(1,a=N.dataset),"remeasure"in N&&n(2,o=N.remeasure),"debug_mode"in N&&n(3,u=N.debug_mode),"q_no"in N&&n(4,c=N.q_no),"q_index"in N&&n(5,f=N.q_index),"remeasurement_detail"in N&&n(6,h=N.remeasurement_detail),"remeasurement"in N&&n(7,d=N.remeasurement),"total_remeasurement"in N&&n(8,g=N.total_remeasurement),"move_prev_error"in N&&n(9,w=N.move_prev_error),"answers"in N&&s(n(10,v=N.answers)),"question_data"in N&&n(18,b=N.question_data),"remeasure_push"in N&&n(11,y=N.remeasure_push)},[l,a,o,u,c,f,h,d,g,w,v,y,V,X,I,x,T,S,b]}class qc extends Xe{constructor(t){super(),Ye(this,t,Nc,Ec,Ge,{record_answer:0,dataset:1,remeasure:2,debug_mode:3,q_no:4,q_index:5,remeasurement_detail:6,remeasurement:7,total_remeasurement:8,move_prev_error:9,answers:10,question_data:18,remeasure_push:11})}}function Ac(e){let t,n;return{c(){t=k("span"),n=F("..."),this.h()},l(r){t=E(r,"SPAN",{style:!0,class:!0});var i=q(t);n=H(i,"..."),i.forEach(p),this.h()},h(){Ne(t,"font-weight","400"),m(t,"class","mt-2 text-white")},m(r,i){U(r,t,i),_(t,n)},p:J,d(r){r&&p(t)}}}function xc(e){let t,n;return{c(){t=k("span"),n=F(vr),this.h()},l(r){t=E(r,"SPAN",{style:!0,class:!0});var i=q(t);n=H(i,vr),i.forEach(p),this.h()},h(){Ne(t,"font-weight","400"),m(t,"class","mt-2 text-danger")},m(r,i){U(r,t,i),_(t,n)},p:J,d(r){r&&p(t)}}}function Ic(e){let t,n,r,i,s,l,a,o,u,c,f,h,d,g,w,v;function b(x,T){return x[0]?xc:Ac}let y=b(e),I=y(e);return{c(){t=k("h3"),n=F(gr),r=P(),i=k("br"),s=P(),I.c(),l=P(),a=k("div"),o=k("div"),u=F(e[2]),c=F(" / "),f=F(e[1]),h=P(),d=k("div"),g=k("div"),w=k("div"),this.h()},l(x){t=E(x,"H3",{class:!0});var T=q(t);n=H(T,gr),r=z(T),i=E(T,"BR",{}),s=z(T),I.l(T),T.forEach(p),l=z(x),a=E(x,"DIV",{class:!0});var S=q(a);o=E(S,"DIV",{class:!0});var V=q(o);u=H(V,e[2]),c=H(V," / "),f=H(V,e[1]),V.forEach(p),h=z(S),d=E(S,"DIV",{class:!0});var X=q(d);g=E(X,"DIV",{class:!0,role:!0,"aria-label":!0,"aria-valuenow":!0,"aria-valuemin":!0,"aria-valuemax":!0});var D=q(g);w=E(D,"DIV",{class:!0,style:!0}),q(w).forEach(p),D.forEach(p),X.forEach(p),S.forEach(p),this.h()},h(){m(t,"class","h6"),m(o,"class","val text-start svelte-wiwjz8"),m(w,"class","progress-bar bg-warning"),m(w,"style",v=`width: ${Math.round(e[2]/e[1]*100)}%`),m(g,"class","progress svelte-wiwjz8"),m(g,"role","progressbar"),m(g,"aria-label","Example 20px high"),m(g,"aria-valuenow","25"),m(g,"aria-valuemin","0"),m(g,"aria-valuemax","100"),m(d,"class","bar svelte-wiwjz8"),m(a,"class","progress-wrap d-flex pb-3 svelte-wiwjz8")},m(x,T){U(x,t,T),_(t,n),_(t,r),_(t,i),_(t,s),I.m(t,null),U(x,l,T),U(x,a,T),_(a,o),_(o,u),_(o,c),_(o,f),_(a,h),_(a,d),_(d,g),_(g,w)},p(x,[T]){y===(y=b(x))&&I?I.p(x,T):(I.d(1),I=y(x),I&&(I.c(),I.m(t,null))),T&4&&Ve(u,x[2]),T&2&&Ve(f,x[1]),T&6&&v!==(v=`width: ${Math.round(x[2]/x[1]*100)}%`)&&m(w,"style",v)},i:J,o:J,d(x){x&&p(t),I.d(),x&&p(l),x&&p(a)}}}function Tc(e,t,n){let{over_remeasure_budget:r=!1,base:i=0,count:s=1}=t;return e.$$set=l=>{"over_remeasure_budget"in l&&n(0,r=l.over_remeasure_budget),"base"in l&&n(1,i=l.base),"count"in l&&n(2,s=l.count)},[r,i,s]}class Mc extends Xe{constructor(t){super(),Ye(this,t,Tc,Ic,Ge,{over_remeasure_budget:0,base:1,count:2})}}function Sc(e){let t,n,r,i=(e[0]||"")+"",s,l,a,o,u,c,f,h,d,g=e[0]===""?"AC":"C",w,v,b,y,I,x,T,S,V,X,D,R,A,N,M,j,O,Y,W,Z,G,qe,ne,ie,pe,ge,ke,Ae,Ie,Te,Qe,de,le,Ce,Se,oe,te,L,K,_e,$,fe,ve,me,ue,De,B,ce,Ee,xe,Ue,at,it;return{c(){t=k("div"),n=k("div"),r=k("div"),s=F(i),l=P(),a=k("div"),o=F("= "),u=F(e[1]),c=P(),f=k("div"),h=k("div"),d=k("button"),w=F(g),v=P(),b=k("button"),y=F("9"),I=P(),x=k("button"),T=F("8"),S=P(),V=k("button"),X=F("7"),D=P(),R=k("button"),A=F("6"),N=P(),M=k("button"),j=F("5"),O=P(),Y=k("button"),W=F("4"),Z=P(),G=k("button"),qe=F("3"),ne=P(),ie=k("button"),pe=F("2"),ge=P(),ke=k("button"),Ae=F("1"),Ie=P(),Te=k("button"),Qe=F("0"),de=P(),le=k("button"),Ce=F("."),oe=P(),te=k("div"),L=k("button"),K=F("+"),_e=P(),$=k("button"),fe=F("-"),ve=P(),me=k("button"),ue=F("×"),De=P(),B=k("button"),ce=F("/"),Ee=P(),xe=k("button"),Ue=F("="),this.h()},l(Oe){t=E(Oe,"DIV",{id:!0,class:!0});var Le=q(t);n=E(Le,"DIV",{class:!0});var $e=q(n);r=E($e,"DIV",{class:!0});var Me=q(r);s=H(Me,i),Me.forEach(p),l=z($e),a=E($e,"DIV",{class:!0});var We=q(a);o=H(We,"= "),u=H(We,e[1]),We.forEach(p),$e.forEach(p),c=z(Le),f=E(Le,"DIV",{class:!0});var ae=q(f);h=E(ae,"DIV",{class:!0});var Q=q(h);d=E(Q,"BUTTON",{class:!0});var tn=q(d);w=H(tn,g),tn.forEach(p),v=z(Q),b=E(Q,"BUTTON",{class:!0});var Mt=q(b);y=H(Mt,"9"),Mt.forEach(p),I=z(Q),x=E(Q,"BUTTON",{class:!0});var St=q(x);T=H(St,"8"),St.forEach(p),S=z(Q),V=E(Q,"BUTTON",{class:!0});var Dt=q(V);X=H(Dt,"7"),Dt.forEach(p),D=z(Q),R=E(Q,"BUTTON",{class:!0});var bt=q(R);A=H(bt,"6"),bt.forEach(p),N=z(Q),M=E(Q,"BUTTON",{class:!0});var wt=q(M);j=H(wt,"5"),wt.forEach(p),O=z(Q),Y=E(Q,"BUTTON",{class:!0});var Vt=q(Y);W=H(Vt,"4"),Vt.forEach(p),Z=z(Q),G=E(Q,"BUTTON",{class:!0});var Ct=q(G);qe=H(Ct,"3"),Ct.forEach(p),ne=z(Q),ie=E(Q,"BUTTON",{class:!0});var Ot=q(ie);pe=H(Ot,"2"),Ot.forEach(p),ge=z(Q),ke=E(Q,"BUTTON",{class:!0});var Rt=q(ke);Ae=H(Rt,"1"),Rt.forEach(p),Ie=z(Q),Te=E(Q,"BUTTON",{class:!0});var Pt=q(Te);Qe=H(Pt,"0"),Pt.forEach(p),de=z(Q),le=E(Q,"BUTTON",{class:!0});var zt=q(le);Ce=H(zt,"."),zt.forEach(p),Q.forEach(p),oe=z(ae),te=E(ae,"DIV",{class:!0});var Je=q(te);L=E(Je,"BUTTON",{class:!0});var Bt=q(L);K=H(Bt,"+"),Bt.forEach(p),_e=z(Je),$=E(Je,"BUTTON",{class:!0});var Ft=q($);fe=H(Ft,"-"),Ft.forEach(p),ve=z(Je),me=E(Je,"BUTTON",{class:!0});var Ht=q(me);ue=H(Ht,"×"),Ht.forEach(p),De=z(Je),B=E(Je,"BUTTON",{class:!0});var Lt=q(B);ce=H(Lt,"/"),Lt.forEach(p),Ee=z(Je),xe=E(Je,"BUTTON",{class:!0});var Ut=q(xe);Ue=H(Ut,"="),Ut.forEach(p),Je.forEach(p),ae.forEach(p),Le.forEach(p),this.h()},h(){m(r,"class","current-input svelte-12xspqj"),m(a,"class","current-value svelte-12xspqj"),m(n,"class","current-form svelte-12xspqj"),m(d,"class","function C svelte-12xspqj"),m(b,"class","digit svelte-12xspqj"),m(x,"class","digit svelte-12xspqj"),m(V,"class","digit svelte-12xspqj"),m(R,"class","digit svelte-12xspqj"),m(M,"class","digit svelte-12xspqj"),m(Y,"class","digit svelte-12xspqj"),m(G,"class","digit svelte-12xspqj"),m(ie,"class","digit svelte-12xspqj"),m(ke,"class","digit svelte-12xspqj"),m(Te,"class","digit zero svelte-12xspqj"),m(le,"class","digit decimal svelte-12xspqj"),le.disabled=Se=e[0].includes("."),m(h,"class","digits svelte-12xspqj"),m(L,"class","function svelte-12xspqj"),m($,"class","function svelte-12xspqj"),m(me,"class","function svelte-12xspqj"),m(B,"class","function svelte-12xspqj"),m(xe,"class","function svelte-12xspqj"),m(te,"class","functions"),m(f,"class","keypad svelte-12xspqj"),m(t,"id","calculator"),m(t,"class","p-1 svelte-12xspqj")},m(Oe,Le){U(Oe,t,Le),_(t,n),_(n,r),_(r,s),_(n,l),_(n,a),_(a,o),_(a,u),_(t,c),_(t,f),_(f,h),_(h,d),_(d,w),_(h,v),_(h,b),_(b,y),_(h,I),_(h,x),_(x,T),_(h,S),_(h,V),_(V,X),_(h,D),_(h,R),_(R,A),_(h,N),_(h,M),_(M,j),_(h,O),_(h,Y),_(Y,W),_(h,Z),_(h,G),_(G,qe),_(h,ne),_(h,ie),_(ie,pe),_(h,ge),_(h,ke),_(ke,Ae),_(h,Ie),_(h,Te),_(Te,Qe),_(h,de),_(h,le),_(le,Ce),_(f,oe),_(f,te),_(te,L),_(L,K),_(te,_e),_(te,$),_($,fe),_(te,ve),_(te,me),_(me,ue),_(te,De),_(te,B),_(B,ce),_(te,Ee),_(te,xe),_(xe,Ue),at||(it=[ee(d,"click",e[8]),ee(b,"click",e[9]),ee(x,"click",e[10]),ee(V,"click",e[11]),ee(R,"click",e[12]),ee(M,"click",e[13]),ee(Y,"click",e[14]),ee(G,"click",e[15]),ee(ie,"click",e[16]),ee(ke,"click",e[17]),ee(Te,"click",e[18]),ee(le,"click",e[19]),ee(L,"click",e[20]),ee($,"click",e[21]),ee(me,"click",e[22]),ee(B,"click",e[23]),ee(xe,"click",e[24])],at=!0)},p(Oe,[Le]){Le&1&&i!==(i=(Oe[0]||"")+"")&&Ve(s,i),Le&2&&Ve(u,Oe[1]),Le&1&&g!==(g=Oe[0]===""?"AC":"C")&&Ve(w,g),Le&1&&Se!==(Se=Oe[0].includes("."))&&(le.disabled=Se)},i:J,o:J,d(Oe){Oe&&p(t),at=!1,ht(it)}}}function Dc(e,t,n){let r,i,s=dt("");Wt(e,s,j=>n(1,i=j));let l=dt("");Wt(e,l,j=>n(0,r=j));let a=null;function o(j){l.update(O=>O+j)}function u(j){j!=="minus"?(a=j,f()):r==""?o("-"):(a=j,f())}function c(j,O){if(a==="plus")return(j||0)+(O||0);if(a==="minus")return(j||0)-(O||0);if(a==="times")return(j||1)*(O||1);if(a==="divides")return(j||1)/(O||1)}function f(){if(console.log(a,i,r),a&&i!==""){let j=c(parseFloat(i||void 0),parseFloat(r||void 0));s.set(j.toString()),l.set("")}else s.set(r),l.set("")}function h(){r===""?s.set(""):l.set("")}return[r,i,s,l,o,u,f,h,()=>h(),()=>o("9"),()=>o("8"),()=>o("7"),()=>o("6"),()=>o("5"),()=>o("4"),()=>o("3"),()=>o("2"),()=>o("1"),()=>o("0"),()=>o("."),()=>u("plus"),()=>u("minus"),()=>u("times"),()=>u("divides"),()=>f()]}class Vc extends Xe{constructor(t){super(),Ye(this,t,Dc,Sc,Ge,{})}}function Cc(e){let t,n,r,i;return{c(){t=k("div"),n=k("textarea"),this.h()},l(s){t=E(s,"DIV",{id:!0,class:!0});var l=q(t);n=E(l,"TEXTAREA",{class:!0}),q(n).forEach(p),l.forEach(p),this.h()},h(){n.value=e[0],m(n,"class","svelte-fzvz2e"),m(t,"id","note"),m(t,"class","p-1 svelte-fzvz2e")},m(s,l){U(s,t,l),_(t,n),r||(i=ee(n,"change",e[1]),r=!0)},p(s,[l]){l&1&&(n.value=s[0])},i:J,o:J,d(s){s&&p(t),r=!1,i()}}}function Oc(e,t,n){let r;return Wt(e,or,s=>n(0,r=s)),[r,s=>{or.update(l=>s.target.value)}]}class Rc extends Xe{constructor(t){super(),Ye(this,t,Oc,Cc,Ge,{})}}function gi(e,t,n){const r=e.slice();return r[48]=t[n],r[50]=n,r}function Pc(e){let t,n,r,i,s,l,a,o,u,c,f,h,d,g,w,v,b,y,I,x,T,S,V,X,D,R;i=new Mc({props:{over_remeasure_budget:e[13],count:e[19]||0,base:e[6]}});let A=e[16],N=[];for(let O=0;O<A.length;O+=1)N[O]=bi(gi(e,A,O));const M=O=>he(N[O],1,1,()=>{N[O]=null});let j=e[12]&&wi();return{c(){t=k("section"),n=k("div"),r=k("div"),Pe(i.$$.fragment),s=P(),l=k("div"),a=k("a"),o=F("Open calculator & notes"),u=P(),c=k("br"),f=P(),h=k("a"),d=F("Open scoring rules"),g=P(),w=k("section");for(let O=0;O<N.length;O+=1)N[O].c();v=P(),b=k("section"),y=k("div"),I=k("button"),x=F("Submit answers"),S=P(),V=k("div"),j&&j.c(),this.h()},l(O){t=E(O,"SECTION",{id:!0,class:!0,style:!0});var Y=q(t);n=E(Y,"DIV",{class:!0,style:!0});var W=q(n);r=E(W,"DIV",{class:!0});var Z=q(r);ze(i.$$.fragment,Z),Z.forEach(p),s=z(W),l=E(W,"DIV",{class:!0});var G=q(l);a=E(G,"A",{style:!0});var qe=q(a);o=H(qe,"Open calculator & notes"),qe.forEach(p),u=z(G),c=E(G,"BR",{}),f=z(G),h=E(G,"A",{style:!0});var ne=q(h);d=H(ne,"Open scoring rules"),ne.forEach(p),G.forEach(p),W.forEach(p),Y.forEach(p),g=z(O),w=E(O,"SECTION",{id:!0,class:!0,style:!0});var ie=q(w);for(let Ie=0;Ie<N.length;Ie+=1)N[Ie].l(ie);ie.forEach(p),v=z(O),b=E(O,"SECTION",{class:!0});var pe=q(b);y=E(pe,"DIV",{class:!0,style:!0});var ge=q(y);I=E(ge,"BUTTON",{class:!0});var ke=q(I);x=H(ke,"Submit answers"),ke.forEach(p),ge.forEach(p),S=z(pe),V=E(pe,"DIV",{style:!0});var Ae=q(V);j&&j.l(Ae),Ae.forEach(p),pe.forEach(p),this.h()},h(){m(r,"class","col-9"),Ne(a,"cursor","pointer"),Ne(h,"cursor","pointer"),m(l,"class","col-3 text-end p-4"),m(n,"class","row"),Ne(n,"width","80vw"),Ne(n,"margin-left","10vw"),m(t,"id","progress"),m(t,"class","container-fluid pt-4 position-fixed bg-white border-bottom"),Ne(t,"z-index","4000"),Ne(t,"top","0"),Ne(t,"left","0"),m(w,"id","questions"),m(w,"class","container-fluid pt-3"),m(w,"style",`margin-top: ${nt.progress_bar_height}px;`),m(I,"class","btn btn-primary"),I.disabled=T=!e[11],m(y,"class","mb-3"),Ne(y,"width","auto"),Ne(y,"margin-left","auto"),Ne(y,"margin-right","auto"),Ne(V,"height","200px"),m(b,"class","container py-5 mb-1 text-center")},m(O,Y){U(O,t,Y),_(t,n),_(n,r),Be(i,r,null),_(n,s),_(n,l),_(l,a),_(a,o),_(l,u),_(l,c),_(l,f),_(l,h),_(h,d),U(O,g,Y),U(O,w,Y);for(let W=0;W<N.length;W+=1)N[W]&&N[W].m(w,null);U(O,v,Y),U(O,b,Y),_(b,y),_(y,I),_(I,x),_(b,S),_(b,V),j&&j.m(V,null),X=!0,D||(R=[ee(a,"click",e[36]),ee(h,"click",e[37]),ee(I,"click",e[38]),ee(y,"focus",e[39]),ee(y,"mouseover",e[40]),ee(y,"blur",e[41]),ee(y,"mouseout",e[42])],D=!0)},p(O,Y){const W={};if(Y[0]&8192&&(W.over_remeasure_budget=O[13]),Y[0]&524288&&(W.count=O[19]||0),Y[0]&64&&(W.base=O[6]),i.$set(W),Y[0]&167855356){A=O[16];let Z;for(Z=0;Z<A.length;Z+=1){const G=gi(O,A,Z);N[Z]?(N[Z].p(G,Y),se(N[Z],1)):(N[Z]=bi(G),N[Z].c(),se(N[Z],1),N[Z].m(w,null))}for(kt(),Z=A.length;Z<N.length;Z+=1)M(Z);Et()}(!X||Y[0]&2048&&T!==(T=!O[11]))&&(I.disabled=T),O[12]?j?j.p(O,Y):(j=wi(),j.c(),j.m(V,null)):j&&(j.d(1),j=null)},i(O){if(!X){se(i.$$.fragment,O);for(let Y=0;Y<A.length;Y+=1)se(N[Y]);X=!0}},o(O){he(i.$$.fragment,O),N=N.filter(Boolean);for(let Y=0;Y<N.length;Y+=1)he(N[Y]);X=!1},d(O){O&&p(t),Fe(i),O&&p(g),O&&p(w),qt(N,O),O&&p(v),O&&p(b),j&&j.d(),D=!1,ht(R)}}}function zc(e){let t,n;function r(l,a){return a[0]&33024&&(n=null),n==null&&(n=!!ms(l[8],l[15])),n?Hc:Fc}let i=r(e,[-1,-1]),s=i(e);return{c(){t=k("section"),s.c(),this.h()},l(l){t=E(l,"SECTION",{class:!0});var a=q(t);s.l(a),a.forEach(p),this.h()},h(){m(t,"class","container-fluid pt-5 text-center")},m(l,a){U(l,t,a),s.m(t,null)},p(l,a){i===(i=r(l,a))&&s?s.p(l,a):(s.d(1),s=i(l),s&&(s.c(),s.m(t,null)))},i:J,o:J,d(l){l&&p(t),s.d()}}}function Bc(e){let t,n,r=hr(e[9])+"",i,s,l,a,o,u;return{c(){t=k("section"),n=k("h3"),i=F(r),s=P(),l=k("button"),a=F("Continue"),this.h()},l(c){t=E(c,"SECTION",{class:!0});var f=q(t);n=E(f,"H3",{class:!0});var h=q(n);i=H(h,r),h.forEach(p),s=z(f),l=E(f,"BUTTON",{class:!0});var d=q(l);a=H(d,"Continue"),d.forEach(p),f.forEach(p),this.h()},h(){m(n,"class","h6"),m(l,"class","btn btn-primary mt-5"),m(t,"class","container-fluid pt-5 text-center")},m(c,f){U(c,t,f),_(t,n),_(n,i),_(t,s),_(t,l),_(l,a),o||(u=ee(l,"click",e[35]),o=!0)},p(c,f){f[0]&512&&r!==(r=hr(c[9])+"")&&Ve(i,r)},i:J,o:J,d(c){c&&p(t),o=!1,u()}}}function vi(e){let t,n;return t=new qc({props:{q_no:e[48],q_index:e[50]+1,record_answer:e[25],dataset:e[14][`q${e[48]}`],remeasure:e[27],answers:e[2],question_data:e[10],debug_mode:ps,remeasurement_detail:e[4],remeasurement:e[5],total_remeasurement:e[6],move_prev_error:e[7],remeasure_push:e[3]}}),{c(){Pe(t.$$.fragment)},l(r){ze(t.$$.fragment,r)},m(r,i){Be(t,r,i),n=!0},p(r,i){const s={};i[0]&65536&&(s.q_no=r[48]),i[0]&81920&&(s.dataset=r[14][`q${r[48]}`]),i[0]&4&&(s.answers=r[2]),i[0]&1024&&(s.question_data=r[10]),i[0]&16&&(s.remeasurement_detail=r[4]),i[0]&32&&(s.remeasurement=r[5]),i[0]&64&&(s.total_remeasurement=r[6]),i[0]&128&&(s.move_prev_error=r[7]),i[0]&8&&(s.remeasure_push=r[3]),t.$set(s)},i(r){n||(se(t.$$.fragment,r),n=!0)},o(r){he(t.$$.fragment,r),n=!1},d(r){Fe(t,r)}}}function bi(e){let t,n,r=e[14][`q${e[48]}`]&&vi(e);return{c(){r&&r.c(),t=ye()},l(i){r&&r.l(i),t=ye()},m(i,s){r&&r.m(i,s),U(i,t,s),n=!0},p(i,s){i[14][`q${i[48]}`]?r?(r.p(i,s),s[0]&81920&&se(r,1)):(r=vi(i),r.c(),se(r,1),r.m(t.parentNode,t)):r&&(kt(),he(r,1,1,()=>{r=null}),Et())},i(i){n||(se(r),n=!0)},o(i){he(r),n=!1},d(i){r&&r.d(i),i&&p(t)}}}function wi(e){let t,n;return{c(){t=k("p"),n=F(pr),this.h()},l(r){t=E(r,"P",{class:!0});var i=q(t);n=H(i,pr),i.forEach(p),this.h()},h(){m(t,"class","text-danger")},m(r,i){U(r,t,i),_(t,n)},p:J,d(r){r&&p(t)}}}function Fc(e){let t,n=_r(e[9])+"",r,i,s,l,a,o,u,c;return{c(){t=k("h3"),r=F(n),i=P(),s=k("p"),l=F(dr),a=P(),o=k("a"),u=F("Continue"),this.h()},l(f){t=E(f,"H3",{class:!0});var h=q(t);r=H(h,n),h.forEach(p),i=z(f),s=E(f,"P",{});var d=q(s);l=H(d,dr),d.forEach(p),a=z(f),o=E(f,"A",{class:!0,href:!0});var g=q(o);u=H(g,"Continue"),g.forEach(p),this.h()},h(){m(t,"class","h6"),m(o,"class","btn btn-primary mt-5"),m(o,"href",c=`${cr(e[8],e[15])}`)},m(f,h){U(f,t,h),_(t,r),U(f,i,h),U(f,s,h),_(s,l),U(f,a,h),U(f,o,h),_(o,u)},p(f,h){h[0]&512&&n!==(n=_r(f[9])+"")&&Ve(r,n),h[0]&33024&&c!==(c=`${cr(f[8],f[15])}`)&&m(o,"href",c)},d(f){f&&p(t),f&&p(i),f&&p(s),f&&p(a),f&&p(o)}}}function Hc(e){let t,n,r,i,s;return{c(){t=k("h3"),n=F(mr),r=P(),i=k("a"),s=F("Go back to the main page"),this.h()},l(l){t=E(l,"H3",{class:!0});var a=q(t);n=H(a,mr),a.forEach(p),r=z(l),i=E(l,"A",{class:!0,href:!0});var o=q(i);s=H(o,"Go back to the main page"),o.forEach(p),this.h()},h(){m(t,"class","h6"),m(i,"class","btn btn-primary mt-5"),m(i,"href","/")},m(l,a){U(l,t,a),_(t,n),U(l,r,a),U(l,i,a),_(i,s)},p:J,d(l){l&&p(t),l&&p(r),l&&p(i)}}}function yi(e){let t,n,r,i,s,l,a,o,u,c,f,h,d,g,w,v,b,y,I,x;return a=new Rc({}),d=new Vc({}),{c(){t=k("section"),n=k("div"),r=k("div"),i=k("h6"),s=F("Notes"),l=P(),Pe(a.$$.fragment),o=P(),u=k("div"),c=k("h6"),f=F("Calculator"),h=P(),Pe(d.$$.fragment),g=P(),w=k("div"),v=k("button"),b=F("Close"),this.h()},l(T){t=E(T,"SECTION",{id:!0,class:!0});var S=q(t);n=E(S,"DIV",{class:!0});var V=q(n);r=E(V,"DIV",{class:!0});var X=q(r);i=E(X,"H6",{});var D=q(i);s=H(D,"Notes"),D.forEach(p),l=z(X),ze(a.$$.fragment,X),X.forEach(p),o=z(V),u=E(V,"DIV",{});var R=q(u);c=E(R,"H6",{});var A=q(c);f=H(A,"Calculator"),A.forEach(p),h=z(R),ze(d.$$.fragment,R),R.forEach(p),V.forEach(p),g=z(S),w=E(S,"DIV",{class:!0});var N=q(w);v=E(N,"BUTTON",{class:!0});var M=q(v);b=H(M,"Close"),M.forEach(p),N.forEach(p),S.forEach(p),this.h()},h(){m(r,"class","me-3"),m(n,"class","calculator-note-wrap svelte-6fpz8x"),m(v,"class","btn btn-secondary"),m(w,"class","text-center mt-3"),m(t,"id","calculator-float"),m(t,"class","svelte-6fpz8x")},m(T,S){U(T,t,S),_(t,n),_(n,r),_(r,i),_(i,s),_(r,l),Be(a,r,null),_(n,o),_(n,u),_(u,c),_(c,f),_(u,h),Be(d,u,null),_(t,g),_(t,w),_(w,v),_(v,b),y=!0,I||(x=ee(v,"click",e[43]),I=!0)},p:J,i(T){y||(se(a.$$.fragment,T),se(d.$$.fragment,T),y=!0)},o(T){he(a.$$.fragment,T),he(d.$$.fragment,T),y=!1},d(T){T&&p(t),Fe(a),Fe(d),I=!1,x()}}}function ki(e){let t,n,r,i,s,l,a,o,u,c,f,h,d;return l=new us({}),{c(){t=k("section"),n=k("div"),r=k("button"),i=F("Close"),s=P(),Pe(l.$$.fragment),a=P(),o=k("div"),u=k("button"),c=F("Close"),this.h()},l(g){t=E(g,"SECTION",{id:!0,class:!0});var w=q(t);n=E(w,"DIV",{class:!0});var v=q(n);r=E(v,"BUTTON",{class:!0});var b=q(r);i=H(b,"Close"),b.forEach(p),v.forEach(p),s=z(w),ze(l.$$.fragment,w),a=z(w),o=E(w,"DIV",{class:!0});var y=q(o);u=E(y,"BUTTON",{class:!0});var I=q(u);c=H(I,"Close"),I.forEach(p),y.forEach(p),w.forEach(p),this.h()},h(){m(r,"class","btn btn-secondary"),m(n,"class","text-center mb-3"),m(u,"class","btn btn-secondary"),m(o,"class","text-center mb-3"),m(t,"id","scoring-rule-float"),m(t,"class","svelte-6fpz8x")},m(g,w){U(g,t,w),_(t,n),_(n,r),_(r,i),_(t,s),Be(l,t,null),_(t,a),_(t,o),_(o,u),_(u,c),f=!0,h||(d=[ee(r,"click",e[44]),ee(u,"click",e[45])],h=!0)},p:J,i(g){f||(se(l.$$.fragment,g),f=!0)},o(g){he(l.$$.fragment,g),f=!1},d(g){g&&p(t),Fe(l),h=!1,ht(d)}}}function Lc(e){let t,n,r,i,s,l,a,o,u,c,f;document.title=t=e[9]+" | "+rn;const h=[Bc,zc,Pc],d=[];function g(b,y){return b[22]==0?0:b[22]==-1?1:2}s=g(e),l=d[s]=h[s](e);let w=e[17]&&yi(e),v=e[18]&&ki(e);return{c(){n=k("meta"),i=P(),l.c(),a=P(),w&&w.c(),o=P(),v&&v.c(),u=P(),c=ye(),this.h()},l(b){const y=is("svelte-14w7d69",document.head);n=E(y,"META",{name:!0,content:!0}),y.forEach(p),i=z(b),l.l(b),a=z(b),w&&w.l(b),o=z(b),v&&v.l(b),u=z(b),c=ye(),this.h()},h(){m(n,"name","description"),m(n,"content",r=rn+" "+e[9])},m(b,y){_(document.head,n),U(b,i,y),d[s].m(b,y),U(b,a,y),w&&w.m(b,y),U(b,o,y),v&&v.m(b,y),U(b,u,y),U(b,c,y),f=!0},p(b,y){(!f||y[0]&512)&&t!==(t=b[9]+" | "+rn)&&(document.title=t),(!f||y[0]&512&&r!==(r=rn+" "+b[9]))&&m(n,"content",r);let I=s;s=g(b),s===I?d[s].p(b,y):(kt(),he(d[I],1,1,()=>{d[I]=null}),Et(),l=d[s],l?l.p(b,y):(l=d[s]=h[s](b),l.c()),se(l,1),l.m(a.parentNode,a)),b[17]?w?(w.p(b,y),y[0]&131072&&se(w,1)):(w=yi(b),w.c(),se(w,1),w.m(o.parentNode,o)):w&&(kt(),he(w,1,1,()=>{w=null}),Et()),b[18]?v?(v.p(b,y),y[0]&262144&&se(v,1)):(v=ki(b),v.c(),se(v,1),v.m(u.parentNode,u)):v&&(kt(),he(v,1,1,()=>{v=null}),Et())},i(b){f||(se(l),se(w),se(v),f=!0)},o(b){he(l),he(w),he(v),f=!1},d(b){p(n),b&&p(i),d[s].d(b),b&&p(a),w&&w.d(b),b&&p(o),v&&v.d(b),b&&p(u),b&&p(c)}}}function Uc(e,t,n){let r,i=J,s=()=>(i(),i=Ke(X,B=>n(19,r=B)),X),l,a=J,o=()=>(a(),a=Ke(I,B=>n(20,l=B)),I),u,c=J,f=()=>(c(),c=Ke(V,B=>n(21,u=B)),V),h,d=J,g=()=>(d(),d=Ke(y,B=>n(22,h=B)),y),w,v=J,b=()=>(v(),v=Ke(x,B=>n(23,w=B)),x);e.$$.on_destroy.push(()=>i()),e.$$.on_destroy.push(()=>a()),e.$$.on_destroy.push(()=>c()),e.$$.on_destroy.push(()=>d()),e.$$.on_destroy.push(()=>v());let{question_no:y,user_id:I,answers:x,total_questions:T,remeasure_push:S,remeasurement_detail:V,remeasurement:X,total_remeasurement:D,move_prev_error:R,phase:A,phaseName:N,question_data:M,bins:j}=t;g(),o(),b(),f(),s();function O(B){y.set(B)}let Y=!1,W=!1;function Z(B,ce){x.update(Ee=>(Ee[B]=ce,Ee))}function G(){(ur(A)||confirm("Your answers will be final."))&&O(-1)}let qe=r>=D;function ne(B){r<D&&(X.update(ce=>ce+1),V.update(ce=>(ce[B]===void 0&&(ce[B]=0),ce[B]+=1,ce)),S.set({question:B,count:u[B]}),n(13,qe=r>=D))}let ie={},pe=[],ge=[];async function ke(){let B=await cs();I.set(B==null?void 0:B.Pid),n(15,pe=(B==null?void 0:B.order_2)||[]),n(16,ge=(B==null?void 0:B[fs[A]])||[1]),X.set(0),y.set(0),V.update(ce=>{let Ee={};return ge.forEach(xe=>{Ee[xe]=0}),Ee}),x.set({})}async function Ae(){let ce=await(await hs("data-tutorial-2.csv")).text();return _s(ce)}async function Ie(){Object.keys(M).forEach(B=>{let ce=`q${B}`,Ee=`q${gs[A]+parseInt(B)}`;ur(A)?Ae().then(xe=>{n(14,ie[ce]=xe,ie)}):ds(A,l,Ee).then(xe=>{n(14,ie[ce]=xe,ie)})})}let Te=!1;function Qe(){n(17,Te=!0)}function de(){n(17,Te=!1)}let le=!1;function Ce(){n(18,le=!0)}function Se(){n(18,le=!1)}vt(()=>{R.set(!0),x.subscribe(B=>{n(11,Y=os(B,M,T,j))}),ke().then(()=>{Ie()}),n(13,qe=r>=D)});const oe=()=>{O(1)},te=()=>{Qe()},L=()=>{Ce()},K=()=>{G()},_e=()=>{n(12,W=!Y)},$=()=>{n(12,W=!Y)},fe=()=>{n(12,W=!1)},ve=()=>{n(12,W=!1)},me=()=>{de()},ue=()=>{Se()},De=()=>{Se()};return e.$$set=B=>{"question_no"in B&&g(n(0,y=B.question_no)),"user_id"in B&&o(n(1,I=B.user_id)),"answers"in B&&b(n(2,x=B.answers)),"total_questions"in B&&n(32,T=B.total_questions),"remeasure_push"in B&&n(3,S=B.remeasure_push),"remeasurement_detail"in B&&f(n(4,V=B.remeasurement_detail)),"remeasurement"in B&&s(n(5,X=B.remeasurement)),"total_remeasurement"in B&&n(6,D=B.total_remeasurement),"move_prev_error"in B&&n(7,R=B.move_prev_error),"phase"in B&&n(8,A=B.phase),"phaseName"in B&&n(9,N=B.phaseName),"question_data"in B&&n(10,M=B.question_data),"bins"in B&&n(33,j=B.bins)},[y,I,x,S,V,X,D,R,A,N,M,Y,W,qe,ie,pe,ge,Te,le,r,l,u,h,w,O,Z,G,ne,Qe,de,Ce,Se,T,j,Ae,oe,te,L,K,_e,$,fe,ve,me,ue,De]}class Gc extends Xe{constructor(t){super(),Ye(this,t,Uc,Lc,Ge,{question_no:0,user_id:1,answers:2,total_questions:32,remeasure_push:3,remeasurement_detail:4,remeasurement:5,total_remeasurement:6,move_prev_error:7,phase:8,phaseName:9,question_data:10,bins:33,get_training_data:34},null,[-1,-1])}get get_training_data(){return this.$$.ctx[34]}}export{Gc as P};
